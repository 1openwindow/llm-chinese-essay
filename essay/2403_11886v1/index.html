<!DOCTYPE html>

<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction</title>
<!--Generated on Mon Mar 18 15:38:16 2024 by LaTeXML (version 0.8.7) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="resource/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="resource/ar5iv_0.7.4.min.css" rel="stylesheet" type="text/css"/>
<link href="resource/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="resource/bootstrap.bundle.min.js"></script>
<script src="resource/html2canvas.min.js"></script>
<script src="resource/addons.js"></script>
<script src="resource/feedbackOverlay.js"></script>
</head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="#S1" title="1 Introduction ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="#S2" title="2 Related Work ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Related Work</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#S2.SS1" title="2.1 Few-shot KBQA ‣ 2 Related Work ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Few-shot KBQA</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#S2.SS2" title="2.2 Self-Correction ‣ 2 Related Work ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Self-Correction</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="#S3" title="3 Method ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Method</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#S3.SS1" title="3.1 Overview ‣ 3 Method ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Overview</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#S3.SS2" title="3.2 Query Construction ‣ 3 Method ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Query Construction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#S3.SS3" title="3.3 ERASER ‣ 3 Method ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>ERASER</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="#S4" title="4 Experiment ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Experiment</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#S4.SS1" title="4.1 Datasets ‣ 4 Experiment ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Datasets</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#S4.SS2" title="4.2 Baselines ‣ 4 Experiment ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Baselines</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#S4.SS3" title="4.3 Experimental Setup ‣ 4 Experiment ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.3 </span>Experimental Setup</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#S4.SS4" title="4.4 Main Result ‣ 4 Experiment ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4 </span>Main Result</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="#S5" title="5 Detailed Analysis ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Detailed Analysis</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#S5.SS1" title="5.1 Ablation Study ‣ 5 Detailed Analysis ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.1 </span>Ablation Study</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#S5.SS2" title="5.2 Efficiency Analysis ‣ 5 Detailed Analysis ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.2 </span>Efficiency Analysis</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#S5.SS3" title="5.3 Generalization Ability ‣ 5 Detailed Analysis ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.3 </span>Generalization Ability</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#S5.SS4" title="5.4 Transfer Experiment ‣ 5 Detailed Analysis ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.4 </span>Transfer Experiment</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="#S6" title="6 Conclusion ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Conclusion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="#A1" title="Appendix A Preliminary ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Preliminary</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="#A2" title="Appendix B Implementation Details of QueryAgent ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Implementation Details of QueryAgent</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#A2.SS1" title="B.1 Detailed Elaboration of Reasoning Process ‣ Appendix B Implementation Details of QueryAgent ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B.1 </span>Detailed Elaboration of Reasoning Process</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#A2.SS2" title="B.2 Relation Ranking ‣ Appendix B Implementation Details of QueryAgent ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B.2 </span>Relation Ranking</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="#A3" title="Appendix C Other Experiment Details ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Other Experiment Details</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#A3.SS1" title="C.1 Baseline Methods ‣ Appendix C Other Experiment Details ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.1 </span>Baseline Methods</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#A3.SS2" title="C.2 API invocation Cost ‣ Appendix C Other Experiment Details ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.2 </span>API invocation Cost</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#A3.SS3" title="C.3 Impact of Different Relation Ranking Strategy ‣ Appendix C Other Experiment Details ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.3 </span>Impact of Different Relation Ranking Strategy</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="#A3.SS4" title="C.4 Result with Golden Entity ‣ Appendix C Other Experiment Details ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.4 </span>Result with Golden Entity</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="#A4" title="Appendix D Prompt used in QueryAgent ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D </span>Prompt used in QueryAgent</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="#A5" title="Appendix E Tools Sets ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">E </span>Tools Sets</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="#A6" title="Appendix F Case Study ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">F </span>Case Study</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="#A7" title="Appendix G Example Guidelines of ERASER ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">G </span>Example Guidelines of ERASER</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<div class="section" id="target-section"><div id="license-tr">License: arXiv.org perpetual non-exclusive license</div><div id="watermark-tr">arXiv:2403.11886v1 [cs.CL] 18 Mar 2024</div></div>
<script>
            function closePopup() {
                document.querySelector('.package-alerts').style.display = 'none';
            }
        </script>
<article class="ltx_document">
<h1 class="ltx_title ltx_title_document">QueryAgent：基于环境反馈的可靠高效推理框架与自我校正</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Xiang Huang<sup class="ltx_sup" id="id1.1.id1">1</sup>, Sitao Cheng<sup class="ltx_sup" id="id2.2.id2">1</sup>, Shanshan Huang<sup class="ltx_sup" id="id3.3.id3">1</sup>, Jiayu Shen<sup class="ltx_sup" id="id4.4.id4">1</sup>, 
<br class="ltx_break"/><span class="ltx_text ltx_font_bold" id="id5.5.id5">Yong Xu<sup class="ltx_sup" id="id5.5.id5.1">2</sup>, Chaoyun Zhang<sup class="ltx_sup" id="id5.5.id5.2">2</sup>, Yuzhong Qu<sup class="ltx_sup" id="id5.5.id5.3">1</sup></span>
<br class="ltx_break"/><sup class="ltx_sup" id="id6.6.id6">1</sup>State Key Laboratory for Novel Software Technology, Nanjing University, China 
<br class="ltx_break"/><sup class="ltx_sup" id="id7.7.id7">2</sup>Microsoft 
<br class="ltx_break"/>xianghuang@smail.nju.edu.cn, yzqu@nju.edu.cn
</span><span class="ltx_author_notes">  This work is done during the internship at Microsoft.  Equal contribution.</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">摘要</h6>
<p class="ltx_p" id="id8.id1">利用大型语言模型（LLMs）进行语义解析取得了显著的成功。
然而，当出现幻觉时，我们发现现有方法在可靠性和效率方面存在不足。
在本文中，我们提出了一个名为QueryAgent的框架来解决这些挑战，该框架逐步解决问题并进行逐步自我纠正。
我们引入了一种基于环境反馈的自我纠正方法，称为ERASER。
与传统方法不同，ERASER利用中间步骤中丰富的环境反馈，只在必要时进行选择性和差异化的自我纠正。
实验结果表明，QueryAgent在GrailQA和GraphQ上仅使用一个示例就显著优于所有以往的少样本方法，F1分别提高了7.0和15.0。
此外，我们的方法在效率方面表现出优势，包括运行时间、查询开销和API调用成本。
通过利用ERASER，我们进一步改进了另一个基准（<span class="ltx_text ltx_font_italic" id="id8.id1.1">即</span> AgentBench）约10个百分点，揭示了我们方法的强大可迁移性。</p>
</div>
<div class="ltx_para ltx_noindent" id="p1">
<p class="ltx_p ltx_align_center ltx_align_bottom" id="p1.1"><span class="ltx_text ltx_font_bold" id="p1.1.1">QueryAgent：基于环境反馈的可靠高效推理框架自我纠正</span></p>
</div>
<div class="ltx_para" id="p2">
<br class="ltx_break"/>
<p class="ltx_p" id="p2.1"><span class="ltx_text" id="p2.1.1" style="width:433.6pt;"><span class="ltx_text" id="p2.1.1.1" style="width:0.0pt;">
<span class="ltx_tabular ltx_align_top" id="p2.1.1.1.1">
<span class="ltx_tbody">
<span class="ltx_tr" id="p2.1.1.1.1.1.1">
<span class="ltx_td ltx_align_center" id="p2.1.1.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="p2.1.1.1.1.1.1.1.1">黄翔<sup class="ltx_sup" id="p2.1.1.1.1.1.1.1.1.1">1</sup>, 程思涛<sup class="ltx_sup" id="p2.1.1.1.1.1.1.1.1.2">1</sup><span class="ltx_note ltx_role_thanks" id="p2.1.1.1.1.1.1.1.1.3"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">感谢： </span>  这项工作是在微软实习期间完成的。</span></span></span><span class="ltx_note ltx_role_thanks" id="p2.1.1.1.1.1.1.1.1.4"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">感谢： </span>  平等贡献。</span></span></span>, 黄姗姗<sup class="ltx_sup" id="p2.1.1.1.1.1.1.1.1.5">1</sup>, 沈嘉宇<sup class="ltx_sup" id="p2.1.1.1.1.1.1.1.1.6">1</sup>,</span></span></span>
<span class="ltx_tr" id="p2.1.1.1.1.2.2">
<span class="ltx_td ltx_align_center" id="p2.1.1.1.1.2.2.1"><span class="ltx_text ltx_font_bold" id="p2.1.1.1.1.2.2.1.1">徐勇<sup class="ltx_sup" id="p2.1.1.1.1.2.2.1.1.1">2</sup>, 张超云<sup class="ltx_sup" id="p2.1.1.1.1.2.2.1.1.2">2</sup>, 曲玉忠<sup class="ltx_sup" id="p2.1.1.1.1.2.2.1.1.3">1</sup></span></span></span>
<span class="ltx_tr" id="p2.1.1.1.1.3.3">
<span class="ltx_td ltx_align_center" id="p2.1.1.1.1.3.3.1"><sup class="ltx_sup" id="p2.1.1.1.1.3.3.1.1">1</sup>南京大学新软件技术国家重点实验室，中国</span></span>
<span class="ltx_tr" id="p2.1.1.1.1.4.4">
<span class="ltx_td ltx_align_center" id="p2.1.1.1.1.4.4.1"><sup class="ltx_sup" id="p2.1.1.1.1.4.4.1.1">2</sup>微软</span></span>
<span class="ltx_tr" id="p2.1.1.1.1.5.5">
<span class="ltx_td ltx_align_center" id="p2.1.1.1.1.5.5.1">xianghuang@smail.nju.edu.cn, yzqu@nju.edu.cn</span></span>
</span>
</span></span> </span></p>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section"><span class="ltx_tag ltx_tag_section">1 </span>介绍</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">最近在各种任务中使用大型语言模型（LLMs）取得了令人印象深刻的表现<cite class="ltx_cite ltx_citemacro_cite">Brown et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib1" title="">2020</a>); OpenAI (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib13" title="">2023</a>)</cite>。
在这些任务中，知识库问答（KBQA）旨在回答知识库（KB）上的问题，已经成为一个关键和复杂的挑战，是评估LLMs在结构化数据上推理能力的理想试验平台<cite class="ltx_cite ltx_citemacro_cite">Gu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib3" title="">2023</a>)</cite>。</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">然而，尽管它们取得了显著的成就，我们发现现有的LLM后端KBQA方法在可靠性（结果的可信度）和效率（<span class="ltx_text ltx_font_italic" id="S1.p2.1.1">即</span>，运行时间、查询次数和API调用成本）方面存在不足。遵循流行的上下文学习（ICL）范式，<cite class="ltx_cite ltx_citemacro_citet">Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib9" title="">2023</a>)</cite>和<cite class="ltx_cite ltx_citemacro_citet">Nie et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib11" title="">2023</a>)</cite>利用少样本演示生成目标查询。他们将LLMs视为黑匣子并一次完成复杂任务。因此，它缺乏可解释性，容易产生幻觉<cite class="ltx_cite ltx_citemacro_cite">Yao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib22" title="">2023</a>)</cite>，导致最佳候选的准确率降低。为了缓解这些问题，他们采用了波束搜索和自一致性<cite class="ltx_cite ltx_citemacro_cite">Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib20" title="">2023</a>)</cite>。然而，这也导致了大量不可靠的候选者，从而增加了运行时间和查询次数。通常，它需要查询成千上万个SPARQL查询并耗时数分钟才能获得最终答案。</p>
</div>
<figure class="ltx_figure" id="S1.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="241" id="S1.F1.g1" src="resource/x1.png" width="292"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">图1： </span>QueryAgent与采用LLM的两种主流KBQA范式进行了比较。</figcaption>
</figure>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">对于一个复杂的任务，逐步解决已经成为一个有希望的解决方案<cite class="ltx_cite ltx_citemacro_cite">Wei et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib21" title="">2022</a>); Zhou et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib27" title="">2023</a>)</cite>。
AgentBench<cite class="ltx_cite ltx_citemacro_cite">Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib10" title="">2024</a>)</cite>通过逐步调用工具来构建目标查询来实现基于Agent的<cite class="ltx_cite ltx_citemacro_cite">Yao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib22" title="">2023</a>)</cite>KBQA系统。
然而，它的迭代性质要求每一步严格依赖于前一步。
当出现幻觉时，随后的推理过程将建立在错误的基础之上，导致不可靠的候选项和无意义的资源浪费。
另外，需要在每一步调用一个LLM使得波束搜索无法负担得起，对top-1结果的准确性提出了很高的要求。
在我们的初步实验中，我们观察到AgentBench中35%的问题遭受各种幻觉的困扰。
因此，AgentBench的表现令人不满，只有57%的F1值达到了GrailQA基于ICL方法的最新水平。</p>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">针对这些挑战，我们引入了一个名为<span class="ltx_text ltx_font_bold" id="S1.p4.1.1">QueryAgent</span>的框架，以在复杂环境中探索更可靠和高效的推理。具体来说，QueryAgent将KBQA建模为一个多轮生成任务，逐步使用工具构建目标查询并进行逐步自我纠正。为了减轻多步推理的错误累积问题，我们提出了一种基于环境反馈的自我纠正方法，称为<span class="ltx_text ltx_font_bold" id="S1.p4.1.2">ERASER</span>（<span class="ltx_text ltx_font_bold" id="S1.p4.1.3">E</span>nvi<span class="ltx_text ltx_font_bold" id="S1.p4.1.4">R</span>onmental feedb<span class="ltx_text ltx_font_bold" id="S1.p4.1.5">A</span>ck <span class="ltx_text ltx_font_bold" id="S1.p4.1.6">SE</span>lf-co<span class="ltx_text ltx_font_bold" id="S1.p4.1.7">R</span>rection）。对于每个LLM生成的文本，ERASER检测其是否错误，并根据中间步骤的环境反馈（例如，KB执行结果、Python解释器执行状态、先前的推理记忆）分析可能的原因。在分析这些反馈后，ERASER提供错误的潜在原因和纠正的一般指导方针。基于这些指导方针，LLM可以重新考虑并纠正错误的结果。</p>
</div>
<div class="ltx_para" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">与以往的自我纠正方法<cite class="ltx_cite ltx_citemacro_cite">Pourreza and Rafiei (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib15" title="">2023</a>); Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib2" title="">2023</a>)</cite>不同，这些方法是无目的地用同样的少量展示来纠正每一个生成的结果，
ERASER的理念是积极地根据中间推理步骤中丰富的环境反馈来主动识别和区分各种错误，然后为不同类型的错误提供量身定制的指导方针。
在各种环境反馈的帮助下，ERASER具有更为坚实的基础，用于精确检测、分析和纠正，而不仅仅依赖于最终答案。
此外，ERASER区分不同类型的错误，使其能够为每种错误类型提供特定定制的指导方针。
这种有针对性的方法使ERASER更具目的性和可扩展性。
在存在众多潜在错误场景的情况下，针对不同错误的指导方针可以独立开发，而无需将所有可能的错误案例编码到一个单一提示中。</p>
</div>
<div class="ltx_para" id="S1.p6">
<p class="ltx_p" id="S1.p6.1">我们进行了大量实验来评估QueryAgent和ERASER的有效性。
仅有1个示例，QueryAgent显著超越所有需要高达100个示例的few-shot方法，在GrailQA（+7.0），GraphQ（+15.0），WebQSP（+3.4）和MetaQA（+2.0）上。
此外，我们的方法展示了显著的效率改进。
与基于ICL的方法相比，QueryAgent将运行时间和查询开销减少到了几个数量级。
与基于Agent的方法相比，QueryAgent可以将API调用成本和运行时间减少约50%。
这些结果突显了我们方法的可靠性和效率。
我们还在一个Text2SQL数据集（WikiSQL）上评估了QueryAgent，并将ERASER适应到另一个系统（AgentBench）上，以展示它们的多功能性。
结果表明，QueryAgent在GrailQA和GraphQ上的F1分别比之前的32-shot方法高出了6.9个点。
此外，ERASER相对于AgentBench在GrailQA和GraphQ上分别提供了26%和42%的额外改进
<span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>我们的代码将在<a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/cdhx/QueryAgent" title="">https://github.com/cdhx/QueryAgent</a>上发布</span></span></span>。</p>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section"><span class="ltx_tag ltx_tag_section">2 </span>相关工作</h2>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">2.1 </span>少样本知识库问答 (KBQA)</h3>
<div class="ltx_para" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.1">近期在采用LLMs进行少样本知识库问答的进展可以大致分为3类：</p>
</div>
<div class="ltx_para" id="S2.SS1.p2">
<p class="ltx_p" id="S2.SS1.p2.1">1) <span class="ltx_text ltx_font_bold" id="S2.SS1.p2.1.1">基于ICL</span>
KB-BINDER <cite class="ltx_cite ltx_citemacro_cite">Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib9" title="">2023</a>)</cite>和KB-Coder <cite class="ltx_cite ltx_citemacro_cite">Nie et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib11" title="">2023</a>)</cite>通过使用数十个注释示例实现了基于ICL的系统。
由于他们将这个复杂的任务建模为一个简单的端到端生成过程，因此LLMs直接面对着一个大的搜索空间，因此更有可能生成不可靠的结果。
尽管它们结合了束搜索和自一致性来增加包含正确逻辑形式的可能性，但这也引入了处理大量候选项的需要。
平均而言，为了解决一个问题，需要执行数千个候选查询，并花费几分钟来获得最终答案。</p>
</div>
<div class="ltx_para" id="S2.SS1.p3">
<p class="ltx_p" id="S2.SS1.p3.1">2) <span class="ltx_text ltx_font_bold" id="S2.SS1.p3.1.1">基于IR</span> 从实体开始，StructGPT <cite class="ltx_cite ltx_citemacro_cite">Jiang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib8" title="">2023</a>)</cite>和ToG <cite class="ltx_cite ltx_citemacro_cite">Sun et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib18" title="">2024</a>)</cite>迭代地在图上行走，选择下一个相邻的实体跳转，直到找到答案。
与生成可执行查询的方法相比，这些方法只能解决推理过程可以建模为单一、非分支链的问题。
他们无法模拟具有多个约束的问题，其推理过程是树或图。
当他们在KG中遍历以获取答案时，
对于答案不是KG中的实体的问题，他们有限制（<span class="ltx_text ltx_font_italic" id="S2.SS1.p3.1.2">例如，</span>聚合或布尔问题）。</p>
</div>
<div class="ltx_para" id="S2.SS1.p4">
<p class="ltx_p" id="S2.SS1.p4.1">3) <span class="ltx_text ltx_font_bold" id="S2.SS1.p4.1.1">基于Agent的</span> AgentBench <cite class="ltx_cite ltx_citemacro_cite">Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib10" title="">2024</a>)</cite>
利用一些预定义的SPARQL模板逐步解决问题，包括获取一跳关系，合并两个推理路径，添加聚合等。
对于复杂任务，逐步解决与人类直觉一致，并有助于减少潜在的搜索空间。
然而，在每一步，AgentBench严重依赖先前的结果，因此需要高精度。
我们观察到AgentBench在推理过程中遇到各种意外输出，导致严重的错误累积。
当幻觉出现在前面的步骤中时，随后的步骤变得毫无意义或不可靠。
这些因素导致性能较差，仅有效果ICL-based方法的一半。</p>
</div>
<div class="ltx_para" id="S2.SS1.p5">
<p class="ltx_p" id="S2.SS1.p5.1">在这项工作中，基于代理范式，我们提出了一个可靠高效的框架称为QueryAgent，并通过引入自我修正方法缓解LLM的幻觉。</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">2.2 </span>自我校正</h3>
<div class="ltx_para" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.1">随着对LLM生成内容的准确性和适当性的关注持续存在，自我纠正被提出作为解决这些问题的方法<cite class="ltx_cite ltx_citemacro_cite">Pan et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib14" title="">2023</a>)</cite>。
DIN-SQL<cite class="ltx_cite ltx_citemacro_cite">Pourreza and Rafiei (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib15" title="">2023</a>)</cite>利用零-shot提示来纠正生成的SQL查询中的错误。
该提示要求LLMs检查生成的SQL查询中可能存在的错误并进行纠正，同时跳过那些被认为是无错误的。
这种内在的自我纠正，完全基于LLMs固有的能力而没有外部反馈的支持，无法取得显著的改善并且不可靠<cite class="ltx_cite ltx_citemacro_cite">Huang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib6" title="">2024</a>)</cite>.
一个直观的改进是在提示中加入少量示范<cite class="ltx_cite ltx_citemacro_cite">Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib2" title="">2023</a>)</cite>.
然而，这将导致更长的提示，而且只能涵盖有限数量的场景。
由于它们对所有情况都不加区分地应用相同的提示，LLMs可能会困惑于哪个示例适用于当前情况。
一些作品像SALAM<cite class="ltx_cite ltx_citemacro_cite">Wang and Li (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib19" title="">2023</a>)</cite>训练一个模型来检索最相似的错误案例。
即便如此，它仍然不能确保精确的错误判别并且是繁重的。
此外，上述方法忽视了环境（<span class="ltx_text ltx_font_italic" id="S2.SS2.p1.1.1">例如，</span>KB，DB）可以为错误纠正提供丰富反馈。
这些方法仅仅依赖最终输出作为错误纠正的基础，给LLMs做出准确判断带来了重大挑战。</p>
</div>
<div class="ltx_para" id="S2.SS2.p2">
<p class="ltx_p" id="S2.SS2.p2.1">为了解决上述问题，我们提出了ERASER，一种基于环境反馈的自我纠正方法。根据中间步骤中来自环境的反馈，ERASER主动识别错误发生的时机，并提供量身定制的指导方针。</p>
</div>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section"><span class="ltx_tag ltx_tag_section">3 </span>方法</h2>
<figure class="ltx_figure" id="S3.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="280" id="S3.F2.g1" src="resource/x2.png" width="629"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">图2： </span>QueryAgent和ERASER的示例。
在每一步，LLM基于先前的步骤生成思考和动作。
基于动作的执行状态（KB和Python）和推理记忆，ERASER检测是否存在错误。
如果未检测到错误，则这一步的观察是在KB上的执行结果。
否则，观察是相应的指导方针。</figcaption>
</figure>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">3.1 </span>概述</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.1">在这项工作中，我们将KBQA建模为一个语义解析任务。我们提出了一种由LLM支持的符号代理QueryAgent，它逐步使用工具构建正式查询并进行逐步自我纠正。QueryAgent的过程可以分为两部分：查询构建和自我纠正（ERASER）。在每一步，QueryAgent首先生成要执行的动作，然后利用环境反馈来识别和区分潜在错误。如果检测到错误，系统会提供定制的指导，以帮助LLMs进行错误纠正。</p>
</div>
<div class="ltx_para" id="S3.SS1.p2">
<p class="ltx_p" id="S3.SS1.p2.1">QueryAgent的可靠性和效率体现在以下几个方面。
对于可靠性：
1）它逐步解决问题，而不是直接输出完整答案。
2）在推理过程中，我们引入了一个纠错过程，即ERASER。
3）ERASER比传统的自我纠正方法更有针对性和精确。
对于效率：
1）我们的top-1候选的高准确性消除了对波束搜索和自一致性的需求。
2）自我纠正减少了沿着错误路径进行无意义推理。
3）我们只在必要时进行自我纠正，并且只将相关指导纳入提示中。</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">3.2 </span>查询构建</h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">与KB互动并逐步构建目标查询，我们利用PyQL <cite class="ltx_cite ltx_citemacro_cite">Huang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib7" title="">2023</a>)</cite>系统地构建工作流程。
PyQL是一个用于知识库查询构建的管理工具集，包括各种工具来将子句合并到最终的可执行查询（<span class="ltx_text ltx_font_italic" id="S3.SS2.p1.1.1">即</span> SPARQL）中，例如添加三元模式、过滤器、聚合等。
由于最终查询可以从一系列PyQL函数转换而来，我们的目标是在多轮交互期间逐步生成这些函数。</p>
</div>
<div class="ltx_para" id="S3.SS2.p2">
<p class="ltx_p" id="S3.SS2.p2.1">如图<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#S3.F2" title="Figure 2 ‣ 3 Method ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_tag">2</span></a>所示，在每一步中，LLM提供其对当前步骤的<span class="ltx_text ltx_font_italic" id="S3.SS2.p2.1.1">思考</span>并建议下一步要采取的<span class="ltx_text ltx_font_italic" id="S3.SS2.p2.1.2">行动</span>。该<span class="ltx_text ltx_font_italic" id="S3.SS2.p2.1.3">行动</span>是一个PyQL函数，我们执行它以获得来自环境的观察<span class="ltx_text ltx_font_italic" id="S3.SS2.p2.1.4">结果</span>。例如，在图<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#S3.F2" title="Figure 2 ‣ 3 Method ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_tag">2</span></a>中的示例中，LLM首先建议获取“tom kilburn”的一跳关系（<span class="ltx_text ltx_font_italic" id="S3.SS2.p2.1.5">思考</span>），并且应在此步骤中调用函数<span class="ltx_text ltx_font_typewriter" id="S3.SS2.p2.1.6">get_relation(tom_kilburn)</span>（<span class="ltx_text ltx_font_italic" id="S3.SS2.p2.1.7">行动</span>）。通过执行此函数，我们可以获取“tom kilburn”周围的关系，用于下一步的<span class="ltx_text ltx_font_italic" id="S3.SS2.p2.1.8">观察</span>。这个过程是迭代重复的。当推理过程结束时，我们执行生成的查询以获得答案。鉴于每个步骤对应一个可执行的查询，我们可以轻松观察当前推理过程的结果，就像人类逐步编写、执行和验证查询一样。</p>
</div>
<div class="ltx_para" id="S3.SS2.p3">
<p class="ltx_p" id="S3.SS2.p3.1">提示由四个部分组成：任务描述、可用函数文档、运行示例和新问题。
首先，我们概述任务和必须遵循的规则。
然后，我们提供所有可用函数的简要文档。
在此之后，
我们展示一个示例问题的详细逐步推理过程。
最后，我们在最后提出需要解决的新问题。</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">3.3 </span>橡皮擦</h3>
<div class="ltx_para" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.1">在本节中，我们提出了一种基于环境反馈的自我校正方法（ERASER）。
ERASER的基本思想是让环境“说话”并区分不同类型的错误。
我们要求系统提供关于其当前状态和遇到的任何错误的反馈。
基于这些反馈，我们试图识别出出现了什么类型的错误，然后提供有针对性和有价值的指导。</p>
</div>
<div class="ltx_para" id="S3.SS3.p2">
<p class="ltx_p" id="S3.SS3.p2.1">反馈主要来自三个环境：知识库、Python解释器和推理内存。
例如，知识库可以提供反馈，比如：执行结果是否为空，推理过程是否以空白节点（CVT）或多个变量结束，查询引擎的错误消息等。
Python解释器可以提供各种无效函数调用的错误消息（<span class="ltx_text ltx_font_italic" id="S3.SS3.p2.1.1">例如</span>，拆包的值不足）。
对于推理内存，我们可以访问包括但不限于已经采取的步骤，已经创建的变量以及先前步骤的执行结果在内的信息。</p>
</div>
<div class="ltx_para" id="S3.SS3.p3">
<p class="ltx_p" id="S3.SS3.p3.1">通过分析上述反馈，我们可以检测到一些错误并确定其原因。
如图<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#S3.F2" title="Figure 2 ‣ 3 Method ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_tag">2</span></a>所示，在第四步中，由于生成的动作参数不足，Python解释器会引发错误。
在第六步中，当添加三元模式约束后，查询引擎会产生一个空结果。
根据推理记忆，我们已经获得了“<span class="ltx_text ltx_font_italic" id="S3.SS3.p3.1.1">?computer</span>”的关系，但所选的关系不是其中任何一个。
很可能在前面的步骤中选择了错误的关系。
这个例子还展示了利用来自不同环境的各种反馈来区分错误的重要性。
例如，系统是否已经获得了头/尾实体的关系可能表明了两种不同的错误原因，但它们在执行中都表现为空结果。
与之前只关注最终答案的方法相比，在中间步骤中获得的丰富环境反馈可以作为检测和区分各种错误的关键观察点。</p>
</div>
<div class="ltx_para" id="S3.SS3.p4">
<p class="ltx_p" id="S3.SS3.p4.1">指导中的ERASER通常是关于错误可能原因和一般建议的一些推测。
示例显示在图<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#S3.F2" title="Figure 2 ‣ 3 Method ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_tag">2</span></a>的右侧。
与一些简单返回原始系统错误消息的代码生成工作<cite class="ltx_cite ltx_citemacro_cite">Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib2" title="">2023</a>)</cite>相比，提示中提供的指导可以被视为一种中间语言。
它使LLM免受直接考虑原始错误的影响，而是专注于更容易理解的指导，最终有助于成功的纠正。
此外，通过将指导纳入推理过程，ERASER无需设计另一个特定的模块或代理来执行自我纠正。</p>
</div>
<div class="ltx_para" id="S3.SS3.p5">
<p class="ltx_p" id="S3.SS3.p5.1">以这种方式，我们只需要弄清楚如何从各种环境反馈中识别潜在错误，然后为每种错误类型提供修改建议。
综上所述，ERASER具有以下优点：
1）<span class="ltx_text ltx_font_bold" id="S3.SS3.p5.1.1">有目的和精确</span>：
ERASER能够检测错误。
对于每个错误，它都提供了与当前情况相关的定制指南。
2）<span class="ltx_text ltx_font_bold" id="S3.SS3.p5.1.2">独立和可扩展</span>：每种错误类型的触发器是独立的。
它为增量开发提供了便利，而不会影响其他问题的结果。
3）<span class="ltx_text ltx_font_bold" id="S3.SS3.p5.1.3">轻量和经济</span>：
仅在检测到错误时才会调用LLM。
纠正提示是一般性指南，而不是冗长的少量示例。</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section"><span class="ltx_tag ltx_tag_section">4 </span>实验</h2>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">4.1 </span>数据集</h3>
<div class="ltx_para" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1">我们在四个KBQA数据集上实验了QueryAgent。
统计数据可以在表<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#S4.T1" title="Table 1 ‣ 4.1 Datasets ‣ 4 Experiment ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_tag">1</span></a>中找到。
对于GrailQA，我们报告dev集的性能以控制预算。
对于其他数据集，我们报告测试集的性能。</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS1.p2">
<p class="ltx_p" id="S4.SS1.p2.1"><span class="ltx_text ltx_font_bold ltx_font_smallcaps" id="S4.SS1.p2.1.1">GrailQA</span> <cite class="ltx_cite ltx_citemacro_cite">Gu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib4" title="">2021</a>)</cite>是一个评估三种泛化级别（<span class="ltx_text ltx_font_italic" id="S4.SS1.p2.1.2">即i.i.d.、组合</span>和<span class="ltx_text ltx_font_italic" id="S4.SS1.p2.1.3">零样本</span>）的大规模复杂数据集</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS1.p3">
<p class="ltx_p" id="S4.SS1.p3.1"><span class="ltx_text ltx_font_bold ltx_font_smallcaps" id="S4.SS1.p3.1.1">GraphQ</span> <cite class="ltx_cite ltx_citemacro_cite">Su et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib17" title="">2016</a>)</cite>是一个特别具有挑战性的数据集，因为它专门关注非独立同分布的泛化。在本文中，我们使用了<cite class="ltx_cite ltx_citemacro_citet">Gu and Su (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib5" title="">2022</a>)</cite>处理过的版本。</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS1.p4">
<p class="ltx_p" id="S4.SS1.p4.1"><span class="ltx_text ltx_font_bold ltx_font_smallcaps" id="S4.SS1.p4.1.1">WebQSP</span> <cite class="ltx_cite ltx_citemacro_cite">Yih et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib23" title="">2016</a>)</cite>是一个简单的KBQA数据集，其中包括来自Google查询日志的问题。它主要测试i.i.d.泛化。</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS1.p5">
<p class="ltx_p" id="S4.SS1.p5.1"><span class="ltx_text ltx_font_bold ltx_font_smallcaps" id="S4.SS1.p5.1.1">MetaQA</span> <cite class="ltx_cite ltx_citemacro_cite">Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib25" title="">2018</a>)</cite>由基于Wiki-Movies KG的1-3跳问题组成。我们在最困难的3跳子集（称为MetaQA-3Hop）上进行实验。</p>
</div>
<figure class="ltx_table" id="S4.T1">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S4.T1.1" style="width:208.1pt;height:139.3pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(23.4pt,-15.6pt) scale(1.28942845896462,1.28942845896462) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S4.T1.1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T1.1.1.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T1.1.1.1.1.1.1">Dataset</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.1.1.1.1.2"><span class="ltx_text ltx_font_bold" id="S4.T1.1.1.1.1.2.1">Training</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.1.1.1.1.3"><span class="ltx_text ltx_font_bold" id="S4.T1.1.1.1.1.3.1">Dev</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.1.1.1.1.4"><span class="ltx_text ltx_font_bold" id="S4.T1.1.1.1.1.4.1">Test</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T1.1.1.2.1">
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.1.2.1.1"><span class="ltx_text ltx_font_smallcaps" id="S4.T1.1.1.2.1.1.1">GrailQA</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.1.2.1.2">44,337</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.1.2.1.3">6,763</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.1.2.1.4">13,231</td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.1.3.2">
<td class="ltx_td ltx_align_center" id="S4.T1.1.1.3.2.1"><span class="ltx_text ltx_font_smallcaps" id="S4.T1.1.1.3.2.1.1">GraphQ</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.1.3.2.2">2,381</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.1.3.2.3">-</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.1.3.2.4">2,395</td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.1.4.3">
<td class="ltx_td ltx_align_center" id="S4.T1.1.1.4.3.1"><span class="ltx_text ltx_font_smallcaps" id="S4.T1.1.1.4.3.1.1">WebQSP</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.1.4.3.2">3,098</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.1.4.3.3">-</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.1.4.3.4">1,639</td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.1.5.4">
<td class="ltx_td ltx_align_center" id="S4.T1.1.1.5.4.1"><span class="ltx_text ltx_font_smallcaps" id="S4.T1.1.1.5.4.1.1">MetaQA-3hop</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.1.5.4.2">114,196</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.1.5.4.3">14,274</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.1.5.4.4">14,274</td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.1.6.5">
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.1.1.6.5.1"><span class="ltx_text ltx_font_smallcaps" id="S4.T1.1.1.6.5.1.1">WikiSQL</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.1.1.6.5.2">56,355</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.1.1.6.5.3">8,421</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.1.1.6.5.4">15,878</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">表1： </span>实验数据集统计。</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">4.2 </span>基线</h3>
<div class="ltx_para" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.1">我们将QueryAgent与微调和少样本KBQA方法进行了比较。
为简单起见，我们主要介绍少样本方法。</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS2.p2">
<p class="ltx_p" id="S4.SS2.p2.1"><span class="ltx_text ltx_font_bold" id="S4.SS2.p2.1.1">KB-BINDER</span> <cite class="ltx_cite ltx_citemacro_cite">Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib9" title="">2023</a>)</cite>
是一种基于ICL的KBQA方法，利用几十个（问题，S表达式）对作为示例。</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS2.p3">
<p class="ltx_p" id="S4.SS2.p3.1"><span class="ltx_text ltx_font_bold" id="S4.SS2.p3.1.1">KB-Coder</span> <cite class="ltx_cite ltx_citemacro_cite">Nie et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib11" title="">2023</a>)</cite> 将s表达式转换为一系列函数调用，从而降低格式错误率。</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS2.p4">
<p class="ltx_p" id="S4.SS2.p4.1"><span class="ltx_text ltx_font_bold" id="S4.SS2.p4.1.1">盘古</span> <cite class="ltx_cite ltx_citemacro_cite">Gu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib3" title="">2023</a>)</cite>是一个在微调和少样本设置上进行实验的通用框架。对于少样本设置，盘古还采用了ICL范式。</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS2.p5">
<p class="ltx_p" id="S4.SS2.p5.1"><span class="ltx_text ltx_font_bold" id="S4.SS2.p5.1.1">AgentBench</span> <cite class="ltx_cite ltx_citemacro_cite">Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib10" title="">2024</a>)</cite> 提出了一种基于代理的基准线，通过将KBQA建模为多轮开放式生成任务。</p>
</div>
<figure class="ltx_table" id="S4.T2">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T2.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T2.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S4.T2.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T2.1.1.1.1.1">Methods</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.2"><span class="ltx_text ltx_font_bold" id="S4.T2.1.1.1.2.1">GrailQA</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.3"><span class="ltx_text ltx_font_bold" id="S4.T2.1.1.1.3.1">GraphQ</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.4"><span class="ltx_text ltx_font_bold" id="S4.T2.1.1.1.4.1">WebQSP</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.5"><span class="ltx_text ltx_font_bold" id="S4.T2.1.1.1.5.1">MetaQA-3Hop</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T2.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.1.2.1.1"><span class="ltx_text ltx_font_italic" id="S4.T2.1.2.1.1.1">fine-tuning</span></th>
<td class="ltx_td ltx_border_t" id="S4.T2.1.2.1.2"></td>
<td class="ltx_td ltx_border_t" id="S4.T2.1.2.1.3"></td>
<td class="ltx_td ltx_border_t" id="S4.T2.1.2.1.4"></td>
<td class="ltx_td ltx_border_t" id="S4.T2.1.2.1.5"></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.3.2.1">ArcaneQA <cite class="ltx_cite ltx_citemacro_cite">Gu and Su (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib5" title="">2022</a>)</cite>
</th>
<td class="ltx_td ltx_align_right" id="S4.T2.1.3.2.2">73.7</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.3.2.3">31.8</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.3.2.4">75.6</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.3.2.5">-</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.4.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.4.3.1">TIARA <cite class="ltx_cite ltx_citemacro_cite">Shu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib16" title="">2022</a>)</cite>
</th>
<td class="ltx_td ltx_align_right" id="S4.T2.1.4.3.2">78.5</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.4.3.3">-</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.4.3.4">76.7</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.4.3.5">-</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.5.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.5.4.1">DecAF <cite class="ltx_cite ltx_citemacro_cite">Yu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib24" title="">2023</a>)</cite>
</th>
<td class="ltx_td ltx_align_right" id="S4.T2.1.5.4.2">81.4</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.5.4.3">-</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.5.4.4">78.8</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.5.4.5">-</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.6.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.6.5.1">Pangu(T5-3B) <cite class="ltx_cite ltx_citemacro_cite">Gu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib3" title="">2023</a>)</cite>
</th>
<td class="ltx_td ltx_align_right" id="S4.T2.1.6.5.2">83.4</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.6.5.3">57.7</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.6.5.4">79.6</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.6.5.5">-</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.7.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.1.7.6.1"><span class="ltx_text ltx_font_italic" id="S4.T2.1.7.6.1.1">few-shot</span></th>
<td class="ltx_td ltx_border_t" id="S4.T2.1.7.6.2"></td>
<td class="ltx_td ltx_border_t" id="S4.T2.1.7.6.3"></td>
<td class="ltx_td ltx_border_t" id="S4.T2.1.7.6.4"></td>
<td class="ltx_td ltx_border_t" id="S4.T2.1.7.6.5"></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.8.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.8.7.1">Pangu <cite class="ltx_cite ltx_citemacro_cite">Gu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib3" title="">2023</a>)</cite>
</th>
<td class="ltx_td ltx_align_right" id="S4.T2.1.8.7.2">53.5</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.8.7.3">35.4</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.8.7.4">48.6</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.8.7.5">-</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.9.8">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.9.8.1">KB-BINDER <cite class="ltx_cite ltx_citemacro_cite">Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib9" title="">2023</a>)</cite>
</th>
<td class="ltx_td ltx_align_right" id="S4.T2.1.9.8.2">50.8</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.9.8.3">34.5</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.9.8.4">56.6</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.9.8.5">96.5</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.10.9">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.10.9.1">KB-Coder <cite class="ltx_cite ltx_citemacro_cite">Nie et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib11" title="">2023</a>)</cite>
</th>
<td class="ltx_td ltx_align_right" id="S4.T2.1.10.9.2">51.7</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.10.9.3">35.8</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.10.9.4">60.5</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.10.9.5">-</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.11.10">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.1.11.10.1"><span class="ltx_text ltx_font_italic" id="S4.T2.1.11.10.1.1">one-shot</span></th>
<td class="ltx_td ltx_border_t" id="S4.T2.1.11.10.2"></td>
<td class="ltx_td ltx_border_t" id="S4.T2.1.11.10.3"></td>
<td class="ltx_td ltx_border_t" id="S4.T2.1.11.10.4"></td>
<td class="ltx_td ltx_border_t" id="S4.T2.1.11.10.5"></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.12.11">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.12.11.1">KB-BINDER <cite class="ltx_cite ltx_citemacro_cite">Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib9" title="">2023</a>)</cite>
</th>
<td class="ltx_td ltx_align_right" id="S4.T2.1.12.11.2">16.8</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.12.11.3">4.8</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.12.11.4">9.0</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.12.11.5">65.3</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.13.12">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.13.12.1">AgentBench <cite class="ltx_cite ltx_citemacro_cite">Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib10" title="">2024</a>)</cite>
</th>
<td class="ltx_td ltx_align_right" id="S4.T2.1.13.12.2">30.5</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.13.12.3">25.1</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.13.12.4">26.4</td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.13.12.5">-</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.14.13">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.14.13.1"><span class="ltx_text ltx_font_bold" id="S4.T2.1.14.13.1.1">Ours</span></th>
<td class="ltx_td ltx_align_right" id="S4.T2.1.14.13.2"><span class="ltx_text ltx_font_bold" id="S4.T2.1.14.13.2.1">60.5</span></td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.14.13.3"><span class="ltx_text ltx_font_bold" id="S4.T2.1.14.13.3.1">50.8</span></td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.14.13.4"><span class="ltx_text ltx_font_bold" id="S4.T2.1.14.13.4.1">63.9</span></td>
<td class="ltx_td ltx_align_right" id="S4.T2.1.14.13.5"><span class="ltx_text ltx_font_bold" id="S4.T2.1.14.13.5.1">98.5</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.15.14">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T2.1.15.14.1">      w/ GPT4</th>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S4.T2.1.15.14.2">66.8</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S4.T2.1.15.14.3">63.0</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S4.T2.1.15.14.4">69.0</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S4.T2.1.15.14.5">99.9</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">表2： </span>GrailQA，GraphQ，WebQSP和MetaQA-3Hop的总体结果。
所有数据集都以F1进行评估。
对于少样本设置，Pangu对所有数据集使用100-shot。
KB-BINDER和KB-Coder对GrailQA使用40-shot，对GraphQ和WebQSP使用100-shot。KB-BINDER对MetaQA-3Hop使用5-shot。</figcaption>
</figure>
<figure class="ltx_table" id="S4.T3">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T3.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T3.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S4.T3.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T3.1.1.1.1.1">Method</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="S4.T3.1.1.1.2"><span class="ltx_text ltx_font_bold" id="S4.T3.1.1.1.2.1">GrailQA</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="S4.T3.1.1.1.3"><span class="ltx_text ltx_font_bold" id="S4.T3.1.1.1.3.1">GraphQ</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T3.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T3.1.2.1.1"><span class="ltx_text ltx_font_bold" id="S4.T3.1.2.1.1.1">Ours</span></th>
<td class="ltx_td ltx_align_right ltx_border_t" id="S4.T3.1.2.1.2"><span class="ltx_text ltx_font_bold" id="S4.T3.1.2.1.2.1">60.5</span></td>
<td class="ltx_td ltx_align_right ltx_border_t" id="S4.T3.1.2.1.3"><span class="ltx_text ltx_font_bold" id="S4.T3.1.2.1.3.1">50.8</span></td>
</tr>
<tr class="ltx_tr" id="S4.T3.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T3.1.3.2.1">    w/o ERASER</th>
<td class="ltx_td ltx_align_right" id="S4.T3.1.3.2.2">43.7</td>
<td class="ltx_td ltx_align_right" id="S4.T3.1.3.2.3">35.3</td>
</tr>
<tr class="ltx_tr" id="S4.T3.1.4.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T3.1.4.3.1">    w/ zero-shot SC</th>
<td class="ltx_td ltx_align_right" id="S4.T3.1.4.3.2">38.5</td>
<td class="ltx_td ltx_align_right" id="S4.T3.1.4.3.3">30.2</td>
</tr>
<tr class="ltx_tr" id="S4.T3.1.5.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T3.1.5.4.1">    w/ few-shot SC</th>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S4.T3.1.5.4.2">48.0</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S4.T3.1.5.4.3">40.1</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">表3： </span>ERASER的消融研究以及与其他方法的比较。
零射击SC表示DIN-SQL的“通用”自我校正提示<cite class="ltx_cite ltx_citemacro_cite">Pourreza and Rafiei (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib15" title="">2023</a>)</cite>。
少量射击SC表示Self-Debug的“解释反馈提示”<cite class="ltx_cite ltx_citemacro_cite">Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib2" title="">2023</a>)</cite>。
我们在我们的任务中遵循并实现他们的想法。</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">4.3 </span>实验设置</h3>
<div class="ltx_para" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.1">我们默认使用<span class="ltx_text ltx_font_typewriter" id="S4.SS3.p1.1.1">gpt-3.5-turbo</span> <cite class="ltx_cite ltx_citemacro_cite">OpenAI (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib12" title="">2022</a>)</cite>进行实验。所有数据集都使用F1作为评估指标。对于具有相同设置的基准线，我们报告其原始论文中的性能。KB-BINDER使用已被弃用的<span class="ltx_text ltx_font_typewriter" id="S4.SS3.p1.1.2">Codex</span>。为了公平比较，我们使用<span class="ltx_text ltx_font_typewriter" id="S4.SS3.p1.1.3">gpt-3.5-turbo</span>复现了KB-Coder的性能。对于KB-BINDER和KB-Coder，我们比较了没有相似性检索的设置，因为这不是一个严格的少样本设置，需要能够访问整个标注的训练集。AgentBench报告了混合子集的性能并使用黄金链接结果。我们使用与我们相同的实体链接结果复现了AgentBench。我们还基于他们的公共代码实现了KB-BINDER的一次性设置。</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS4">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">4.4 </span>主要结果</h3>
<div class="ltx_para" id="S4.SS4.p1">
<p class="ltx_p" id="S4.SS4.p1.1">如表<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#S4.T2" title="Table 2 ‣ 4.2 Baselines ‣ 4 Experiment ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_tag">2</span></a>所示，仅用一个例子，我们的方法在所有四个数据集上表现优于所有需要多达100个注释的少样本方法。
对于GrailQA和GraphQ，我们的方法显著超过了最好的少样本方法7.0和15.0个点。
在WebQSP上，QueryAgent略超出了100-shot方法3.4个点。
考虑到数据集的固有特性，这是可以预料的。
由于所有WebQSP的问题都在I.I.D.设置下，并且这个数据集相对较小，少样本方法有更多的机会在提示中遇到类似的问题。
相比之下，大多数GrailQA的问题是构成性的和零样本问题，而100%的GraphQ是构成性问题。
少样本方法在这种问题类型上失去了这种优势，这可以合理解释为什么我们的方法在GrailQA和GraphQ上表现出更明显的优势。
此外，所有少样本方法都包括束搜索或自一致性以进一步提升性能。
这也意味着，如果我们也选择更昂贵的设置，我们的方法仍有改进的空间。</p>
</div>
<div class="ltx_para" id="S4.SS4.p2">
<p class="ltx_p" id="S4.SS4.p2.1">与一次性方法相比，QueryAgent的性能大约是Agentbench的两倍，提升了基于代理的技术和一次性KBQA的水平。
我们还复现了KB-BINDER的一次性结果。
性能的显著下降暴露出ICL方法在示例数量方面的一些限制。</p>
</div>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section"><span class="ltx_tag ltx_tag_section">5 </span>详细分析</h2>
<div class="ltx_para" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">为了更深入地了解QueryAgent的强劲表现，我们进行了一些深入分析。</p>
</div>
<figure class="ltx_table" id="S5.T4">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S5.T4.1" style="width:433.6pt;height:121.3pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(56.0pt,-15.7pt) scale(1.34792184480703,1.34792184480703) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S5.T4.1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S5.T4.1.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S5.T4.1.1.1.1.1" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.1.1.1.1">Methods</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_tt" colspan="3" id="S5.T4.1.1.1.1.2">
<span class="ltx_text ltx_font_bold" id="S5.T4.1.1.1.1.2.1">GrailQA</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_tt" colspan="3" id="S5.T4.1.1.1.1.3">
<span class="ltx_text ltx_font_bold" id="S5.T4.1.1.1.1.3.1">GraphQ</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="3" id="S5.T4.1.1.1.1.4">
<span class="ltx_text ltx_font_bold" id="S5.T4.1.1.1.1.4.1">WebQSP</span></th>
</tr>
<tr class="ltx_tr" id="S5.T4.1.1.2.2">
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_t" id="S5.T4.1.1.2.2.1"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.2.2.1.1">TPQ</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_t" id="S5.T4.1.1.2.2.2"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.2.2.2.1">QPQ</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S5.T4.1.1.2.2.3"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.2.2.3.1">CPQ</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_t" id="S5.T4.1.1.2.2.4"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.2.2.4.1">TPQ</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_t" id="S5.T4.1.1.2.2.5"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.2.2.5.1">QPQ</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S5.T4.1.1.2.2.6"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.2.2.6.1">CPQ</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_t" id="S5.T4.1.1.2.2.7"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.2.2.7.1">TPQ</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_t" id="S5.T4.1.1.2.2.8"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.2.2.8.1">QPQ</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_t" id="S5.T4.1.1.2.2.9"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.2.2.9.1">CPQ</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S5.T4.1.1.3.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T4.1.1.3.1.1">KB-BINDER</th>
<td class="ltx_td ltx_align_right ltx_border_t" id="S5.T4.1.1.3.1.2">51.2 s</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="S5.T4.1.1.3.1.3">3297.7</td>
<td class="ltx_td ltx_align_right ltx_border_r ltx_border_t" id="S5.T4.1.1.3.1.4"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.3.1.4.1">$ 0.010</span></td>
<td class="ltx_td ltx_align_right ltx_border_t" id="S5.T4.1.1.3.1.5">84.0 s</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="S5.T4.1.1.3.1.6">2113.8</td>
<td class="ltx_td ltx_align_right ltx_border_r ltx_border_t" id="S5.T4.1.1.3.1.7">$ 0.024</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="S5.T4.1.1.3.1.8">138.6 s</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="S5.T4.1.1.3.1.9">8145.1</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="S5.T4.1.1.3.1.10">$ 0.017</td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.1.4.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T4.1.1.4.2.1">AgentBench</th>
<td class="ltx_td ltx_align_right" id="S5.T4.1.1.4.2.2">40.0 s</td>
<td class="ltx_td ltx_align_right" id="S5.T4.1.1.4.2.3">7.4</td>
<td class="ltx_td ltx_align_right ltx_border_r" id="S5.T4.1.1.4.2.4">$ 0.034</td>
<td class="ltx_td ltx_align_right" id="S5.T4.1.1.4.2.5">65.1 s</td>
<td class="ltx_td ltx_align_right" id="S5.T4.1.1.4.2.6">7.2</td>
<td class="ltx_td ltx_align_right ltx_border_r" id="S5.T4.1.1.4.2.7">$ 0.035</td>
<td class="ltx_td ltx_align_right" id="S5.T4.1.1.4.2.8">70.4 s</td>
<td class="ltx_td ltx_align_right" id="S5.T4.1.1.4.2.9">7.2</td>
<td class="ltx_td ltx_align_right" id="S5.T4.1.1.4.2.10">$ 0.038</td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.1.5.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb ltx_border_t" id="S5.T4.1.1.5.3.1"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.5.3.1.1">Ours</span></th>
<td class="ltx_td ltx_align_right ltx_border_bb ltx_border_t" id="S5.T4.1.1.5.3.2"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.5.3.2.1">16.6 s</span></td>
<td class="ltx_td ltx_align_right ltx_border_bb ltx_border_t" id="S5.T4.1.1.5.3.3"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.5.3.3.1">5.2</span></td>
<td class="ltx_td ltx_align_right ltx_border_bb ltx_border_r ltx_border_t" id="S5.T4.1.1.5.3.4">$0.019</td>
<td class="ltx_td ltx_align_right ltx_border_bb ltx_border_t" id="S5.T4.1.1.5.3.5"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.5.3.5.1">15.3 s</span></td>
<td class="ltx_td ltx_align_right ltx_border_bb ltx_border_t" id="S5.T4.1.1.5.3.6"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.5.3.6.1">6.2</span></td>
<td class="ltx_td ltx_align_right ltx_border_bb ltx_border_r ltx_border_t" id="S5.T4.1.1.5.3.7"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.5.3.7.1">$ 0.021</span></td>
<td class="ltx_td ltx_align_right ltx_border_bb ltx_border_t" id="S5.T4.1.1.5.3.8"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.5.3.8.1">12.6 s</span></td>
<td class="ltx_td ltx_align_right ltx_border_bb ltx_border_t" id="S5.T4.1.1.5.3.9"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.5.3.9.1">4.7</span></td>
<td class="ltx_td ltx_align_right ltx_border_bb ltx_border_t" id="S5.T4.1.1.5.3.10"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.5.3.10.1">$ 0.014</span></td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">表4：</span>与KB-BINDER和AgentBench的效率比较。 TPQ，QPQ和CPQ分别代表每个问题的时间成本，SPARQL查询次数和<span class="ltx_text ltx_font_typewriter" id="S5.T4.3.1">gpt-3.5-turbo</span>调用成本。</figcaption>
</figure>
<section class="ltx_subsection" id="S5.SS1">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">5.1 </span>消融研究</h3>
<div class="ltx_para" id="S5.SS1.p1">
<p class="ltx_p" id="S5.SS1.p1.1">在本节中，我们分析了ERASER如何有助于可靠推理，并将其与其他自我修正方法进行了比较。结果显示在表<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#S4.T3" title="Table 3 ‣ 4.2 Baselines ‣ 4 Experiment ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_tag">3</span></a>中。 ERASER在GrailQA和GraphQ上分别提高了16.8和15.5个点，证明了我们方法的有效性。对于基线方法，零射击SC未能进一步提升性能，甚至表现出负增益。少射击方法已经取得了一些改进，但并不那么显著，而且它的提示比ERASER要长得多。这是预期的，因为少射击SC只能涵盖有限的情景，而LLM需要弄清楚提示中的哪部分与当前情况有关。我们还手动分析了200个GrailQA的问题，以调查ERASER如何影响推理过程。我们发现43%的问题在其推理过程中利用了ERASER。其中，30%的问题完全得到了纠正。鉴于我们的错误检测策略是保守的，每个触发ERASER的步骤在推理过程中确实被发现包含错误。</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS2">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">5.2 </span>效率分析</h3>
<div class="ltx_para" id="S5.SS2.p1">
<p class="ltx_p" id="S5.SS2.p1.1">在这一部分，我们评估了运行效率。我们通过比较使用不同范式的KB-BINDER和与我们类似的AgentBench进行了水平和垂直比较。我们分析了每个问题的时间成本（TPQ），每个问题的查询次数（QPQ）和每个问题的LLM调用成本（CPQ）。所有测试都在相同的网络环境中进行，每个实验都是独立运行的。</p>
</div>
<div class="ltx_para" id="S5.SS2.p2">
<p class="ltx_p" id="S5.SS2.p2.2">如表<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#S5.T4" title="Table 4 ‣ 5 Detailed Analysis ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_tag">4</span></a>所示，与KB-BINDER相比，我们的方法在TPQ和QPQ方面具有压倒性优势，而在GrailQA上CPQ略高。
这一结果符合我们的预期。KB-BINDER需要逐步进行波束搜索以收集大量候选项，然后逐个执行它们以找到第一个可执行的查询，这需要查询大量的SPARQLs。
此外，KB-BINDER使用自洽性，重复这种范式<math alttext="K" class="ltx_Math" display="inline" id="S5.SS2.p2.1.m1.1"><semantics id="S5.SS2.p2.1.m1.1a"><mi id="S5.SS2.p2.1.m1.1.1" xref="S5.SS2.p2.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.1.m1.1b"><ci id="S5.SS2.p2.1.m1.1.1.cmml" xref="S5.SS2.p2.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.1.m1.1c">K</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.p2.1.m1.1d">italic_K</annotation></semantics></math>次以提高性能，导致额外成本<math alttext="(K-1)\times" class="ltx_math_unparsed" display="inline" id="S5.SS2.p2.2.m2.1"><semantics id="S5.SS2.p2.2.m2.1a"><mrow id="S5.SS2.p2.2.m2.1b"><mrow id="S5.SS2.p2.2.m2.1.1"><mo id="S5.SS2.p2.2.m2.1.1.1" stretchy="false">(</mo><mi id="S5.SS2.p2.2.m2.1.1.2">K</mi><mo id="S5.SS2.p2.2.m2.1.1.3">−</mo><mn id="S5.SS2.p2.2.m2.1.1.4">1</mn><mo id="S5.SS2.p2.2.m2.1.1.5" rspace="0.055em" stretchy="false">)</mo></mrow><mo id="S5.SS2.p2.2.m2.1.2">×</mo></mrow><annotation encoding="application/x-tex" id="S5.SS2.p2.2.m2.1c">(K-1)\times</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.p2.2.m2.1d">( italic_K - 1 ) ×</annotation></semantics></math>。
在某种程度上，这也导致了更长的运行时间。
另一个值得注意的是，更多的尝试也意味着最高排名候选的准确性更低，低质量候选的比例更高。
相比之下，我们的方法一次只选择一个最高排名的候选项，这意味着方法需要在每一步具有高精度。
然而，即使在如此极端的约束条件下，我们的方法仍然优于其他方法。</p>
</div>
<div class="ltx_para" id="S5.SS2.p3">
<p class="ltx_p" id="S5.SS2.p3.1">在CPQ方面，与KB-BINDER相比，我们的方法在LLM调用方面产生了稍高的成本。我们的方法是一个逐步推理的过程，虽然它有许多优点，但我们也承认它有一个不可避免的问题，即需要多次请求LLM。然而，另一方面，KB-BINDER需要连接许多示例，这也面临着具有长提示的挑战。事实上，在100-shot设置上，使用KB-BINDER的CPQ已经超过了我们方法的CPQ。</p>
</div>
<div class="ltx_para" id="S5.SS2.p4">
<p class="ltx_p" id="S5.SS2.p4.1">另一方面，与AgentBench相比，我们的方法在所有三个标准上也超过了它。
值得注意的是，与AgentBench相比，我们的方法不仅更快更具成本效益，而且在QA性能方面也实现了近乎两倍的提升。
乍一看，ERASER的引入对效率评估来说是一个负面因素，因为提示变得比常规推理过程更长。
然而，从不同的角度来看，及时和准确的错误纠正可以防止系统进一步偏离错误方向，并减少无意义推理过程带来的开销。
因此，在一定程度上，可靠的推理过程最终有助于实现高效的推理。
此外，通过仅在必要时进行更正并区分不同类型，我们成功地将ERASER的成本最小化。</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS3">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">5.3 </span>泛化能力</h3>
<div class="ltx_para" id="S5.SS3.p1">
<p class="ltx_p" id="S5.SS3.p1.1">在这一部分，我们从定性分析和实验比较中分析了我们方法和基于ICL的方法的泛化能力。</p>
</div>
<div class="ltx_para" id="S5.SS3.p2">
<p class="ltx_p" id="S5.SS3.p2.1">从方法论的角度来看，
我们的方法使用原子符号工具逐步解决问题。
通过将问题分解为多个推理步骤，我们弥合了不同问题和数据集之间的语义差距，因为所有问题都可以用这些有限的工具来表示。
然而，这些步骤的组合可能是无数的，对组合泛化提出了挑战。
基于ICL的方法一次性学习和生成完整的查询，直接面对和承担了显著更大的搜索空间。</p>
</div>
<div class="ltx_para" id="S5.SS3.p3">
<p class="ltx_p" id="S5.SS3.p3.1">从实验的角度来看，KB-BINDER对提示中是否出现类似的例子非常敏感。如果在提示中检索到最相似的问题作为例子，KB-BINDER在WebQSP（100% i.i.d.）上可以达到20分的提高，但在GraphQ（100%非i.i.d.）上会产生负面影响。相比之下，我们的方法对所有问题使用相同的例子。另一个观察结果是，数据集中非i.i.d.问题的比例越高，我们的方法超过基于ICL的方法的程度就越大。与GrailQA（75%非i.i.d.）相比，QueryAgent在GraphQ（100%非i.i.d.）上表现出更大的改进。这也可以作为QueryAgent在无关例子上具有更好泛化能力的证据。</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS4">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">5.4 </span>转移实验</h3>
<figure class="ltx_table" id="S5.T5">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S5.T5.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S5.T5.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S5.T5.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S5.T5.1.1.1.1.1">Methods</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="S5.T5.1.1.1.2"><span class="ltx_text ltx_font_bold" id="S5.T5.1.1.1.2.1">WikiSQL</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S5.T5.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T5.1.2.1.1"><span class="ltx_text ltx_font_italic" id="S5.T5.1.2.1.1.1">few-shot(32 shot)</span></th>
<td class="ltx_td ltx_border_t" id="S5.T5.1.2.1.2"></td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T5.1.3.2.1">Davinci-003</th>
<td class="ltx_td ltx_align_right" id="S5.T5.1.3.2.2">49.1</td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.4.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T5.1.4.3.1">ChatGPT</th>
<td class="ltx_td ltx_align_right" id="S5.T5.1.4.3.2">51.6</td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.5.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T5.1.5.4.1">StructGPT(Davinci-003)</th>
<td class="ltx_td ltx_align_right" id="S5.T5.1.5.4.2">64.6</td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.6.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T5.1.6.5.1">StructGPT(ChatGPT)</th>
<td class="ltx_td ltx_align_right" id="S5.T5.1.6.5.2">65.6</td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.7.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T5.1.7.6.1"><span class="ltx_text ltx_font_italic" id="S5.T5.1.7.6.1.1">one-shot</span></th>
<td class="ltx_td ltx_border_t" id="S5.T5.1.7.6.2"></td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.8.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T5.1.8.7.1">AgentBench</th>
<td class="ltx_td ltx_align_right" id="S5.T5.1.8.7.2">57.6</td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.9.8">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T5.1.9.8.1"><span class="ltx_text ltx_font_bold" id="S5.T5.1.9.8.1.1">Ours</span></th>
<td class="ltx_td ltx_align_right" id="S5.T5.1.9.8.2"><span class="ltx_text ltx_font_bold" id="S5.T5.1.9.8.2.1">72.5</span></td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.10.9">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S5.T5.1.10.9.1">    w/o ERASER</th>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S5.T5.1.10.9.2">67.0</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">表5： </span>QueryAgent在WikiSQL上的结果。我们评估指称准确性。</figcaption>
</figure>
<div class="ltx_para" id="S5.SS4.p1">
<p class="ltx_p" id="S5.SS4.p1.1">在前面的章节中，我们选择KBQA作为实例化QueryAgent和ERASER的代表性实验平台。
为了说明我们推理框架和ERASER的多功能性，在本节中，我们进行另外两个实验：
1）我们在另一个语义解析任务Text2SQL上实现QueryAgent框架。
2）我们将ERASER调整到AgentBench。</p>
</div>
<div class="ltx_para" id="S5.SS4.p2">
<p class="ltx_p" id="S5.SS4.p2.1">我们选择WikiSQL <cite class="ltx_cite ltx_citemacro_cite">Zhong et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib26" title="">2017</a>)</cite>的测试数据集作为实验数据集。为了从数据库环境中获得执行反馈，我们实现了一个SQL版本的PyQL来帮助LLM访问数据库，并提供工具来构建SQL查询。我们将我们的方法与StructGPT <cite class="ltx_cite ltx_citemacro_cite">Jiang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib8" title="">2023</a>)</cite>进行了比较。Dacinci-003和ChatGPT的基准结果也来自StructGPT。我们的方法在32个示例中优于少样本方法。此外，ERASER对性能贡献了7.6%，表明我们的自我修正方法具有泛化能力。</p>
</div>
<div class="ltx_para" id="S5.SS4.p3">
<p class="ltx_p" id="S5.SS4.p3.1">另一个实验（即AgentBench + ERASER）是为了进一步验证ERASER能够增强现有的基于代理的KBQA系统。
表<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#S5.T6" title="Table 6 ‣ 5.4 Transfer Experiment ‣ 5 Detailed Analysis ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_tag">6</span></a>显示ERASER进一步提高了AgentBench在GrailQA和GraphQ上的表现8.0和10.5分。
通过整合ERASER，我们将另一种方法的性能提升到了一个新水平，突显了ERASER的多功能性和即插即用的特性。</p>
</div>
<figure class="ltx_table" id="S5.T6">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S5.T6.1" style="width:208.1pt;height:61.3pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(12.4pt,-3.7pt) scale(1.13540562888963,1.13540562888963) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S5.T6.1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S5.T6.1.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S5.T6.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S5.T6.1.1.1.1.1.1">Methods</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="S5.T6.1.1.1.1.2"><span class="ltx_text ltx_font_bold" id="S5.T6.1.1.1.1.2.1">GrailQA</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="S5.T6.1.1.1.1.3"><span class="ltx_text ltx_font_bold" id="S5.T6.1.1.1.1.3.1">GraphQ</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="S5.T6.1.1.1.1.4"><span class="ltx_text ltx_font_bold" id="S5.T6.1.1.1.1.4.1">WebQSP</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S5.T6.1.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T6.1.1.2.1.1">AgentBench</th>
<td class="ltx_td ltx_align_right ltx_border_t" id="S5.T6.1.1.2.1.2">30.5</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="S5.T6.1.1.2.1.3">25.1</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="S5.T6.1.1.2.1.4">26.4</td>
</tr>
<tr class="ltx_tr" id="S5.T6.1.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S5.T6.1.1.3.2.1">    w ERASER</th>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S5.T6.1.1.3.2.2"><span class="ltx_text ltx_font_bold" id="S5.T6.1.1.3.2.2.1">38.5</span></td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S5.T6.1.1.3.2.3"><span class="ltx_text ltx_font_bold" id="S5.T6.1.1.3.2.3.1">35.6</span></td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S5.T6.1.1.3.2.4"><span class="ltx_text ltx_font_bold" id="S5.T6.1.1.3.2.4.1">32.0</span></td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">表6： </span>AgentBench与ERASER的性能。</figcaption>
</figure>
</section>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section"><span class="ltx_tag ltx_tag_section">6 </span>结论</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">在本文中，我们提出了一个可靠高效的框架QueryAgent, 该框架使用工具逐步构建目标查询，实现逐步自我纠正。我们还介绍了一种称为ERASER的新型自我纠正方法。它利用丰富的环境反馈，实现选择性和差异化的自我纠正，与传统方法不同，传统方法仅使用最终结果对每个带有相同提示的输出进行纠正。实验结果表明，QueryAgent在四个KBQA数据集上仅使用单个示例显著优于所有现有的少样本方法，特别是在GrailQA(+7.0)和GraphQ(+15.0)上表现出色。此外，QueryAgent在效率方面也表现出优势，解决速度更快，资源利用更低。与基于ICL的方法相比，我们的方法将运行时间和查询成本降低了几十倍，而与基于代理的方法相比，它将时间和API调用成本降低了一半以上。我们还展示了QueryAgent和ERASER的多功能性，通过在Text2SQL数据集上对其进行评估，并在另一个系统（AgentBench）上应用ERASER。QueryAgent优于以前的少样本方法，ERASER进一步提升了AgentBench的性能。</p>
</div>
</section>
<section class="ltx_section" id="Sx1">
<h2 class="ltx_title ltx_title_section">限制</h2>
<div class="ltx_para" id="Sx1.p1">
<p class="ltx_p" id="Sx1.p1.1">在这里，我们想讨论我们方法的一些局限性。
首先，各种反馈是检测和区分不同错误的基础。
如果反馈不可用或过于简化，比如只提供最终答案，那么就没有足够的信息来自信地进行错误检测和区分各种错误类型。
因此，ERASER在端到端方法或应用于过于简单的环境时可能受益有限。
另一个局限性是，虽然逐步解决被广泛认为是解决复杂任务的一种有前途的方式，但它不可避免地导致了冗长提示的问题。
通过优化历史编码和提示工程，成本可以进一步最小化。然而，这些工程技术并不是本研究的主要焦点。</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">参考文献</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Brown et al. (2020)</span>
<span class="ltx_bibblock">
Tom Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, Jared D Kaplan, Prafulla Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda Askell, Sandhini Agarwal, Ariel Herbert-Voss, Gretchen Krueger, Tom Henighan, Rewon Child, Aditya Ramesh, Daniel Ziegler, Jeffrey Wu, Clemens Winter, Chris Hesse, Mark Chen, Eric Sigler, Mateusz Litwin, Scott Gray, Benjamin Chess, Jack Clark, Christopher Berner, Sam McCandlish, Alec Radford, Ilya Sutskever, and Dario Amodei. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://proceedings.neurips.cc/paper_files/paper/2020/file/1457c0d6bfcb4967418bfb8ac142f64a-Paper.pdf" title="">Language models are few-shot learners</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">Advances in Neural Information Processing Systems</em>, volume 33, pages 1877–1901. Curran Associates, Inc.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chen et al. (2023)</span>
<span class="ltx_bibblock">
Xinyun Chen, Maxwell Lin, Nathanael Schärli, and Denny Zhou. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2304.05128" title="">Teaching large language models to self-debug</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gu et al. (2023)</span>
<span class="ltx_bibblock">
Yu Gu, Xiang Deng, and Yu Su. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/2023.acl-long.270" title="">Don’t generate, discriminate: A proposal for grounding language models to real-world environments</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">Proceedings of the 61st Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 4928–4949, Toronto, Canada. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gu et al. (2021)</span>
<span class="ltx_bibblock">
Yu Gu, Sue Kase, Michelle Vanni, Brian Sadler, Percy Liang, Xifeng Yan, and Yu Su. 2021.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1145/3442381.3449992" title="">Beyond I.I.D.: Three levels of generalization for question answering on knowledge bases</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">The Web Conference 2021 - Proceedings of the World Wide Web Conference, WWW 2021</em>, 2021:3477–3488.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gu and Su (2022)</span>
<span class="ltx_bibblock">
Yu Gu and Yu Su. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/2022.coling-1.148" title="">ArcaneQA: Dynamic program induction and contextualized encoding for knowledge base question answering</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">Proceedings of the 29th International Conference on Computational Linguistics</em>, pages 1718–1731, Gyeongju, Republic of Korea. International Committee on Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Huang et al. (2024)</span>
<span class="ltx_bibblock">
Jie Huang, Xinyun Chen, Swaroop Mishra, Huaixiu Steven Zheng, Adams Wei Yu, Xinying Song, and Denny Zhou. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://openreview.net/forum?id=IkmD3fKBPQ" title="">Large language models cannot self-correct reasoning yet</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">The Twelfth International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Huang et al. (2023)</span>
<span class="ltx_bibblock">
Xiang Huang, Sitao Cheng, Yuheng Bao, Shanshan Huang, and Yuzhong Qu. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.emnlp-main.633" title="">MarkQA: A large scale KBQA dataset with numerical reasoning</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">Proceedings of the 2023 Conference on Empirical Methods in Natural Language Processing</em>, pages 10241–10259, Singapore. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2023)</span>
<span class="ltx_bibblock">
Jinhao Jiang, Kun Zhou, Zican Dong, Keming Ye, Xin Zhao, and Ji-Rong Wen. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.emnlp-main.574" title="">StructGPT: A general framework for large language model to reason over structured data</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">Proceedings of the 2023 Conference on Empirical Methods in Natural Language Processing</em>, pages 9237–9251, Singapore. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2023)</span>
<span class="ltx_bibblock">
Tianle Li, Xueguang Ma, Alex Zhuang, Yu Gu, Yu Su, and Wenhu Chen. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.acl-long.385" title="">Few-shot in-context learning on knowledge base question answering</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">Proceedings of the 61st Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 6966–6980, Toronto, Canada. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu et al. (2024)</span>
<span class="ltx_bibblock">
Xiao Liu, Hao Yu, Hanchen Zhang, Yifan Xu, Xuanyu Lei, Hanyu Lai, Yu Gu, Hangliang Ding, Kaiwen Men, Kejuan Yang, Shudan Zhang, Xiang Deng, Aohan Zeng, Zhengxiao Du, Chenhui Zhang, Sheng Shen, Tianjun Zhang, Yu Su, Huan Sun, Minlie Huang, Yuxiao Dong, and Jie Tang. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2308.03688" title="">Agentbench: Evaluating LLMs as agents</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">The Twelfth International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Nie et al. (2023)</span>
<span class="ltx_bibblock">
Zhijie Nie, Richong Zhang, Zhongyuan Wang, and Xudong Liu. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2309.04695" title="">Code-style in-context learning for knowledge-based question answering</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OpenAI (2022)</span>
<span class="ltx_bibblock">
OpenAI. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://openai.com/blog/chatgpt" title="">Introducing chatgpt</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OpenAI (2023)</span>
<span class="ltx_bibblock">
OpenAI. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2303.08774" title="">GPT-4 Technical Report</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Pan et al. (2023)</span>
<span class="ltx_bibblock">
Liangming Pan, Michael Saxon, Wenda Xu, Deepak Nathani, Xinyi Wang, and William Yang Wang. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2308.03188" title="">Automatically correcting large language models: Surveying the landscape of diverse self-correction strategies</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Pourreza and Rafiei (2023)</span>
<span class="ltx_bibblock">
Mohammadreza Pourreza and Davood Rafiei. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2304.11015" title="">DIN-SQL: Decomposed in-context learning of text-to-SQL with self-correction</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">Thirty-seventh Conference on Neural Information Processing Systems</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shu et al. (2022)</span>
<span class="ltx_bibblock">
Yiheng Shu, Zhiwei Yu, Yuhan Li, Börje Karlsson, Tingting Ma, Yuzhong Qu, and Chin-Yew Lin. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2022.emnlp-main.555" title="">TIARA: Multi-grained retrieval for robust question answering over large knowledge base</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">Proceedings of the 2022 Conference on Empirical Methods in Natural Language Processing</em>, pages 8108–8121, Abu Dhabi, United Arab Emirates. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Su et al. (2016)</span>
<span class="ltx_bibblock">
Yu Su, Huan Sun, Brian Sadler, Mudhakar Srivatsa, Izzeddin Gür, Zenghui Yan, and Xifeng Yan. 2016.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/D16-1054" title="">On generating characteristic-rich question sets for QA evaluation</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">Empirical Methods in Natural Language Processing (EMNLP)</em>, Austin, Texas, USA. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sun et al. (2024)</span>
<span class="ltx_bibblock">
Jiashuo Sun, Chengjin Xu, Lumingyuan Tang, Saizhuo Wang, Chen Lin, Yeyun Gong, Lionel Ni, Heung-Yeung Shum, and Jian Guo. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://openreview.net/forum?id=nnVO1PvbTv" title="">Think-on-graph: Deep and responsible reasoning of large language model on knowledge graph</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">The Twelfth International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang and Li (2023)</span>
<span class="ltx_bibblock">
Danqing Wang and Lei Li. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/2023.emnlp-main.659.pdf" title="">Learning from mistakes via cooperative study assistant for large language models</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">Proceedings of the 2023 Conference on Empirical Methods in Natural Language Processing</em>, pages 10667–10685.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2023)</span>
<span class="ltx_bibblock">
Xuezhi Wang, Jason Wei, Dale Schuurmans, Quoc V Le, Ed H. Chi, Sharan Narang, Aakanksha Chowdhery, and Denny Zhou. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2203.11171" title="">Self-consistency improves chain of thought reasoning in language models</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">The Eleventh International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wei et al. (2022)</span>
<span class="ltx_bibblock">
Jason Wei, Xuezhi Wang, Dale Schuurmans, Maarten Bosma, Fei Xia, Ed Chi, Quoc V Le, Denny Zhou, et al. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2201.11903" title="">Chain-of-thought prompting elicits reasoning in large language models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">Advances in Neural Information Processing Systems</em>, 35:24824–24837.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yao et al. (2023)</span>
<span class="ltx_bibblock">
Shunyu Yao, Jeffrey Zhao, Dian Yu, Nan Du, Izhak Shafran, Karthik R Narasimhan, and Yuan Cao. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://openreview.net/forum?id=WE_vluYUL-X" title="">React: Synergizing reasoning and acting in language models</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">The Eleventh International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yih et al. (2016)</span>
<span class="ltx_bibblock">
Wen-tau Yih, Matthew Richardson, Chris Meek, Ming-Wei Chang, and Jina Suh. 2016.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/P16-2033" title="">The value of semantic parse labeling for knowledge base question answering</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">Proceedings of the 54th Annual Meeting of the Association for Computational Linguistics (Volume 2: Short Papers)</em>, pages 201–206, Berlin, Germany. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yu et al. (2023)</span>
<span class="ltx_bibblock">
Donghan Yu, Sheng Zhang, Patrick Ng, Henghui Zhu, Alexander Hanbo Li, Jun Wang, Yiqun Hu, William Yang Wang, Zhiguo Wang, and Bing Xiang. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2210.00063" title="">DecAF: Joint decoding of answers and logical forms for question answering over knowledge bases</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">The Eleventh International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2018)</span>
<span class="ltx_bibblock">
Yuyu Zhang, Hanjun Dai, Zornitsa Kozareva, Alexander Smola, and Le Song. 2018.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://ojs.aaai.org/index.php/AAAI/article/view/12057" title="">Variational reasoning for question answering with knowledge graph</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">Proceedings of the AAAI conference on artificial intelligence</em>, volume 32.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhong et al. (2017)</span>
<span class="ltx_bibblock">
Victor Zhong, Caiming Xiong, and Richard Socher. 2017.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/1709.00103" title="">Seq2sql: Generating structured queries from natural language using reinforcement learning</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">CoRR</em>, abs/1709.00103.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhou et al. (2023)</span>
<span class="ltx_bibblock">
Denny Zhou, Nathanael Schärli, Le Hou, Jason Wei, Nathan Scales, Xuezhi Wang, Dale Schuurmans, Claire Cui, Olivier Bousquet, Quoc V Le, and Ed H. Chi. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2205.10625" title="">Least-to-most prompting enables complex reasoning in large language models</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">The Eleventh International Conference on Learning Representations</em>.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<section class="ltx_appendix" id="A1">
<h2 class="ltx_title ltx_title_appendix"><span class="ltx_tag ltx_tag_appendix">附录A </span>初步</h2>
<div class="ltx_para" id="A1.p1">
<p class="ltx_p" id="A1.p1.4"><span class="ltx_text ltx_font_bold" id="A1.p1.4.1">知识库（KB）</span>知识库是主题-关系-对象三元组的集合。形式上，KB可以表示为<math alttext="\mathcal{G}" class="ltx_Math" display="inline" id="A1.p1.1.m1.1"><semantics id="A1.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="A1.p1.1.m1.1.1" xref="A1.p1.1.m1.1.1.cmml">𝒢</mi><annotation-xml encoding="MathML-Content" id="A1.p1.1.m1.1b"><ci id="A1.p1.1.m1.1.1.cmml" xref="A1.p1.1.m1.1.1">𝒢</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.p1.1.m1.1c">\mathcal{G}</annotation><annotation encoding="application/x-llamapun" id="A1.p1.1.m1.1d">caligraphic_G</annotation></semantics></math> = <math alttext="\{\langle s,r,o\rangle\mid s,r\in\mathcal{E},r\in\mathcal{R}\}" class="ltx_Math" display="inline" id="A1.p1.2.m2.7"><semantics id="A1.p1.2.m2.7a"><mrow id="A1.p1.2.m2.7.7.2" xref="A1.p1.2.m2.7.7.3.cmml"><mo id="A1.p1.2.m2.7.7.2.3" stretchy="false" xref="A1.p1.2.m2.7.7.3.1.cmml">{</mo><mrow id="A1.p1.2.m2.6.6.1.1.2" xref="A1.p1.2.m2.6.6.1.1.1.cmml"><mo id="A1.p1.2.m2.6.6.1.1.2.1" stretchy="false" xref="A1.p1.2.m2.6.6.1.1.1.cmml">⟨</mo><mi id="A1.p1.2.m2.1.1" xref="A1.p1.2.m2.1.1.cmml">s</mi><mo id="A1.p1.2.m2.6.6.1.1.2.2" xref="A1.p1.2.m2.6.6.1.1.1.cmml">,</mo><mi id="A1.p1.2.m2.2.2" xref="A1.p1.2.m2.2.2.cmml">r</mi><mo id="A1.p1.2.m2.6.6.1.1.2.3" xref="A1.p1.2.m2.6.6.1.1.1.cmml">,</mo><mi id="A1.p1.2.m2.3.3" xref="A1.p1.2.m2.3.3.cmml">o</mi><mo id="A1.p1.2.m2.6.6.1.1.2.4" stretchy="false" xref="A1.p1.2.m2.6.6.1.1.1.cmml">⟩</mo></mrow><mo fence="true" id="A1.p1.2.m2.7.7.2.4" lspace="0em" rspace="0em" xref="A1.p1.2.m2.7.7.3.1.cmml">∣</mo><mrow id="A1.p1.2.m2.7.7.2.2.2" xref="A1.p1.2.m2.7.7.2.2.3.cmml"><mrow id="A1.p1.2.m2.7.7.2.2.1.1" xref="A1.p1.2.m2.7.7.2.2.1.1.cmml"><mrow id="A1.p1.2.m2.7.7.2.2.1.1.2.2" xref="A1.p1.2.m2.7.7.2.2.1.1.2.1.cmml"><mi id="A1.p1.2.m2.4.4" xref="A1.p1.2.m2.4.4.cmml">s</mi><mo id="A1.p1.2.m2.7.7.2.2.1.1.2.2.1" xref="A1.p1.2.m2.7.7.2.2.1.1.2.1.cmml">,</mo><mi id="A1.p1.2.m2.5.5" xref="A1.p1.2.m2.5.5.cmml">r</mi></mrow><mo id="A1.p1.2.m2.7.7.2.2.1.1.1" xref="A1.p1.2.m2.7.7.2.2.1.1.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="A1.p1.2.m2.7.7.2.2.1.1.3" xref="A1.p1.2.m2.7.7.2.2.1.1.3.cmml">ℰ</mi></mrow><mo id="A1.p1.2.m2.7.7.2.2.2.3" xref="A1.p1.2.m2.7.7.2.2.3a.cmml">,</mo><mrow id="A1.p1.2.m2.7.7.2.2.2.2" xref="A1.p1.2.m2.7.7.2.2.2.2.cmml"><mi id="A1.p1.2.m2.7.7.2.2.2.2.2" xref="A1.p1.2.m2.7.7.2.2.2.2.2.cmml">r</mi><mo id="A1.p1.2.m2.7.7.2.2.2.2.1" xref="A1.p1.2.m2.7.7.2.2.2.2.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="A1.p1.2.m2.7.7.2.2.2.2.3" xref="A1.p1.2.m2.7.7.2.2.2.2.3.cmml">ℛ</mi></mrow></mrow><mo id="A1.p1.2.m2.7.7.2.5" stretchy="false" xref="A1.p1.2.m2.7.7.3.1.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="A1.p1.2.m2.7b"><apply id="A1.p1.2.m2.7.7.3.cmml" xref="A1.p1.2.m2.7.7.2"><csymbol cd="latexml" id="A1.p1.2.m2.7.7.3.1.cmml" xref="A1.p1.2.m2.7.7.2.3">conditional-set</csymbol><list id="A1.p1.2.m2.6.6.1.1.1.cmml" xref="A1.p1.2.m2.6.6.1.1.2"><ci id="A1.p1.2.m2.1.1.cmml" xref="A1.p1.2.m2.1.1">𝑠</ci><ci id="A1.p1.2.m2.2.2.cmml" xref="A1.p1.2.m2.2.2">𝑟</ci><ci id="A1.p1.2.m2.3.3.cmml" xref="A1.p1.2.m2.3.3">𝑜</ci></list><apply id="A1.p1.2.m2.7.7.2.2.3.cmml" xref="A1.p1.2.m2.7.7.2.2.2"><csymbol cd="ambiguous" id="A1.p1.2.m2.7.7.2.2.3a.cmml" xref="A1.p1.2.m2.7.7.2.2.2.3">formulae-sequence</csymbol><apply id="A1.p1.2.m2.7.7.2.2.1.1.cmml" xref="A1.p1.2.m2.7.7.2.2.1.1"><in id="A1.p1.2.m2.7.7.2.2.1.1.1.cmml" xref="A1.p1.2.m2.7.7.2.2.1.1.1"></in><list id="A1.p1.2.m2.7.7.2.2.1.1.2.1.cmml" xref="A1.p1.2.m2.7.7.2.2.1.1.2.2"><ci id="A1.p1.2.m2.4.4.cmml" xref="A1.p1.2.m2.4.4">𝑠</ci><ci id="A1.p1.2.m2.5.5.cmml" xref="A1.p1.2.m2.5.5">𝑟</ci></list><ci id="A1.p1.2.m2.7.7.2.2.1.1.3.cmml" xref="A1.p1.2.m2.7.7.2.2.1.1.3">ℰ</ci></apply><apply id="A1.p1.2.m2.7.7.2.2.2.2.cmml" xref="A1.p1.2.m2.7.7.2.2.2.2"><in id="A1.p1.2.m2.7.7.2.2.2.2.1.cmml" xref="A1.p1.2.m2.7.7.2.2.2.2.1"></in><ci id="A1.p1.2.m2.7.7.2.2.2.2.2.cmml" xref="A1.p1.2.m2.7.7.2.2.2.2.2">𝑟</ci><ci id="A1.p1.2.m2.7.7.2.2.2.2.3.cmml" xref="A1.p1.2.m2.7.7.2.2.2.2.3">ℛ</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.p1.2.m2.7c">\{\langle s,r,o\rangle\mid s,r\in\mathcal{E},r\in\mathcal{R}\}</annotation><annotation encoding="application/x-llamapun" id="A1.p1.2.m2.7d">{ ⟨ italic_s , italic_r , italic_o ⟩ ∣ italic_s , italic_r ∈ caligraphic_E , italic_r ∈ caligraphic_R }</annotation></semantics></math>，其中<math alttext="\mathcal{E}" class="ltx_Math" display="inline" id="A1.p1.3.m3.1"><semantics id="A1.p1.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="A1.p1.3.m3.1.1" xref="A1.p1.3.m3.1.1.cmml">ℰ</mi><annotation-xml encoding="MathML-Content" id="A1.p1.3.m3.1b"><ci id="A1.p1.3.m3.1.1.cmml" xref="A1.p1.3.m3.1.1">ℰ</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.p1.3.m3.1c">\mathcal{E}</annotation><annotation encoding="application/x-llamapun" id="A1.p1.3.m3.1d">caligraphic_E</annotation></semantics></math>和<math alttext="\mathcal{R}" class="ltx_Math" display="inline" id="A1.p1.4.m4.1"><semantics id="A1.p1.4.m4.1a"><mi class="ltx_font_mathcaligraphic" id="A1.p1.4.m4.1.1" xref="A1.p1.4.m4.1.1.cmml">ℛ</mi><annotation-xml encoding="MathML-Content" id="A1.p1.4.m4.1b"><ci id="A1.p1.4.m4.1.1.cmml" xref="A1.p1.4.m4.1.1">ℛ</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.p1.4.m4.1c">\mathcal{R}</annotation><annotation encoding="application/x-llamapun" id="A1.p1.4.m4.1d">caligraphic_R</annotation></semantics></math>分别表示实体集和关系集。</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.p2">
<p class="ltx_p" id="A1.p2.8"><span class="ltx_text ltx_font_bold" id="A1.p2.8.1">基于知识的问答（KBQA）</span>给定一个KB <math alttext="\mathcal{G}" class="ltx_Math" display="inline" id="A1.p2.1.m1.1"><semantics id="A1.p2.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="A1.p2.1.m1.1.1" xref="A1.p2.1.m1.1.1.cmml">𝒢</mi><annotation-xml encoding="MathML-Content" id="A1.p2.1.m1.1b"><ci id="A1.p2.1.m1.1.1.cmml" xref="A1.p2.1.m1.1.1">𝒢</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.p2.1.m1.1c">\mathcal{G}</annotation><annotation encoding="application/x-llamapun" id="A1.p2.1.m1.1d">caligraphic_G</annotation></semantics></math> 和一个自然语言问题 <math alttext="q" class="ltx_Math" display="inline" id="A1.p2.2.m2.1"><semantics id="A1.p2.2.m2.1a"><mi id="A1.p2.2.m2.1.1" xref="A1.p2.2.m2.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="A1.p2.2.m2.1b"><ci id="A1.p2.2.m2.1.1.cmml" xref="A1.p2.2.m2.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.p2.2.m2.1c">q</annotation><annotation encoding="application/x-llamapun" id="A1.p2.2.m2.1d">italic_q</annotation></semantics></math>，KBQA的目标是基于 <math alttext="\mathcal{G}" class="ltx_Math" display="inline" id="A1.p2.5.m5.1"><semantics id="A1.p2.5.m5.1a"><mi class="ltx_font_mathcaligraphic" id="A1.p2.5.m5.1.1" xref="A1.p2.5.m5.1.1.cmml">𝒢</mi><annotation-xml encoding="MathML-Content" id="A1.p2.5.m5.1b"><ci id="A1.p2.5.m5.1.1.cmml" xref="A1.p2.5.m5.1.1">𝒢</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.p2.5.m5.1c">\mathcal{G}</annotation><annotation encoding="application/x-llamapun" id="A1.p2.5.m5.1d">caligraphic_G</annotation></semantics></math> 找到答案 <math alttext="a" class="ltx_Math" display="inline" id="A1.p2.3.m3.1"><semantics id="A1.p2.3.m3.1a"><mi id="A1.p2.3.m3.1.1" xref="A1.p2.3.m3.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="A1.p2.3.m3.1b"><ci id="A1.p2.3.m3.1.1.cmml" xref="A1.p2.3.m3.1.1">𝑎</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.p2.3.m3.1c">a</annotation><annotation encoding="application/x-llamapun" id="A1.p2.3.m3.1d">italic_a</annotation></semantics></math>。通常，KBQA被建模为语义解析，其中 <math alttext="q" class="ltx_Math" display="inline" id="A1.p2.6.m6.1"><semantics id="A1.p2.6.m6.1a"><mi id="A1.p2.6.m6.1.1" xref="A1.p2.6.m6.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="A1.p2.6.m6.1b"><ci id="A1.p2.6.m6.1.1.cmml" xref="A1.p2.6.m6.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.p2.6.m6.1c">q</annotation><annotation encoding="application/x-llamapun" id="A1.p2.6.m6.1d">italic_q</annotation></semantics></math> 被映射到一个可执行的逻辑形式 <math alttext="l" class="ltx_Math" display="inline" id="A1.p2.7.m7.1"><semantics id="A1.p2.7.m7.1a"><mi id="A1.p2.7.m7.1.1" xref="A1.p2.7.m7.1.1.cmml">l</mi><annotation-xml encoding="MathML-Content" id="A1.p2.7.m7.1b"><ci id="A1.p2.7.m7.1.1.cmml" xref="A1.p2.7.m7.1.1">𝑙</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.p2.7.m7.1c">l</annotation><annotation encoding="application/x-llamapun" id="A1.p2.7.m7.1d">italic_l</annotation></semantics></math>（<span class="ltx_text ltx_font_italic" id="A1.p2.8.2">例如</span>，SPARQL，S表达式，PyQL），其指示是答案。在这项工作中，我们选择PyQL作为 <math alttext="l" class="ltx_Math" display="inline" id="A1.p2.8.m8.1"><semantics id="A1.p2.8.m8.1a"><mi id="A1.p2.8.m8.1.1" xref="A1.p2.8.m8.1.1.cmml">l</mi><annotation-xml encoding="MathML-Content" id="A1.p2.8.m8.1b"><ci id="A1.p2.8.m8.1.1.cmml" xref="A1.p2.8.m8.1.1">𝑙</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.p2.8.m8.1c">l</annotation><annotation encoding="application/x-llamapun" id="A1.p2.8.m8.1d">italic_l</annotation></semantics></math> 的目标格式，可以转换为等效的SPARQL查询。</p>
</div>
</section>
<section class="ltx_appendix" id="A2">
<h2 class="ltx_title ltx_title_appendix"><span class="ltx_tag ltx_tag_appendix">附录B </span>QueryAgent的实现细节</h2>
<section class="ltx_subsection" id="A2.SS1">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">B.1 </span>推理过程的详细阐述</h3>
<div class="ltx_para" id="A2.SS1.p1">
<p class="ltx_p" id="A2.SS1.p1.1">在这里，我们提供了详细的推理过程，以及正式的算法表示（算法<span class="ltx_text ltx_font_bold" id="p1.1.1"><span class="ltx_text ltx_ref_tag">1</span></span>）。
在每个步骤中，LLM首先根据<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.3">提示</span>生成该步骤的<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.1">思考</span>和<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.2">行动</span>。
第一步的<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.4">提示</span>是与新问题和其实体链接结果连接的单次推理情况。
对于接下来的步骤，馈送给LLM的提示是上一步的提示与上一步的（<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.5">思考</span>，<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.6">行动</span>和<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.7">观察</span>）连接的提示。
然后我们执行<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.8">行动</span>来从KB获取反馈（<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.9">kb_fb</span>）和从Python解释器获取反馈（<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.10">py_fb</span>）。
如果<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.11">行动</span>成功执行，则<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.12">kb_fb</span>是当前未完成的SPARQL查询的执行结果，<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.13">py_fb</span>是一个空字符串。
否则，KB或Python解释器将返回一些错误日志作为反馈。
我们还在每个步骤中累积所有可用的结构信息（<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.14">current_info</span>）作为推理记忆（<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.15">RM</span>），以提供全面的错误检测和区分信息。
<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.16">RM</span>中的信息不仅包括直接生成的结果（<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.17">例如</span>，上一个行动和查询结果），还包括LLM或KB生成结果的第二次解析所需的信息（<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.18">例如</span>，行动的参数）。
基于来自环境的所有可用信息（<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.19">env_fb</span>），我们检测是否存在错误并区分错误类型（<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.20">错误</span>）。
如果存在错误，我们根据识别的错误类型获得对应的指导方针，并将该步骤的<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.21">观察</span>设置为这个<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.22">指导方针</span>。
如果未检测到错误，<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.23">kb_fb</span>是针对KB的有效执行结果，该步骤的<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.24">观察</span>设置为这个<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.25">执行结果</span>。
该过程重复进行，直到超过最大迭代时间或LLM生成终止行动（<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.26">即</span>，<span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.27">执行()</span>）。
有关更多详细信息，请参阅附录<span class="ltx_text" id="p2.1.1" style="width:433.6pt;"><span class="ltx_text ltx_ref_tag">F</span></span>中的示例。</p>
</div>
<figure class="ltx_float ltx_algorithm" id="alg1">
<div class="ltx_listing ltx_lst_numbers_left ltx_listing" id="alg1.2">
<div class="ltx_listingline" id="alg1.2.1">
<div class="ltx_listing ltx_listing" id="alg1.2.1.1">
<div class="ltx_listingline" id="alg1.l1">
<span class="ltx_tag ltx_tag_listingline">1</span><span class="ltx_tag ltx_tag_listingline">1:</span>  <span class="ltx_text ltx_font_bold" id="alg1.l1.1">Input:</span> question <math alttext="Q" class="ltx_Math" display="inline" id="alg1.l1.m1.1"><semantics id="alg1.l1.m1.1a"><mi id="alg1.l1.m1.1.1" xref="alg1.l1.m1.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m1.1b"><ci id="alg1.l1.m1.1.1.cmml" xref="alg1.l1.m1.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m1.1c">Q</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m1.1d">italic_Q</annotation></semantics></math>, entity linking result <math alttext="E" class="ltx_Math" display="inline" id="alg1.l1.m2.1"><semantics id="alg1.l1.m2.1a"><mi id="alg1.l1.m2.1.1" xref="alg1.l1.m2.1.1.cmml">E</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m2.1b"><ci id="alg1.l1.m2.1.1.cmml" xref="alg1.l1.m2.1.1">𝐸</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m2.1c">E</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m2.1d">italic_E</annotation></semantics></math>, instruction <math alttext="I" class="ltx_Math" display="inline" id="alg1.l1.m3.1"><semantics id="alg1.l1.m3.1a"><mi id="alg1.l1.m3.1.1" xref="alg1.l1.m3.1.1.cmml">I</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m3.1b"><ci id="alg1.l1.m3.1.1.cmml" xref="alg1.l1.m3.1.1">𝐼</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m3.1c">I</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m3.1d">italic_I</annotation></semantics></math>, maximum iteration times <math alttext="T" class="ltx_Math" display="inline" id="alg1.l1.m4.1"><semantics id="alg1.l1.m4.1a"><mi id="alg1.l1.m4.1.1" xref="alg1.l1.m4.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m4.1b"><ci id="alg1.l1.m4.1.1.cmml" xref="alg1.l1.m4.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m4.1c">T</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m4.1d">italic_T</annotation></semantics></math>;
</div>
<div class="ltx_listingline" id="alg1.2.1.1.1">
</div>
<div class="ltx_listingline" id="alg1.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span>  <math alttext="t\leftarrow 1" class="ltx_Math" display="inline" id="alg1.l2.m1.1"><semantics id="alg1.l2.m1.1a"><mrow id="alg1.l2.m1.1.1" xref="alg1.l2.m1.1.1.cmml"><mi id="alg1.l2.m1.1.1.2" xref="alg1.l2.m1.1.1.2.cmml">t</mi><mo id="alg1.l2.m1.1.1.1" stretchy="false" xref="alg1.l2.m1.1.1.1.cmml">←</mo><mn id="alg1.l2.m1.1.1.3" xref="alg1.l2.m1.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="alg1.l2.m1.1b"><apply id="alg1.l2.m1.1.1.cmml" xref="alg1.l2.m1.1.1"><ci id="alg1.l2.m1.1.1.1.cmml" xref="alg1.l2.m1.1.1.1">←</ci><ci id="alg1.l2.m1.1.1.2.cmml" xref="alg1.l2.m1.1.1.2">𝑡</ci><cn id="alg1.l2.m1.1.1.3.cmml" type="integer" xref="alg1.l2.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m1.1c">t\leftarrow 1</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m1.1d">italic_t ← 1</annotation></semantics></math>; 
</div>
<div class="ltx_listingline" id="alg1.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span>  <math alttext="prompt\leftarrow I+Q+E" class="ltx_Math" display="inline" id="alg1.l3.m1.1"><semantics id="alg1.l3.m1.1a"><mrow id="alg1.l3.m1.1.1" xref="alg1.l3.m1.1.1.cmml"><mrow id="alg1.l3.m1.1.1.2" xref="alg1.l3.m1.1.1.2.cmml"><mi id="alg1.l3.m1.1.1.2.2" xref="alg1.l3.m1.1.1.2.2.cmml">p</mi><mo id="alg1.l3.m1.1.1.2.1" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.3" xref="alg1.l3.m1.1.1.2.3.cmml">r</mi><mo id="alg1.l3.m1.1.1.2.1a" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.4" xref="alg1.l3.m1.1.1.2.4.cmml">o</mi><mo id="alg1.l3.m1.1.1.2.1b" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.5" xref="alg1.l3.m1.1.1.2.5.cmml">m</mi><mo id="alg1.l3.m1.1.1.2.1c" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.6" xref="alg1.l3.m1.1.1.2.6.cmml">p</mi><mo id="alg1.l3.m1.1.1.2.1d" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.7" xref="alg1.l3.m1.1.1.2.7.cmml">t</mi></mrow><mo id="alg1.l3.m1.1.1.1" stretchy="false" xref="alg1.l3.m1.1.1.1.cmml">←</mo><mrow id="alg1.l3.m1.1.1.3" xref="alg1.l3.m1.1.1.3.cmml"><mi id="alg1.l3.m1.1.1.3.2" xref="alg1.l3.m1.1.1.3.2.cmml">I</mi><mo id="alg1.l3.m1.1.1.3.1" xref="alg1.l3.m1.1.1.3.1.cmml">+</mo><mi id="alg1.l3.m1.1.1.3.3" xref="alg1.l3.m1.1.1.3.3.cmml">Q</mi><mo id="alg1.l3.m1.1.1.3.1a" xref="alg1.l3.m1.1.1.3.1.cmml">+</mo><mi id="alg1.l3.m1.1.1.3.4" xref="alg1.l3.m1.1.1.3.4.cmml">E</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l3.m1.1b"><apply id="alg1.l3.m1.1.1.cmml" xref="alg1.l3.m1.1.1"><ci id="alg1.l3.m1.1.1.1.cmml" xref="alg1.l3.m1.1.1.1">←</ci><apply id="alg1.l3.m1.1.1.2.cmml" xref="alg1.l3.m1.1.1.2"><times id="alg1.l3.m1.1.1.2.1.cmml" xref="alg1.l3.m1.1.1.2.1"></times><ci id="alg1.l3.m1.1.1.2.2.cmml" xref="alg1.l3.m1.1.1.2.2">𝑝</ci><ci id="alg1.l3.m1.1.1.2.3.cmml" xref="alg1.l3.m1.1.1.2.3">𝑟</ci><ci id="alg1.l3.m1.1.1.2.4.cmml" xref="alg1.l3.m1.1.1.2.4">𝑜</ci><ci id="alg1.l3.m1.1.1.2.5.cmml" xref="alg1.l3.m1.1.1.2.5">𝑚</ci><ci id="alg1.l3.m1.1.1.2.6.cmml" xref="alg1.l3.m1.1.1.2.6">𝑝</ci><ci id="alg1.l3.m1.1.1.2.7.cmml" xref="alg1.l3.m1.1.1.2.7">𝑡</ci></apply><apply id="alg1.l3.m1.1.1.3.cmml" xref="alg1.l3.m1.1.1.3"><plus id="alg1.l3.m1.1.1.3.1.cmml" xref="alg1.l3.m1.1.1.3.1"></plus><ci id="alg1.l3.m1.1.1.3.2.cmml" xref="alg1.l3.m1.1.1.3.2">𝐼</ci><ci id="alg1.l3.m1.1.1.3.3.cmml" xref="alg1.l3.m1.1.1.3.3">𝑄</ci><ci id="alg1.l3.m1.1.1.3.4.cmml" xref="alg1.l3.m1.1.1.3.4">𝐸</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m1.1c">prompt\leftarrow I+Q+E</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m1.1d">italic_p italic_r italic_o italic_m italic_p italic_t ← italic_I + italic_Q + italic_E</annotation></semantics></math>; 
</div>
<div class="ltx_listingline" id="alg1.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span>  <math alttext="RM\leftarrow\emptyset" class="ltx_Math" display="inline" id="alg1.l4.m1.1"><semantics id="alg1.l4.m1.1a"><mrow id="alg1.l4.m1.1.1" xref="alg1.l4.m1.1.1.cmml"><mrow id="alg1.l4.m1.1.1.2" xref="alg1.l4.m1.1.1.2.cmml"><mi id="alg1.l4.m1.1.1.2.2" xref="alg1.l4.m1.1.1.2.2.cmml">R</mi><mo id="alg1.l4.m1.1.1.2.1" xref="alg1.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.2.3" xref="alg1.l4.m1.1.1.2.3.cmml">M</mi></mrow><mo id="alg1.l4.m1.1.1.1" stretchy="false" xref="alg1.l4.m1.1.1.1.cmml">←</mo><mi id="alg1.l4.m1.1.1.3" mathvariant="normal" xref="alg1.l4.m1.1.1.3.cmml">∅</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l4.m1.1b"><apply id="alg1.l4.m1.1.1.cmml" xref="alg1.l4.m1.1.1"><ci id="alg1.l4.m1.1.1.1.cmml" xref="alg1.l4.m1.1.1.1">←</ci><apply id="alg1.l4.m1.1.1.2.cmml" xref="alg1.l4.m1.1.1.2"><times id="alg1.l4.m1.1.1.2.1.cmml" xref="alg1.l4.m1.1.1.2.1"></times><ci id="alg1.l4.m1.1.1.2.2.cmml" xref="alg1.l4.m1.1.1.2.2">𝑅</ci><ci id="alg1.l4.m1.1.1.2.3.cmml" xref="alg1.l4.m1.1.1.2.3">𝑀</ci></apply><emptyset id="alg1.l4.m1.1.1.3.cmml" xref="alg1.l4.m1.1.1.3"></emptyset></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m1.1c">RM\leftarrow\emptyset</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m1.1d">italic_R italic_M ← ∅</annotation></semantics></math>; // Reasoning Memory 
</div>
<div class="ltx_listingline" id="alg1.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>  <span class="ltx_text ltx_font_bold" id="alg1.l5.1">while</span> <math alttext="t\leq T" class="ltx_Math" display="inline" id="alg1.l5.m1.1"><semantics id="alg1.l5.m1.1a"><mrow id="alg1.l5.m1.1.1" xref="alg1.l5.m1.1.1.cmml"><mi id="alg1.l5.m1.1.1.2" xref="alg1.l5.m1.1.1.2.cmml">t</mi><mo id="alg1.l5.m1.1.1.1" xref="alg1.l5.m1.1.1.1.cmml">≤</mo><mi id="alg1.l5.m1.1.1.3" xref="alg1.l5.m1.1.1.3.cmml">T</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l5.m1.1b"><apply id="alg1.l5.m1.1.1.cmml" xref="alg1.l5.m1.1.1"><leq id="alg1.l5.m1.1.1.1.cmml" xref="alg1.l5.m1.1.1.1"></leq><ci id="alg1.l5.m1.1.1.2.cmml" xref="alg1.l5.m1.1.1.2">𝑡</ci><ci id="alg1.l5.m1.1.1.3.cmml" xref="alg1.l5.m1.1.1.3">𝑇</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l5.m1.1c">t\leq T</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m1.1d">italic_t ≤ italic_T</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l5.2">do</span>
</div>
<div class="ltx_listingline" id="alg1.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>     <math alttext="thought,action\leftarrow\textbf{LLM}(prompt)" class="ltx_Math" display="inline" id="alg1.l6.m1.3"><semantics id="alg1.l6.m1.3a"><mrow id="alg1.l6.m1.3.3" xref="alg1.l6.m1.3.3.cmml"><mrow id="alg1.l6.m1.2.2.2.2" xref="alg1.l6.m1.2.2.2.3.cmml"><mrow id="alg1.l6.m1.1.1.1.1.1" xref="alg1.l6.m1.1.1.1.1.1.cmml"><mi id="alg1.l6.m1.1.1.1.1.1.2" xref="alg1.l6.m1.1.1.1.1.1.2.cmml">t</mi><mo id="alg1.l6.m1.1.1.1.1.1.1" xref="alg1.l6.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.3" xref="alg1.l6.m1.1.1.1.1.1.3.cmml">h</mi><mo id="alg1.l6.m1.1.1.1.1.1.1a" xref="alg1.l6.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.4" xref="alg1.l6.m1.1.1.1.1.1.4.cmml">o</mi><mo id="alg1.l6.m1.1.1.1.1.1.1b" xref="alg1.l6.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.5" xref="alg1.l6.m1.1.1.1.1.1.5.cmml">u</mi><mo id="alg1.l6.m1.1.1.1.1.1.1c" xref="alg1.l6.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.6" xref="alg1.l6.m1.1.1.1.1.1.6.cmml">g</mi><mo id="alg1.l6.m1.1.1.1.1.1.1d" xref="alg1.l6.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.7" xref="alg1.l6.m1.1.1.1.1.1.7.cmml">h</mi><mo id="alg1.l6.m1.1.1.1.1.1.1e" xref="alg1.l6.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.8" xref="alg1.l6.m1.1.1.1.1.1.8.cmml">t</mi></mrow><mo id="alg1.l6.m1.2.2.2.2.3" xref="alg1.l6.m1.2.2.2.3.cmml">,</mo><mrow id="alg1.l6.m1.2.2.2.2.2" xref="alg1.l6.m1.2.2.2.2.2.cmml"><mi id="alg1.l6.m1.2.2.2.2.2.2" xref="alg1.l6.m1.2.2.2.2.2.2.cmml">a</mi><mo id="alg1.l6.m1.2.2.2.2.2.1" xref="alg1.l6.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l6.m1.2.2.2.2.2.3" xref="alg1.l6.m1.2.2.2.2.2.3.cmml">c</mi><mo id="alg1.l6.m1.2.2.2.2.2.1a" xref="alg1.l6.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l6.m1.2.2.2.2.2.4" xref="alg1.l6.m1.2.2.2.2.2.4.cmml">t</mi><mo id="alg1.l6.m1.2.2.2.2.2.1b" xref="alg1.l6.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l6.m1.2.2.2.2.2.5" xref="alg1.l6.m1.2.2.2.2.2.5.cmml">i</mi><mo id="alg1.l6.m1.2.2.2.2.2.1c" xref="alg1.l6.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l6.m1.2.2.2.2.2.6" xref="alg1.l6.m1.2.2.2.2.2.6.cmml">o</mi><mo id="alg1.l6.m1.2.2.2.2.2.1d" xref="alg1.l6.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l6.m1.2.2.2.2.2.7" xref="alg1.l6.m1.2.2.2.2.2.7.cmml">n</mi></mrow></mrow><mo id="alg1.l6.m1.3.3.4" stretchy="false" xref="alg1.l6.m1.3.3.4.cmml">←</mo><mrow id="alg1.l6.m1.3.3.3" xref="alg1.l6.m1.3.3.3.cmml"><mtext id="alg1.l6.m1.3.3.3.3" xref="alg1.l6.m1.3.3.3.3a.cmml">𝐋𝐋𝐌</mtext><mo id="alg1.l6.m1.3.3.3.2" xref="alg1.l6.m1.3.3.3.2.cmml">⁢</mo><mrow id="alg1.l6.m1.3.3.3.1.1" xref="alg1.l6.m1.3.3.3.1.1.1.cmml"><mo id="alg1.l6.m1.3.3.3.1.1.2" stretchy="false" xref="alg1.l6.m1.3.3.3.1.1.1.cmml">(</mo><mrow id="alg1.l6.m1.3.3.3.1.1.1" xref="alg1.l6.m1.3.3.3.1.1.1.cmml"><mi id="alg1.l6.m1.3.3.3.1.1.1.2" xref="alg1.l6.m1.3.3.3.1.1.1.2.cmml">p</mi><mo id="alg1.l6.m1.3.3.3.1.1.1.1" xref="alg1.l6.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.3.3.3.1.1.1.3" xref="alg1.l6.m1.3.3.3.1.1.1.3.cmml">r</mi><mo id="alg1.l6.m1.3.3.3.1.1.1.1a" xref="alg1.l6.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.3.3.3.1.1.1.4" xref="alg1.l6.m1.3.3.3.1.1.1.4.cmml">o</mi><mo id="alg1.l6.m1.3.3.3.1.1.1.1b" xref="alg1.l6.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.3.3.3.1.1.1.5" xref="alg1.l6.m1.3.3.3.1.1.1.5.cmml">m</mi><mo id="alg1.l6.m1.3.3.3.1.1.1.1c" xref="alg1.l6.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.3.3.3.1.1.1.6" xref="alg1.l6.m1.3.3.3.1.1.1.6.cmml">p</mi><mo id="alg1.l6.m1.3.3.3.1.1.1.1d" xref="alg1.l6.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.3.3.3.1.1.1.7" xref="alg1.l6.m1.3.3.3.1.1.1.7.cmml">t</mi></mrow><mo id="alg1.l6.m1.3.3.3.1.1.3" stretchy="false" xref="alg1.l6.m1.3.3.3.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l6.m1.3b"><apply id="alg1.l6.m1.3.3.cmml" xref="alg1.l6.m1.3.3"><ci id="alg1.l6.m1.3.3.4.cmml" xref="alg1.l6.m1.3.3.4">←</ci><list id="alg1.l6.m1.2.2.2.3.cmml" xref="alg1.l6.m1.2.2.2.2"><apply id="alg1.l6.m1.1.1.1.1.1.cmml" xref="alg1.l6.m1.1.1.1.1.1"><times id="alg1.l6.m1.1.1.1.1.1.1.cmml" xref="alg1.l6.m1.1.1.1.1.1.1"></times><ci id="alg1.l6.m1.1.1.1.1.1.2.cmml" xref="alg1.l6.m1.1.1.1.1.1.2">𝑡</ci><ci id="alg1.l6.m1.1.1.1.1.1.3.cmml" xref="alg1.l6.m1.1.1.1.1.1.3">ℎ</ci><ci id="alg1.l6.m1.1.1.1.1.1.4.cmml" xref="alg1.l6.m1.1.1.1.1.1.4">𝑜</ci><ci id="alg1.l6.m1.1.1.1.1.1.5.cmml" xref="alg1.l6.m1.1.1.1.1.1.5">𝑢</ci><ci id="alg1.l6.m1.1.1.1.1.1.6.cmml" xref="alg1.l6.m1.1.1.1.1.1.6">𝑔</ci><ci id="alg1.l6.m1.1.1.1.1.1.7.cmml" xref="alg1.l6.m1.1.1.1.1.1.7">ℎ</ci><ci id="alg1.l6.m1.1.1.1.1.1.8.cmml" xref="alg1.l6.m1.1.1.1.1.1.8">𝑡</ci></apply><apply id="alg1.l6.m1.2.2.2.2.2.cmml" xref="alg1.l6.m1.2.2.2.2.2"><times id="alg1.l6.m1.2.2.2.2.2.1.cmml" xref="alg1.l6.m1.2.2.2.2.2.1"></times><ci id="alg1.l6.m1.2.2.2.2.2.2.cmml" xref="alg1.l6.m1.2.2.2.2.2.2">𝑎</ci><ci id="alg1.l6.m1.2.2.2.2.2.3.cmml" xref="alg1.l6.m1.2.2.2.2.2.3">𝑐</ci><ci id="alg1.l6.m1.2.2.2.2.2.4.cmml" xref="alg1.l6.m1.2.2.2.2.2.4">𝑡</ci><ci id="alg1.l6.m1.2.2.2.2.2.5.cmml" xref="alg1.l6.m1.2.2.2.2.2.5">𝑖</ci><ci id="alg1.l6.m1.2.2.2.2.2.6.cmml" xref="alg1.l6.m1.2.2.2.2.2.6">𝑜</ci><ci id="alg1.l6.m1.2.2.2.2.2.7.cmml" xref="alg1.l6.m1.2.2.2.2.2.7">𝑛</ci></apply></list><apply id="alg1.l6.m1.3.3.3.cmml" xref="alg1.l6.m1.3.3.3"><times id="alg1.l6.m1.3.3.3.2.cmml" xref="alg1.l6.m1.3.3.3.2"></times><ci id="alg1.l6.m1.3.3.3.3a.cmml" xref="alg1.l6.m1.3.3.3.3"><mtext id="alg1.l6.m1.3.3.3.3.cmml" xref="alg1.l6.m1.3.3.3.3">𝐋𝐋𝐌</mtext></ci><apply id="alg1.l6.m1.3.3.3.1.1.1.cmml" xref="alg1.l6.m1.3.3.3.1.1"><times id="alg1.l6.m1.3.3.3.1.1.1.1.cmml" xref="alg1.l6.m1.3.3.3.1.1.1.1"></times><ci id="alg1.l6.m1.3.3.3.1.1.1.2.cmml" xref="alg1.l6.m1.3.3.3.1.1.1.2">𝑝</ci><ci id="alg1.l6.m1.3.3.3.1.1.1.3.cmml" xref="alg1.l6.m1.3.3.3.1.1.1.3">𝑟</ci><ci id="alg1.l6.m1.3.3.3.1.1.1.4.cmml" xref="alg1.l6.m1.3.3.3.1.1.1.4">𝑜</ci><ci id="alg1.l6.m1.3.3.3.1.1.1.5.cmml" xref="alg1.l6.m1.3.3.3.1.1.1.5">𝑚</ci><ci id="alg1.l6.m1.3.3.3.1.1.1.6.cmml" xref="alg1.l6.m1.3.3.3.1.1.1.6">𝑝</ci><ci id="alg1.l6.m1.3.3.3.1.1.1.7.cmml" xref="alg1.l6.m1.3.3.3.1.1.1.7">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l6.m1.3c">thought,action\leftarrow\textbf{LLM}(prompt)</annotation><annotation encoding="application/x-llamapun" id="alg1.l6.m1.3d">italic_t italic_h italic_o italic_u italic_g italic_h italic_t , italic_a italic_c italic_t italic_i italic_o italic_n ← LLM ( italic_p italic_r italic_o italic_m italic_p italic_t )</annotation></semantics></math>; 
</div>
<div class="ltx_listingline" id="alg1.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span>     <math alttext="KB\_fb,Python\_fb\leftarrow\textbf{Execute}(action)" class="ltx_Math" display="inline" id="alg1.l7.m1.3"><semantics id="alg1.l7.m1.3a"><mrow id="alg1.l7.m1.3.3" xref="alg1.l7.m1.3.3.cmml"><mrow id="alg1.l7.m1.2.2.2.2" xref="alg1.l7.m1.2.2.2.3.cmml"><mrow id="alg1.l7.m1.1.1.1.1.1" xref="alg1.l7.m1.1.1.1.1.1.cmml"><mi id="alg1.l7.m1.1.1.1.1.1.2" xref="alg1.l7.m1.1.1.1.1.1.2.cmml">K</mi><mo id="alg1.l7.m1.1.1.1.1.1.1" xref="alg1.l7.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.3" xref="alg1.l7.m1.1.1.1.1.1.3.cmml">B</mi><mo id="alg1.l7.m1.1.1.1.1.1.1a" xref="alg1.l7.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.4" mathvariant="normal" xref="alg1.l7.m1.1.1.1.1.1.4.cmml">_</mi><mo id="alg1.l7.m1.1.1.1.1.1.1b" xref="alg1.l7.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.5" xref="alg1.l7.m1.1.1.1.1.1.5.cmml">f</mi><mo id="alg1.l7.m1.1.1.1.1.1.1c" xref="alg1.l7.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.6" xref="alg1.l7.m1.1.1.1.1.1.6.cmml">b</mi></mrow><mo id="alg1.l7.m1.2.2.2.2.3" xref="alg1.l7.m1.2.2.2.3.cmml">,</mo><mrow id="alg1.l7.m1.2.2.2.2.2" xref="alg1.l7.m1.2.2.2.2.2.cmml"><mi id="alg1.l7.m1.2.2.2.2.2.2" xref="alg1.l7.m1.2.2.2.2.2.2.cmml">P</mi><mo id="alg1.l7.m1.2.2.2.2.2.1" xref="alg1.l7.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l7.m1.2.2.2.2.2.3" xref="alg1.l7.m1.2.2.2.2.2.3.cmml">y</mi><mo id="alg1.l7.m1.2.2.2.2.2.1a" xref="alg1.l7.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l7.m1.2.2.2.2.2.4" xref="alg1.l7.m1.2.2.2.2.2.4.cmml">t</mi><mo id="alg1.l7.m1.2.2.2.2.2.1b" xref="alg1.l7.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l7.m1.2.2.2.2.2.5" xref="alg1.l7.m1.2.2.2.2.2.5.cmml">h</mi><mo id="alg1.l7.m1.2.2.2.2.2.1c" xref="alg1.l7.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l7.m1.2.2.2.2.2.6" xref="alg1.l7.m1.2.2.2.2.2.6.cmml">o</mi><mo id="alg1.l7.m1.2.2.2.2.2.1d" xref="alg1.l7.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l7.m1.2.2.2.2.2.7" xref="alg1.l7.m1.2.2.2.2.2.7.cmml">n</mi><mo id="alg1.l7.m1.2.2.2.2.2.1e" xref="alg1.l7.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l7.m1.2.2.2.2.2.8" mathvariant="normal" xref="alg1.l7.m1.2.2.2.2.2.8.cmml">_</mi><mo id="alg1.l7.m1.2.2.2.2.2.1f" xref="alg1.l7.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l7.m1.2.2.2.2.2.9" xref="alg1.l7.m1.2.2.2.2.2.9.cmml">f</mi><mo id="alg1.l7.m1.2.2.2.2.2.1g" xref="alg1.l7.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l7.m1.2.2.2.2.2.10" xref="alg1.l7.m1.2.2.2.2.2.10.cmml">b</mi></mrow></mrow><mo id="alg1.l7.m1.3.3.4" stretchy="false" xref="alg1.l7.m1.3.3.4.cmml">←</mo><mrow id="alg1.l7.m1.3.3.3" xref="alg1.l7.m1.3.3.3.cmml"><mtext id="alg1.l7.m1.3.3.3.3" xref="alg1.l7.m1.3.3.3.3a.cmml">𝐄𝐱𝐞𝐜𝐮𝐭𝐞</mtext><mo id="alg1.l7.m1.3.3.3.2" xref="alg1.l7.m1.3.3.3.2.cmml">⁢</mo><mrow id="alg1.l7.m1.3.3.3.1.1" xref="alg1.l7.m1.3.3.3.1.1.1.cmml"><mo id="alg1.l7.m1.3.3.3.1.1.2" stretchy="false" xref="alg1.l7.m1.3.3.3.1.1.1.cmml">(</mo><mrow id="alg1.l7.m1.3.3.3.1.1.1" xref="alg1.l7.m1.3.3.3.1.1.1.cmml"><mi id="alg1.l7.m1.3.3.3.1.1.1.2" xref="alg1.l7.m1.3.3.3.1.1.1.2.cmml">a</mi><mo id="alg1.l7.m1.3.3.3.1.1.1.1" xref="alg1.l7.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.3.3.3.1.1.1.3" xref="alg1.l7.m1.3.3.3.1.1.1.3.cmml">c</mi><mo id="alg1.l7.m1.3.3.3.1.1.1.1a" xref="alg1.l7.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.3.3.3.1.1.1.4" xref="alg1.l7.m1.3.3.3.1.1.1.4.cmml">t</mi><mo id="alg1.l7.m1.3.3.3.1.1.1.1b" xref="alg1.l7.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.3.3.3.1.1.1.5" xref="alg1.l7.m1.3.3.3.1.1.1.5.cmml">i</mi><mo id="alg1.l7.m1.3.3.3.1.1.1.1c" xref="alg1.l7.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.3.3.3.1.1.1.6" xref="alg1.l7.m1.3.3.3.1.1.1.6.cmml">o</mi><mo id="alg1.l7.m1.3.3.3.1.1.1.1d" xref="alg1.l7.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.3.3.3.1.1.1.7" xref="alg1.l7.m1.3.3.3.1.1.1.7.cmml">n</mi></mrow><mo id="alg1.l7.m1.3.3.3.1.1.3" stretchy="false" xref="alg1.l7.m1.3.3.3.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l7.m1.3b"><apply id="alg1.l7.m1.3.3.cmml" xref="alg1.l7.m1.3.3"><ci id="alg1.l7.m1.3.3.4.cmml" xref="alg1.l7.m1.3.3.4">←</ci><list id="alg1.l7.m1.2.2.2.3.cmml" xref="alg1.l7.m1.2.2.2.2"><apply id="alg1.l7.m1.1.1.1.1.1.cmml" xref="alg1.l7.m1.1.1.1.1.1"><times id="alg1.l7.m1.1.1.1.1.1.1.cmml" xref="alg1.l7.m1.1.1.1.1.1.1"></times><ci id="alg1.l7.m1.1.1.1.1.1.2.cmml" xref="alg1.l7.m1.1.1.1.1.1.2">𝐾</ci><ci id="alg1.l7.m1.1.1.1.1.1.3.cmml" xref="alg1.l7.m1.1.1.1.1.1.3">𝐵</ci><ci id="alg1.l7.m1.1.1.1.1.1.4.cmml" xref="alg1.l7.m1.1.1.1.1.1.4">_</ci><ci id="alg1.l7.m1.1.1.1.1.1.5.cmml" xref="alg1.l7.m1.1.1.1.1.1.5">𝑓</ci><ci id="alg1.l7.m1.1.1.1.1.1.6.cmml" xref="alg1.l7.m1.1.1.1.1.1.6">𝑏</ci></apply><apply id="alg1.l7.m1.2.2.2.2.2.cmml" xref="alg1.l7.m1.2.2.2.2.2"><times id="alg1.l7.m1.2.2.2.2.2.1.cmml" xref="alg1.l7.m1.2.2.2.2.2.1"></times><ci id="alg1.l7.m1.2.2.2.2.2.2.cmml" xref="alg1.l7.m1.2.2.2.2.2.2">𝑃</ci><ci id="alg1.l7.m1.2.2.2.2.2.3.cmml" xref="alg1.l7.m1.2.2.2.2.2.3">𝑦</ci><ci id="alg1.l7.m1.2.2.2.2.2.4.cmml" xref="alg1.l7.m1.2.2.2.2.2.4">𝑡</ci><ci id="alg1.l7.m1.2.2.2.2.2.5.cmml" xref="alg1.l7.m1.2.2.2.2.2.5">ℎ</ci><ci id="alg1.l7.m1.2.2.2.2.2.6.cmml" xref="alg1.l7.m1.2.2.2.2.2.6">𝑜</ci><ci id="alg1.l7.m1.2.2.2.2.2.7.cmml" xref="alg1.l7.m1.2.2.2.2.2.7">𝑛</ci><ci id="alg1.l7.m1.2.2.2.2.2.8.cmml" xref="alg1.l7.m1.2.2.2.2.2.8">_</ci><ci id="alg1.l7.m1.2.2.2.2.2.9.cmml" xref="alg1.l7.m1.2.2.2.2.2.9">𝑓</ci><ci id="alg1.l7.m1.2.2.2.2.2.10.cmml" xref="alg1.l7.m1.2.2.2.2.2.10">𝑏</ci></apply></list><apply id="alg1.l7.m1.3.3.3.cmml" xref="alg1.l7.m1.3.3.3"><times id="alg1.l7.m1.3.3.3.2.cmml" xref="alg1.l7.m1.3.3.3.2"></times><ci id="alg1.l7.m1.3.3.3.3a.cmml" xref="alg1.l7.m1.3.3.3.3"><mtext id="alg1.l7.m1.3.3.3.3.cmml" xref="alg1.l7.m1.3.3.3.3">𝐄𝐱𝐞𝐜𝐮𝐭𝐞</mtext></ci><apply id="alg1.l7.m1.3.3.3.1.1.1.cmml" xref="alg1.l7.m1.3.3.3.1.1"><times id="alg1.l7.m1.3.3.3.1.1.1.1.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.1"></times><ci id="alg1.l7.m1.3.3.3.1.1.1.2.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.2">𝑎</ci><ci id="alg1.l7.m1.3.3.3.1.1.1.3.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.3">𝑐</ci><ci id="alg1.l7.m1.3.3.3.1.1.1.4.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.4">𝑡</ci><ci id="alg1.l7.m1.3.3.3.1.1.1.5.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.5">𝑖</ci><ci id="alg1.l7.m1.3.3.3.1.1.1.6.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.6">𝑜</ci><ci id="alg1.l7.m1.3.3.3.1.1.1.7.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.7">𝑛</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l7.m1.3c">KB\_fb,Python\_fb\leftarrow\textbf{Execute}(action)</annotation><annotation encoding="application/x-llamapun" id="alg1.l7.m1.3d">italic_K italic_B _ italic_f italic_b , italic_P italic_y italic_t italic_h italic_o italic_n _ italic_f italic_b ← Execute ( italic_a italic_c italic_t italic_i italic_o italic_n )</annotation></semantics></math>; 
</div>
<div class="ltx_listingline" id="alg1.l8">
<span class="ltx_tag ltx_tag_listingline">8:</span>     <math alttext="current\_info\leftarrow\textbf{\text{Get\_Info\_in\_This\_Step()}}" class="ltx_Math" display="inline" id="alg1.l8.m1.1"><semantics id="alg1.l8.m1.1a"><mrow id="alg1.l8.m1.1.1" xref="alg1.l8.m1.1.1.cmml"><mrow id="alg1.l8.m1.1.1.2" xref="alg1.l8.m1.1.1.2.cmml"><mi id="alg1.l8.m1.1.1.2.2" xref="alg1.l8.m1.1.1.2.2.cmml">c</mi><mo id="alg1.l8.m1.1.1.2.1" xref="alg1.l8.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l8.m1.1.1.2.3" xref="alg1.l8.m1.1.1.2.3.cmml">u</mi><mo id="alg1.l8.m1.1.1.2.1a" xref="alg1.l8.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l8.m1.1.1.2.4" xref="alg1.l8.m1.1.1.2.4.cmml">r</mi><mo id="alg1.l8.m1.1.1.2.1b" xref="alg1.l8.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l8.m1.1.1.2.5" xref="alg1.l8.m1.1.1.2.5.cmml">r</mi><mo id="alg1.l8.m1.1.1.2.1c" xref="alg1.l8.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l8.m1.1.1.2.6" xref="alg1.l8.m1.1.1.2.6.cmml">e</mi><mo id="alg1.l8.m1.1.1.2.1d" xref="alg1.l8.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l8.m1.1.1.2.7" xref="alg1.l8.m1.1.1.2.7.cmml">n</mi><mo id="alg1.l8.m1.1.1.2.1e" xref="alg1.l8.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l8.m1.1.1.2.8" xref="alg1.l8.m1.1.1.2.8.cmml">t</mi><mo id="alg1.l8.m1.1.1.2.1f" xref="alg1.l8.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l8.m1.1.1.2.9" mathvariant="normal" xref="alg1.l8.m1.1.1.2.9.cmml">_</mi><mo id="alg1.l8.m1.1.1.2.1g" xref="alg1.l8.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l8.m1.1.1.2.10" xref="alg1.l8.m1.1.1.2.10.cmml">i</mi><mo id="alg1.l8.m1.1.1.2.1h" xref="alg1.l8.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l8.m1.1.1.2.11" xref="alg1.l8.m1.1.1.2.11.cmml">n</mi><mo id="alg1.l8.m1.1.1.2.1i" xref="alg1.l8.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l8.m1.1.1.2.12" xref="alg1.l8.m1.1.1.2.12.cmml">f</mi><mo id="alg1.l8.m1.1.1.2.1j" xref="alg1.l8.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l8.m1.1.1.2.13" xref="alg1.l8.m1.1.1.2.13.cmml">o</mi></mrow><mo id="alg1.l8.m1.1.1.1" stretchy="false" xref="alg1.l8.m1.1.1.1.cmml">←</mo><mtext id="alg1.l8.m1.1.1.3" mathvariant="bold" xref="alg1.l8.m1.1.1.3a.cmml">Get_Info_in_This_Step()</mtext></mrow><annotation-xml encoding="MathML-Content" id="alg1.l8.m1.1b"><apply id="alg1.l8.m1.1.1.cmml" xref="alg1.l8.m1.1.1"><ci id="alg1.l8.m1.1.1.1.cmml" xref="alg1.l8.m1.1.1.1">←</ci><apply id="alg1.l8.m1.1.1.2.cmml" xref="alg1.l8.m1.1.1.2"><times id="alg1.l8.m1.1.1.2.1.cmml" xref="alg1.l8.m1.1.1.2.1"></times><ci id="alg1.l8.m1.1.1.2.2.cmml" xref="alg1.l8.m1.1.1.2.2">𝑐</ci><ci id="alg1.l8.m1.1.1.2.3.cmml" xref="alg1.l8.m1.1.1.2.3">𝑢</ci><ci id="alg1.l8.m1.1.1.2.4.cmml" xref="alg1.l8.m1.1.1.2.4">𝑟</ci><ci id="alg1.l8.m1.1.1.2.5.cmml" xref="alg1.l8.m1.1.1.2.5">𝑟</ci><ci id="alg1.l8.m1.1.1.2.6.cmml" xref="alg1.l8.m1.1.1.2.6">𝑒</ci><ci id="alg1.l8.m1.1.1.2.7.cmml" xref="alg1.l8.m1.1.1.2.7">𝑛</ci><ci id="alg1.l8.m1.1.1.2.8.cmml" xref="alg1.l8.m1.1.1.2.8">𝑡</ci><ci id="alg1.l8.m1.1.1.2.9.cmml" xref="alg1.l8.m1.1.1.2.9">_</ci><ci id="alg1.l8.m1.1.1.2.10.cmml" xref="alg1.l8.m1.1.1.2.10">𝑖</ci><ci id="alg1.l8.m1.1.1.2.11.cmml" xref="alg1.l8.m1.1.1.2.11">𝑛</ci><ci id="alg1.l8.m1.1.1.2.12.cmml" xref="alg1.l8.m1.1.1.2.12">𝑓</ci><ci id="alg1.l8.m1.1.1.2.13.cmml" xref="alg1.l8.m1.1.1.2.13">𝑜</ci></apply><ci id="alg1.l8.m1.1.1.3a.cmml" xref="alg1.l8.m1.1.1.3"><mtext id="alg1.l8.m1.1.1.3.cmml" mathvariant="bold" xref="alg1.l8.m1.1.1.3">Get_Info_in_This_Step()</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l8.m1.1c">current\_info\leftarrow\textbf{\text{Get\_Info\_in\_This\_Step()}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l8.m1.1d">italic_c italic_u italic_r italic_r italic_e italic_n italic_t _ italic_i italic_n italic_f italic_o ← Get_Info_in_This_Step()</annotation></semantics></math>; 
</div>
<div class="ltx_listingline" id="alg1.l9">
<span class="ltx_tag ltx_tag_listingline">9:</span>     <math alttext="RM\leftarrow RM\cup current\_info" class="ltx_Math" display="inline" id="alg1.l9.m1.1"><semantics id="alg1.l9.m1.1a"><mrow id="alg1.l9.m1.1.1" xref="alg1.l9.m1.1.1.cmml"><mrow id="alg1.l9.m1.1.1.2" xref="alg1.l9.m1.1.1.2.cmml"><mi id="alg1.l9.m1.1.1.2.2" xref="alg1.l9.m1.1.1.2.2.cmml">R</mi><mo id="alg1.l9.m1.1.1.2.1" xref="alg1.l9.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l9.m1.1.1.2.3" xref="alg1.l9.m1.1.1.2.3.cmml">M</mi></mrow><mo id="alg1.l9.m1.1.1.1" stretchy="false" xref="alg1.l9.m1.1.1.1.cmml">←</mo><mrow id="alg1.l9.m1.1.1.3" xref="alg1.l9.m1.1.1.3.cmml"><mrow id="alg1.l9.m1.1.1.3.2" xref="alg1.l9.m1.1.1.3.2.cmml"><mi id="alg1.l9.m1.1.1.3.2.2" xref="alg1.l9.m1.1.1.3.2.2.cmml">R</mi><mo id="alg1.l9.m1.1.1.3.2.1" xref="alg1.l9.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l9.m1.1.1.3.2.3" xref="alg1.l9.m1.1.1.3.2.3.cmml">M</mi></mrow><mo id="alg1.l9.m1.1.1.3.1" xref="alg1.l9.m1.1.1.3.1.cmml">∪</mo><mrow id="alg1.l9.m1.1.1.3.3" xref="alg1.l9.m1.1.1.3.3.cmml"><mi id="alg1.l9.m1.1.1.3.3.2" xref="alg1.l9.m1.1.1.3.3.2.cmml">c</mi><mo id="alg1.l9.m1.1.1.3.3.1" xref="alg1.l9.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l9.m1.1.1.3.3.3" xref="alg1.l9.m1.1.1.3.3.3.cmml">u</mi><mo id="alg1.l9.m1.1.1.3.3.1a" xref="alg1.l9.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l9.m1.1.1.3.3.4" xref="alg1.l9.m1.1.1.3.3.4.cmml">r</mi><mo id="alg1.l9.m1.1.1.3.3.1b" xref="alg1.l9.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l9.m1.1.1.3.3.5" xref="alg1.l9.m1.1.1.3.3.5.cmml">r</mi><mo id="alg1.l9.m1.1.1.3.3.1c" xref="alg1.l9.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l9.m1.1.1.3.3.6" xref="alg1.l9.m1.1.1.3.3.6.cmml">e</mi><mo id="alg1.l9.m1.1.1.3.3.1d" xref="alg1.l9.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l9.m1.1.1.3.3.7" xref="alg1.l9.m1.1.1.3.3.7.cmml">n</mi><mo id="alg1.l9.m1.1.1.3.3.1e" xref="alg1.l9.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l9.m1.1.1.3.3.8" xref="alg1.l9.m1.1.1.3.3.8.cmml">t</mi><mo id="alg1.l9.m1.1.1.3.3.1f" xref="alg1.l9.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l9.m1.1.1.3.3.9" mathvariant="normal" xref="alg1.l9.m1.1.1.3.3.9.cmml">_</mi><mo id="alg1.l9.m1.1.1.3.3.1g" xref="alg1.l9.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l9.m1.1.1.3.3.10" xref="alg1.l9.m1.1.1.3.3.10.cmml">i</mi><mo id="alg1.l9.m1.1.1.3.3.1h" xref="alg1.l9.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l9.m1.1.1.3.3.11" xref="alg1.l9.m1.1.1.3.3.11.cmml">n</mi><mo id="alg1.l9.m1.1.1.3.3.1i" xref="alg1.l9.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l9.m1.1.1.3.3.12" xref="alg1.l9.m1.1.1.3.3.12.cmml">f</mi><mo id="alg1.l9.m1.1.1.3.3.1j" xref="alg1.l9.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l9.m1.1.1.3.3.13" xref="alg1.l9.m1.1.1.3.3.13.cmml">o</mi></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l9.m1.1b"><apply id="alg1.l9.m1.1.1.cmml" xref="alg1.l9.m1.1.1"><ci id="alg1.l9.m1.1.1.1.cmml" xref="alg1.l9.m1.1.1.1">←</ci><apply id="alg1.l9.m1.1.1.2.cmml" xref="alg1.l9.m1.1.1.2"><times id="alg1.l9.m1.1.1.2.1.cmml" xref="alg1.l9.m1.1.1.2.1"></times><ci id="alg1.l9.m1.1.1.2.2.cmml" xref="alg1.l9.m1.1.1.2.2">𝑅</ci><ci id="alg1.l9.m1.1.1.2.3.cmml" xref="alg1.l9.m1.1.1.2.3">𝑀</ci></apply><apply id="alg1.l9.m1.1.1.3.cmml" xref="alg1.l9.m1.1.1.3"><union id="alg1.l9.m1.1.1.3.1.cmml" xref="alg1.l9.m1.1.1.3.1"></union><apply id="alg1.l9.m1.1.1.3.2.cmml" xref="alg1.l9.m1.1.1.3.2"><times id="alg1.l9.m1.1.1.3.2.1.cmml" xref="alg1.l9.m1.1.1.3.2.1"></times><ci id="alg1.l9.m1.1.1.3.2.2.cmml" xref="alg1.l9.m1.1.1.3.2.2">𝑅</ci><ci id="alg1.l9.m1.1.1.3.2.3.cmml" xref="alg1.l9.m1.1.1.3.2.3">𝑀</ci></apply><apply id="alg1.l9.m1.1.1.3.3.cmml" xref="alg1.l9.m1.1.1.3.3"><times id="alg1.l9.m1.1.1.3.3.1.cmml" xref="alg1.l9.m1.1.1.3.3.1"></times><ci id="alg1.l9.m1.1.1.3.3.2.cmml" xref="alg1.l9.m1.1.1.3.3.2">𝑐</ci><ci id="alg1.l9.m1.1.1.3.3.3.cmml" xref="alg1.l9.m1.1.1.3.3.3">𝑢</ci><ci id="alg1.l9.m1.1.1.3.3.4.cmml" xref="alg1.l9.m1.1.1.3.3.4">𝑟</ci><ci id="alg1.l9.m1.1.1.3.3.5.cmml" xref="alg1.l9.m1.1.1.3.3.5">𝑟</ci><ci id="alg1.l9.m1.1.1.3.3.6.cmml" xref="alg1.l9.m1.1.1.3.3.6">𝑒</ci><ci id="alg1.l9.m1.1.1.3.3.7.cmml" xref="alg1.l9.m1.1.1.3.3.7">𝑛</ci><ci id="alg1.l9.m1.1.1.3.3.8.cmml" xref="alg1.l9.m1.1.1.3.3.8">𝑡</ci><ci id="alg1.l9.m1.1.1.3.3.9.cmml" xref="alg1.l9.m1.1.1.3.3.9">_</ci><ci id="alg1.l9.m1.1.1.3.3.10.cmml" xref="alg1.l9.m1.1.1.3.3.10">𝑖</ci><ci id="alg1.l9.m1.1.1.3.3.11.cmml" xref="alg1.l9.m1.1.1.3.3.11">𝑛</ci><ci id="alg1.l9.m1.1.1.3.3.12.cmml" xref="alg1.l9.m1.1.1.3.3.12">𝑓</ci><ci id="alg1.l9.m1.1.1.3.3.13.cmml" xref="alg1.l9.m1.1.1.3.3.13">𝑜</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l9.m1.1c">RM\leftarrow RM\cup current\_info</annotation><annotation encoding="application/x-llamapun" id="alg1.l9.m1.1d">italic_R italic_M ← italic_R italic_M ∪ italic_c italic_u italic_r italic_r italic_e italic_n italic_t _ italic_i italic_n italic_f italic_o</annotation></semantics></math>; 
</div>
<div class="ltx_listingline" id="alg1.l10">
<span class="ltx_tag ltx_tag_listingline">10:</span>     <math alttext="env\_fb\leftarrow\{kb\_fb,py\_fb,RM\}" class="ltx_Math" display="inline" id="alg1.l10.m1.3"><semantics id="alg1.l10.m1.3a"><mrow id="alg1.l10.m1.3.3" xref="alg1.l10.m1.3.3.cmml"><mrow id="alg1.l10.m1.3.3.5" xref="alg1.l10.m1.3.3.5.cmml"><mi id="alg1.l10.m1.3.3.5.2" xref="alg1.l10.m1.3.3.5.2.cmml">e</mi><mo id="alg1.l10.m1.3.3.5.1" xref="alg1.l10.m1.3.3.5.1.cmml">⁢</mo><mi id="alg1.l10.m1.3.3.5.3" xref="alg1.l10.m1.3.3.5.3.cmml">n</mi><mo id="alg1.l10.m1.3.3.5.1a" xref="alg1.l10.m1.3.3.5.1.cmml">⁢</mo><mi id="alg1.l10.m1.3.3.5.4" xref="alg1.l10.m1.3.3.5.4.cmml">v</mi><mo id="alg1.l10.m1.3.3.5.1b" xref="alg1.l10.m1.3.3.5.1.cmml">⁢</mo><mi id="alg1.l10.m1.3.3.5.5" mathvariant="normal" xref="alg1.l10.m1.3.3.5.5.cmml">_</mi><mo id="alg1.l10.m1.3.3.5.1c" xref="alg1.l10.m1.3.3.5.1.cmml">⁢</mo><mi id="alg1.l10.m1.3.3.5.6" xref="alg1.l10.m1.3.3.5.6.cmml">f</mi><mo id="alg1.l10.m1.3.3.5.1d" xref="alg1.l10.m1.3.3.5.1.cmml">⁢</mo><mi id="alg1.l10.m1.3.3.5.7" xref="alg1.l10.m1.3.3.5.7.cmml">b</mi></mrow><mo id="alg1.l10.m1.3.3.4" stretchy="false" xref="alg1.l10.m1.3.3.4.cmml">←</mo><mrow id="alg1.l10.m1.3.3.3.3" xref="alg1.l10.m1.3.3.3.4.cmml"><mo id="alg1.l10.m1.3.3.3.3.4" stretchy="false" xref="alg1.l10.m1.3.3.3.4.cmml">{</mo><mrow id="alg1.l10.m1.1.1.1.1.1" xref="alg1.l10.m1.1.1.1.1.1.cmml"><mi id="alg1.l10.m1.1.1.1.1.1.2" xref="alg1.l10.m1.1.1.1.1.1.2.cmml">k</mi><mo id="alg1.l10.m1.1.1.1.1.1.1" xref="alg1.l10.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.1.1.1.3" xref="alg1.l10.m1.1.1.1.1.1.3.cmml">b</mi><mo id="alg1.l10.m1.1.1.1.1.1.1a" xref="alg1.l10.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.1.1.1.4" mathvariant="normal" xref="alg1.l10.m1.1.1.1.1.1.4.cmml">_</mi><mo id="alg1.l10.m1.1.1.1.1.1.1b" xref="alg1.l10.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.1.1.1.5" xref="alg1.l10.m1.1.1.1.1.1.5.cmml">f</mi><mo id="alg1.l10.m1.1.1.1.1.1.1c" xref="alg1.l10.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.1.1.1.6" xref="alg1.l10.m1.1.1.1.1.1.6.cmml">b</mi></mrow><mo id="alg1.l10.m1.3.3.3.3.5" xref="alg1.l10.m1.3.3.3.4.cmml">,</mo><mrow id="alg1.l10.m1.2.2.2.2.2" xref="alg1.l10.m1.2.2.2.2.2.cmml"><mi id="alg1.l10.m1.2.2.2.2.2.2" xref="alg1.l10.m1.2.2.2.2.2.2.cmml">p</mi><mo id="alg1.l10.m1.2.2.2.2.2.1" xref="alg1.l10.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l10.m1.2.2.2.2.2.3" xref="alg1.l10.m1.2.2.2.2.2.3.cmml">y</mi><mo id="alg1.l10.m1.2.2.2.2.2.1a" xref="alg1.l10.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l10.m1.2.2.2.2.2.4" mathvariant="normal" xref="alg1.l10.m1.2.2.2.2.2.4.cmml">_</mi><mo id="alg1.l10.m1.2.2.2.2.2.1b" xref="alg1.l10.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l10.m1.2.2.2.2.2.5" xref="alg1.l10.m1.2.2.2.2.2.5.cmml">f</mi><mo id="alg1.l10.m1.2.2.2.2.2.1c" xref="alg1.l10.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l10.m1.2.2.2.2.2.6" xref="alg1.l10.m1.2.2.2.2.2.6.cmml">b</mi></mrow><mo id="alg1.l10.m1.3.3.3.3.6" xref="alg1.l10.m1.3.3.3.4.cmml">,</mo><mrow id="alg1.l10.m1.3.3.3.3.3" xref="alg1.l10.m1.3.3.3.3.3.cmml"><mi id="alg1.l10.m1.3.3.3.3.3.2" xref="alg1.l10.m1.3.3.3.3.3.2.cmml">R</mi><mo id="alg1.l10.m1.3.3.3.3.3.1" xref="alg1.l10.m1.3.3.3.3.3.1.cmml">⁢</mo><mi id="alg1.l10.m1.3.3.3.3.3.3" xref="alg1.l10.m1.3.3.3.3.3.3.cmml">M</mi></mrow><mo id="alg1.l10.m1.3.3.3.3.7" stretchy="false" xref="alg1.l10.m1.3.3.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l10.m1.3b"><apply id="alg1.l10.m1.3.3.cmml" xref="alg1.l10.m1.3.3"><ci id="alg1.l10.m1.3.3.4.cmml" xref="alg1.l10.m1.3.3.4">←</ci><apply id="alg1.l10.m1.3.3.5.cmml" xref="alg1.l10.m1.3.3.5"><times id="alg1.l10.m1.3.3.5.1.cmml" xref="alg1.l10.m1.3.3.5.1"></times><ci id="alg1.l10.m1.3.3.5.2.cmml" xref="alg1.l10.m1.3.3.5.2">𝑒</ci><ci id="alg1.l10.m1.3.3.5.3.cmml" xref="alg1.l10.m1.3.3.5.3">𝑛</ci><ci id="alg1.l10.m1.3.3.5.4.cmml" xref="alg1.l10.m1.3.3.5.4">𝑣</ci><ci id="alg1.l10.m1.3.3.5.5.cmml" xref="alg1.l10.m1.3.3.5.5">_</ci><ci id="alg1.l10.m1.3.3.5.6.cmml" xref="alg1.l10.m1.3.3.5.6">𝑓</ci><ci id="alg1.l10.m1.3.3.5.7.cmml" xref="alg1.l10.m1.3.3.5.7">𝑏</ci></apply><set id="alg1.l10.m1.3.3.3.4.cmml" xref="alg1.l10.m1.3.3.3.3"><apply id="alg1.l10.m1.1.1.1.1.1.cmml" xref="alg1.l10.m1.1.1.1.1.1"><times id="alg1.l10.m1.1.1.1.1.1.1.cmml" xref="alg1.l10.m1.1.1.1.1.1.1"></times><ci id="alg1.l10.m1.1.1.1.1.1.2.cmml" xref="alg1.l10.m1.1.1.1.1.1.2">𝑘</ci><ci id="alg1.l10.m1.1.1.1.1.1.3.cmml" xref="alg1.l10.m1.1.1.1.1.1.3">𝑏</ci><ci id="alg1.l10.m1.1.1.1.1.1.4.cmml" xref="alg1.l10.m1.1.1.1.1.1.4">_</ci><ci id="alg1.l10.m1.1.1.1.1.1.5.cmml" xref="alg1.l10.m1.1.1.1.1.1.5">𝑓</ci><ci id="alg1.l10.m1.1.1.1.1.1.6.cmml" xref="alg1.l10.m1.1.1.1.1.1.6">𝑏</ci></apply><apply id="alg1.l10.m1.2.2.2.2.2.cmml" xref="alg1.l10.m1.2.2.2.2.2"><times id="alg1.l10.m1.2.2.2.2.2.1.cmml" xref="alg1.l10.m1.2.2.2.2.2.1"></times><ci id="alg1.l10.m1.2.2.2.2.2.2.cmml" xref="alg1.l10.m1.2.2.2.2.2.2">𝑝</ci><ci id="alg1.l10.m1.2.2.2.2.2.3.cmml" xref="alg1.l10.m1.2.2.2.2.2.3">𝑦</ci><ci id="alg1.l10.m1.2.2.2.2.2.4.cmml" xref="alg1.l10.m1.2.2.2.2.2.4">_</ci><ci id="alg1.l10.m1.2.2.2.2.2.5.cmml" xref="alg1.l10.m1.2.2.2.2.2.5">𝑓</ci><ci id="alg1.l10.m1.2.2.2.2.2.6.cmml" xref="alg1.l10.m1.2.2.2.2.2.6">𝑏</ci></apply><apply id="alg1.l10.m1.3.3.3.3.3.cmml" xref="alg1.l10.m1.3.3.3.3.3"><times id="alg1.l10.m1.3.3.3.3.3.1.cmml" xref="alg1.l10.m1.3.3.3.3.3.1"></times><ci id="alg1.l10.m1.3.3.3.3.3.2.cmml" xref="alg1.l10.m1.3.3.3.3.3.2">𝑅</ci><ci id="alg1.l10.m1.3.3.3.3.3.3.cmml" xref="alg1.l10.m1.3.3.3.3.3.3">𝑀</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l10.m1.3c">env\_fb\leftarrow\{kb\_fb,py\_fb,RM\}</annotation><annotation encoding="application/x-llamapun" id="alg1.l10.m1.3d">italic_e italic_n italic_v _ italic_f italic_b ← { italic_k italic_b _ italic_f italic_b , italic_p italic_y _ italic_f italic_b , italic_R italic_M }</annotation></semantics></math>; 
</div>
<div class="ltx_listingline" id="alg1.l11">
<span class="ltx_tag ltx_tag_listingline">11:</span>     <math alttext="error\leftarrow\textbf{Detect\_and\_Distinguish\_Err}(env\_fb)" class="ltx_Math" display="inline" id="alg1.l11.m1.1"><semantics id="alg1.l11.m1.1a"><mrow id="alg1.l11.m1.1.1" xref="alg1.l11.m1.1.1.cmml"><mrow id="alg1.l11.m1.1.1.3" xref="alg1.l11.m1.1.1.3.cmml"><mi id="alg1.l11.m1.1.1.3.2" xref="alg1.l11.m1.1.1.3.2.cmml">e</mi><mo id="alg1.l11.m1.1.1.3.1" xref="alg1.l11.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.3.3" xref="alg1.l11.m1.1.1.3.3.cmml">r</mi><mo id="alg1.l11.m1.1.1.3.1a" xref="alg1.l11.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.3.4" xref="alg1.l11.m1.1.1.3.4.cmml">r</mi><mo id="alg1.l11.m1.1.1.3.1b" xref="alg1.l11.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.3.5" xref="alg1.l11.m1.1.1.3.5.cmml">o</mi><mo id="alg1.l11.m1.1.1.3.1c" xref="alg1.l11.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.3.6" xref="alg1.l11.m1.1.1.3.6.cmml">r</mi></mrow><mo id="alg1.l11.m1.1.1.2" stretchy="false" xref="alg1.l11.m1.1.1.2.cmml">←</mo><mrow id="alg1.l11.m1.1.1.1" xref="alg1.l11.m1.1.1.1.cmml"><mtext id="alg1.l11.m1.1.1.1.3" mathvariant="bold" xref="alg1.l11.m1.1.1.1.3a.cmml">Detect_and_Distinguish_Err</mtext><mo id="alg1.l11.m1.1.1.1.2" xref="alg1.l11.m1.1.1.1.2.cmml">⁢</mo><mrow id="alg1.l11.m1.1.1.1.1.1" xref="alg1.l11.m1.1.1.1.1.1.1.cmml"><mo id="alg1.l11.m1.1.1.1.1.1.2" stretchy="false" xref="alg1.l11.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l11.m1.1.1.1.1.1.1" xref="alg1.l11.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l11.m1.1.1.1.1.1.1.2" xref="alg1.l11.m1.1.1.1.1.1.1.2.cmml">e</mi><mo id="alg1.l11.m1.1.1.1.1.1.1.1" xref="alg1.l11.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.1.1.1.1.3" xref="alg1.l11.m1.1.1.1.1.1.1.3.cmml">n</mi><mo id="alg1.l11.m1.1.1.1.1.1.1.1a" xref="alg1.l11.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.1.1.1.1.4" xref="alg1.l11.m1.1.1.1.1.1.1.4.cmml">v</mi><mo id="alg1.l11.m1.1.1.1.1.1.1.1b" xref="alg1.l11.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.1.1.1.1.5" mathvariant="normal" xref="alg1.l11.m1.1.1.1.1.1.1.5.cmml">_</mi><mo id="alg1.l11.m1.1.1.1.1.1.1.1c" xref="alg1.l11.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.1.1.1.1.6" xref="alg1.l11.m1.1.1.1.1.1.1.6.cmml">f</mi><mo id="alg1.l11.m1.1.1.1.1.1.1.1d" xref="alg1.l11.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.1.1.1.1.7" xref="alg1.l11.m1.1.1.1.1.1.1.7.cmml">b</mi></mrow><mo id="alg1.l11.m1.1.1.1.1.1.3" stretchy="false" xref="alg1.l11.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l11.m1.1b"><apply id="alg1.l11.m1.1.1.cmml" xref="alg1.l11.m1.1.1"><ci id="alg1.l11.m1.1.1.2.cmml" xref="alg1.l11.m1.1.1.2">←</ci><apply id="alg1.l11.m1.1.1.3.cmml" xref="alg1.l11.m1.1.1.3"><times id="alg1.l11.m1.1.1.3.1.cmml" xref="alg1.l11.m1.1.1.3.1"></times><ci id="alg1.l11.m1.1.1.3.2.cmml" xref="alg1.l11.m1.1.1.3.2">𝑒</ci><ci id="alg1.l11.m1.1.1.3.3.cmml" xref="alg1.l11.m1.1.1.3.3">𝑟</ci><ci id="alg1.l11.m1.1.1.3.4.cmml" xref="alg1.l11.m1.1.1.3.4">𝑟</ci><ci id="alg1.l11.m1.1.1.3.5.cmml" xref="alg1.l11.m1.1.1.3.5">𝑜</ci><ci id="alg1.l11.m1.1.1.3.6.cmml" xref="alg1.l11.m1.1.1.3.6">𝑟</ci></apply><apply id="alg1.l11.m1.1.1.1.cmml" xref="alg1.l11.m1.1.1.1"><times id="alg1.l11.m1.1.1.1.2.cmml" xref="alg1.l11.m1.1.1.1.2"></times><ci id="alg1.l11.m1.1.1.1.3a.cmml" xref="alg1.l11.m1.1.1.1.3"><mtext id="alg1.l11.m1.1.1.1.3.cmml" mathvariant="bold" xref="alg1.l11.m1.1.1.1.3">Detect_and_Distinguish_Err</mtext></ci><apply id="alg1.l11.m1.1.1.1.1.1.1.cmml" xref="alg1.l11.m1.1.1.1.1.1"><times id="alg1.l11.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l11.m1.1.1.1.1.1.1.1"></times><ci id="alg1.l11.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l11.m1.1.1.1.1.1.1.2">𝑒</ci><ci id="alg1.l11.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l11.m1.1.1.1.1.1.1.3">𝑛</ci><ci id="alg1.l11.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l11.m1.1.1.1.1.1.1.4">𝑣</ci><ci id="alg1.l11.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l11.m1.1.1.1.1.1.1.5">_</ci><ci id="alg1.l11.m1.1.1.1.1.1.1.6.cmml" xref="alg1.l11.m1.1.1.1.1.1.1.6">𝑓</ci><ci id="alg1.l11.m1.1.1.1.1.1.1.7.cmml" xref="alg1.l11.m1.1.1.1.1.1.1.7">𝑏</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l11.m1.1c">error\leftarrow\textbf{Detect\_and\_Distinguish\_Err}(env\_fb)</annotation><annotation encoding="application/x-llamapun" id="alg1.l11.m1.1d">italic_e italic_r italic_r italic_o italic_r ← Detect_and_Distinguish_Err ( italic_e italic_n italic_v _ italic_f italic_b )</annotation></semantics></math>; 
</div>
<div class="ltx_listingline" id="alg1.l12">
<span class="ltx_tag ltx_tag_listingline">12:</span>     <span class="ltx_text ltx_font_bold" id="alg1.l12.1">if</span> <math alttext="error" class="ltx_Math" display="inline" id="alg1.l12.m1.1"><semantics id="alg1.l12.m1.1a"><mrow id="alg1.l12.m1.1.1" xref="alg1.l12.m1.1.1.cmml"><mi id="alg1.l12.m1.1.1.2" xref="alg1.l12.m1.1.1.2.cmml">e</mi><mo id="alg1.l12.m1.1.1.1" xref="alg1.l12.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l12.m1.1.1.3" xref="alg1.l12.m1.1.1.3.cmml">r</mi><mo id="alg1.l12.m1.1.1.1a" xref="alg1.l12.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l12.m1.1.1.4" xref="alg1.l12.m1.1.1.4.cmml">r</mi><mo id="alg1.l12.m1.1.1.1b" xref="alg1.l12.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l12.m1.1.1.5" xref="alg1.l12.m1.1.1.5.cmml">o</mi><mo id="alg1.l12.m1.1.1.1c" xref="alg1.l12.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l12.m1.1.1.6" xref="alg1.l12.m1.1.1.6.cmml">r</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l12.m1.1b"><apply id="alg1.l12.m1.1.1.cmml" xref="alg1.l12.m1.1.1"><times id="alg1.l12.m1.1.1.1.cmml" xref="alg1.l12.m1.1.1.1"></times><ci id="alg1.l12.m1.1.1.2.cmml" xref="alg1.l12.m1.1.1.2">𝑒</ci><ci id="alg1.l12.m1.1.1.3.cmml" xref="alg1.l12.m1.1.1.3">𝑟</ci><ci id="alg1.l12.m1.1.1.4.cmml" xref="alg1.l12.m1.1.1.4">𝑟</ci><ci id="alg1.l12.m1.1.1.5.cmml" xref="alg1.l12.m1.1.1.5">𝑜</ci><ci id="alg1.l12.m1.1.1.6.cmml" xref="alg1.l12.m1.1.1.6">𝑟</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l12.m1.1c">error</annotation><annotation encoding="application/x-llamapun" id="alg1.l12.m1.1d">italic_e italic_r italic_r italic_o italic_r</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l12.2">then</span>
</div>
<div class="ltx_listingline" id="alg1.l13">
<span class="ltx_tag ltx_tag_listingline">13:</span>        <math alttext="guideline\leftarrow\textbf{Get\_Guideline}(error)" class="ltx_Math" display="inline" id="alg1.l13.m1.1"><semantics id="alg1.l13.m1.1a"><mrow id="alg1.l13.m1.1.1" xref="alg1.l13.m1.1.1.cmml"><mrow id="alg1.l13.m1.1.1.3" xref="alg1.l13.m1.1.1.3.cmml"><mi id="alg1.l13.m1.1.1.3.2" xref="alg1.l13.m1.1.1.3.2.cmml">g</mi><mo id="alg1.l13.m1.1.1.3.1" xref="alg1.l13.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.3.3" xref="alg1.l13.m1.1.1.3.3.cmml">u</mi><mo id="alg1.l13.m1.1.1.3.1a" xref="alg1.l13.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.3.4" xref="alg1.l13.m1.1.1.3.4.cmml">i</mi><mo id="alg1.l13.m1.1.1.3.1b" xref="alg1.l13.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.3.5" xref="alg1.l13.m1.1.1.3.5.cmml">d</mi><mo id="alg1.l13.m1.1.1.3.1c" xref="alg1.l13.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.3.6" xref="alg1.l13.m1.1.1.3.6.cmml">e</mi><mo id="alg1.l13.m1.1.1.3.1d" xref="alg1.l13.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.3.7" xref="alg1.l13.m1.1.1.3.7.cmml">l</mi><mo id="alg1.l13.m1.1.1.3.1e" xref="alg1.l13.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.3.8" xref="alg1.l13.m1.1.1.3.8.cmml">i</mi><mo id="alg1.l13.m1.1.1.3.1f" xref="alg1.l13.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.3.9" xref="alg1.l13.m1.1.1.3.9.cmml">n</mi><mo id="alg1.l13.m1.1.1.3.1g" xref="alg1.l13.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.3.10" xref="alg1.l13.m1.1.1.3.10.cmml">e</mi></mrow><mo id="alg1.l13.m1.1.1.2" stretchy="false" xref="alg1.l13.m1.1.1.2.cmml">←</mo><mrow id="alg1.l13.m1.1.1.1" xref="alg1.l13.m1.1.1.1.cmml"><mtext id="alg1.l13.m1.1.1.1.3" mathvariant="bold" xref="alg1.l13.m1.1.1.1.3a.cmml">Get_Guideline</mtext><mo id="alg1.l13.m1.1.1.1.2" xref="alg1.l13.m1.1.1.1.2.cmml">⁢</mo><mrow id="alg1.l13.m1.1.1.1.1.1" xref="alg1.l13.m1.1.1.1.1.1.1.cmml"><mo id="alg1.l13.m1.1.1.1.1.1.2" stretchy="false" xref="alg1.l13.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l13.m1.1.1.1.1.1.1" xref="alg1.l13.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l13.m1.1.1.1.1.1.1.2" xref="alg1.l13.m1.1.1.1.1.1.1.2.cmml">e</mi><mo id="alg1.l13.m1.1.1.1.1.1.1.1" xref="alg1.l13.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.1.1.1.1.3" xref="alg1.l13.m1.1.1.1.1.1.1.3.cmml">r</mi><mo id="alg1.l13.m1.1.1.1.1.1.1.1a" xref="alg1.l13.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.1.1.1.1.4" xref="alg1.l13.m1.1.1.1.1.1.1.4.cmml">r</mi><mo id="alg1.l13.m1.1.1.1.1.1.1.1b" xref="alg1.l13.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.1.1.1.1.5" xref="alg1.l13.m1.1.1.1.1.1.1.5.cmml">o</mi><mo id="alg1.l13.m1.1.1.1.1.1.1.1c" xref="alg1.l13.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.1.1.1.1.6" xref="alg1.l13.m1.1.1.1.1.1.1.6.cmml">r</mi></mrow><mo id="alg1.l13.m1.1.1.1.1.1.3" stretchy="false" xref="alg1.l13.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l13.m1.1b"><apply id="alg1.l13.m1.1.1.cmml" xref="alg1.l13.m1.1.1"><ci id="alg1.l13.m1.1.1.2.cmml" xref="alg1.l13.m1.1.1.2">←</ci><apply id="alg1.l13.m1.1.1.3.cmml" xref="alg1.l13.m1.1.1.3"><times id="alg1.l13.m1.1.1.3.1.cmml" xref="alg1.l13.m1.1.1.3.1"></times><ci id="alg1.l13.m1.1.1.3.2.cmml" xref="alg1.l13.m1.1.1.3.2">𝑔</ci><ci id="alg1.l13.m1.1.1.3.3.cmml" xref="alg1.l13.m1.1.1.3.3">𝑢</ci><ci id="alg1.l13.m1.1.1.3.4.cmml" xref="alg1.l13.m1.1.1.3.4">𝑖</ci><ci id="alg1.l13.m1.1.1.3.5.cmml" xref="alg1.l13.m1.1.1.3.5">𝑑</ci><ci id="alg1.l13.m1.1.1.3.6.cmml" xref="alg1.l13.m1.1.1.3.6">𝑒</ci><ci id="alg1.l13.m1.1.1.3.7.cmml" xref="alg1.l13.m1.1.1.3.7">𝑙</ci><ci id="alg1.l13.m1.1.1.3.8.cmml" xref="alg1.l13.m1.1.1.3.8">𝑖</ci><ci id="alg1.l13.m1.1.1.3.9.cmml" xref="alg1.l13.m1.1.1.3.9">𝑛</ci><ci id="alg1.l13.m1.1.1.3.10.cmml" xref="alg1.l13.m1.1.1.3.10">𝑒</ci></apply><apply id="alg1.l13.m1.1.1.1.cmml" xref="alg1.l13.m1.1.1.1"><times id="alg1.l13.m1.1.1.1.2.cmml" xref="alg1.l13.m1.1.1.1.2"></times><ci id="alg1.l13.m1.1.1.1.3a.cmml" xref="alg1.l13.m1.1.1.1.3"><mtext id="alg1.l13.m1.1.1.1.3.cmml" mathvariant="bold" xref="alg1.l13.m1.1.1.1.3">Get_Guideline</mtext></ci><apply id="alg1.l13.m1.1.1.1.1.1.1.cmml" xref="alg1.l13.m1.1.1.1.1.1"><times id="alg1.l13.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l13.m1.1.1.1.1.1.1.1"></times><ci id="alg1.l13.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l13.m1.1.1.1.1.1.1.2">𝑒</ci><ci id="alg1.l13.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l13.m1.1.1.1.1.1.1.3">𝑟</ci><ci id="alg1.l13.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l13.m1.1.1.1.1.1.1.4">𝑟</ci><ci id="alg1.l13.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l13.m1.1.1.1.1.1.1.5">𝑜</ci><ci id="alg1.l13.m1.1.1.1.1.1.1.6.cmml" xref="alg1.l13.m1.1.1.1.1.1.1.6">𝑟</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l13.m1.1c">guideline\leftarrow\textbf{Get\_Guideline}(error)</annotation><annotation encoding="application/x-llamapun" id="alg1.l13.m1.1d">italic_g italic_u italic_i italic_d italic_e italic_l italic_i italic_n italic_e ← Get_Guideline ( italic_e italic_r italic_r italic_o italic_r )</annotation></semantics></math>; 
</div>
<div class="ltx_listingline" id="alg1.l14">
<span class="ltx_tag ltx_tag_listingline">14:</span>        <math alttext="obs\leftarrow guideline" class="ltx_Math" display="inline" id="alg1.l14.m1.1"><semantics id="alg1.l14.m1.1a"><mrow id="alg1.l14.m1.1.1" xref="alg1.l14.m1.1.1.cmml"><mrow id="alg1.l14.m1.1.1.2" xref="alg1.l14.m1.1.1.2.cmml"><mi id="alg1.l14.m1.1.1.2.2" xref="alg1.l14.m1.1.1.2.2.cmml">o</mi><mo id="alg1.l14.m1.1.1.2.1" xref="alg1.l14.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.2.3" xref="alg1.l14.m1.1.1.2.3.cmml">b</mi><mo id="alg1.l14.m1.1.1.2.1a" xref="alg1.l14.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.2.4" xref="alg1.l14.m1.1.1.2.4.cmml">s</mi></mrow><mo id="alg1.l14.m1.1.1.1" stretchy="false" xref="alg1.l14.m1.1.1.1.cmml">←</mo><mrow id="alg1.l14.m1.1.1.3" xref="alg1.l14.m1.1.1.3.cmml"><mi id="alg1.l14.m1.1.1.3.2" xref="alg1.l14.m1.1.1.3.2.cmml">g</mi><mo id="alg1.l14.m1.1.1.3.1" xref="alg1.l14.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.3.3" xref="alg1.l14.m1.1.1.3.3.cmml">u</mi><mo id="alg1.l14.m1.1.1.3.1a" xref="alg1.l14.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.3.4" xref="alg1.l14.m1.1.1.3.4.cmml">i</mi><mo id="alg1.l14.m1.1.1.3.1b" xref="alg1.l14.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.3.5" xref="alg1.l14.m1.1.1.3.5.cmml">d</mi><mo id="alg1.l14.m1.1.1.3.1c" xref="alg1.l14.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.3.6" xref="alg1.l14.m1.1.1.3.6.cmml">e</mi><mo id="alg1.l14.m1.1.1.3.1d" xref="alg1.l14.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.3.7" xref="alg1.l14.m1.1.1.3.7.cmml">l</mi><mo id="alg1.l14.m1.1.1.3.1e" xref="alg1.l14.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.3.8" xref="alg1.l14.m1.1.1.3.8.cmml">i</mi><mo id="alg1.l14.m1.1.1.3.1f" xref="alg1.l14.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.3.9" xref="alg1.l14.m1.1.1.3.9.cmml">n</mi><mo id="alg1.l14.m1.1.1.3.1g" xref="alg1.l14.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.3.10" xref="alg1.l14.m1.1.1.3.10.cmml">e</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l14.m1.1b"><apply id="alg1.l14.m1.1.1.cmml" xref="alg1.l14.m1.1.1"><ci id="alg1.l14.m1.1.1.1.cmml" xref="alg1.l14.m1.1.1.1">←</ci><apply id="alg1.l14.m1.1.1.2.cmml" xref="alg1.l14.m1.1.1.2"><times id="alg1.l14.m1.1.1.2.1.cmml" xref="alg1.l14.m1.1.1.2.1"></times><ci id="alg1.l14.m1.1.1.2.2.cmml" xref="alg1.l14.m1.1.1.2.2">𝑜</ci><ci id="alg1.l14.m1.1.1.2.3.cmml" xref="alg1.l14.m1.1.1.2.3">𝑏</ci><ci id="alg1.l14.m1.1.1.2.4.cmml" xref="alg1.l14.m1.1.1.2.4">𝑠</ci></apply><apply id="alg1.l14.m1.1.1.3.cmml" xref="alg1.l14.m1.1.1.3"><times id="alg1.l14.m1.1.1.3.1.cmml" xref="alg1.l14.m1.1.1.3.1"></times><ci id="alg1.l14.m1.1.1.3.2.cmml" xref="alg1.l14.m1.1.1.3.2">𝑔</ci><ci id="alg1.l14.m1.1.1.3.3.cmml" xref="alg1.l14.m1.1.1.3.3">𝑢</ci><ci id="alg1.l14.m1.1.1.3.4.cmml" xref="alg1.l14.m1.1.1.3.4">𝑖</ci><ci id="alg1.l14.m1.1.1.3.5.cmml" xref="alg1.l14.m1.1.1.3.5">𝑑</ci><ci id="alg1.l14.m1.1.1.3.6.cmml" xref="alg1.l14.m1.1.1.3.6">𝑒</ci><ci id="alg1.l14.m1.1.1.3.7.cmml" xref="alg1.l14.m1.1.1.3.7">𝑙</ci><ci id="alg1.l14.m1.1.1.3.8.cmml" xref="alg1.l14.m1.1.1.3.8">𝑖</ci><ci id="alg1.l14.m1.1.1.3.9.cmml" xref="alg1.l14.m1.1.1.3.9">𝑛</ci><ci id="alg1.l14.m1.1.1.3.10.cmml" xref="alg1.l14.m1.1.1.3.10">𝑒</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l14.m1.1c">obs\leftarrow guideline</annotation><annotation encoding="application/x-llamapun" id="alg1.l14.m1.1d">italic_o italic_b italic_s ← italic_g italic_u italic_i italic_d italic_e italic_l italic_i italic_n italic_e</annotation></semantics></math>; 
</div>
<div class="ltx_listingline" id="alg1.l15">
<span class="ltx_tag ltx_tag_listingline">15:</span>        <math alttext="RM\leftarrow RM-\{current\_info\}" class="ltx_Math" display="inline" id="alg1.l15.m1.1"><semantics id="alg1.l15.m1.1a"><mrow id="alg1.l15.m1.1.1" xref="alg1.l15.m1.1.1.cmml"><mrow id="alg1.l15.m1.1.1.3" xref="alg1.l15.m1.1.1.3.cmml"><mi id="alg1.l15.m1.1.1.3.2" xref="alg1.l15.m1.1.1.3.2.cmml">R</mi><mo id="alg1.l15.m1.1.1.3.1" xref="alg1.l15.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.3.3" xref="alg1.l15.m1.1.1.3.3.cmml">M</mi></mrow><mo id="alg1.l15.m1.1.1.2" stretchy="false" xref="alg1.l15.m1.1.1.2.cmml">←</mo><mrow id="alg1.l15.m1.1.1.1" xref="alg1.l15.m1.1.1.1.cmml"><mrow id="alg1.l15.m1.1.1.1.3" xref="alg1.l15.m1.1.1.1.3.cmml"><mi id="alg1.l15.m1.1.1.1.3.2" xref="alg1.l15.m1.1.1.1.3.2.cmml">R</mi><mo id="alg1.l15.m1.1.1.1.3.1" xref="alg1.l15.m1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.1.3.3" xref="alg1.l15.m1.1.1.1.3.3.cmml">M</mi></mrow><mo id="alg1.l15.m1.1.1.1.2" xref="alg1.l15.m1.1.1.1.2.cmml">−</mo><mrow id="alg1.l15.m1.1.1.1.1.1" xref="alg1.l15.m1.1.1.1.1.2.cmml"><mo id="alg1.l15.m1.1.1.1.1.1.2" stretchy="false" xref="alg1.l15.m1.1.1.1.1.2.cmml">{</mo><mrow id="alg1.l15.m1.1.1.1.1.1.1" xref="alg1.l15.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l15.m1.1.1.1.1.1.1.2" xref="alg1.l15.m1.1.1.1.1.1.1.2.cmml">c</mi><mo id="alg1.l15.m1.1.1.1.1.1.1.1" xref="alg1.l15.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.1.1.1.1.3" xref="alg1.l15.m1.1.1.1.1.1.1.3.cmml">u</mi><mo id="alg1.l15.m1.1.1.1.1.1.1.1a" xref="alg1.l15.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.1.1.1.1.4" xref="alg1.l15.m1.1.1.1.1.1.1.4.cmml">r</mi><mo id="alg1.l15.m1.1.1.1.1.1.1.1b" xref="alg1.l15.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.1.1.1.1.5" xref="alg1.l15.m1.1.1.1.1.1.1.5.cmml">r</mi><mo id="alg1.l15.m1.1.1.1.1.1.1.1c" xref="alg1.l15.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.1.1.1.1.6" xref="alg1.l15.m1.1.1.1.1.1.1.6.cmml">e</mi><mo id="alg1.l15.m1.1.1.1.1.1.1.1d" xref="alg1.l15.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.1.1.1.1.7" xref="alg1.l15.m1.1.1.1.1.1.1.7.cmml">n</mi><mo id="alg1.l15.m1.1.1.1.1.1.1.1e" xref="alg1.l15.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.1.1.1.1.8" xref="alg1.l15.m1.1.1.1.1.1.1.8.cmml">t</mi><mo id="alg1.l15.m1.1.1.1.1.1.1.1f" xref="alg1.l15.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.1.1.1.1.9" mathvariant="normal" xref="alg1.l15.m1.1.1.1.1.1.1.9.cmml">_</mi><mo id="alg1.l15.m1.1.1.1.1.1.1.1g" xref="alg1.l15.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.1.1.1.1.10" xref="alg1.l15.m1.1.1.1.1.1.1.10.cmml">i</mi><mo id="alg1.l15.m1.1.1.1.1.1.1.1h" xref="alg1.l15.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.1.1.1.1.11" xref="alg1.l15.m1.1.1.1.1.1.1.11.cmml">n</mi><mo id="alg1.l15.m1.1.1.1.1.1.1.1i" xref="alg1.l15.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.1.1.1.1.12" xref="alg1.l15.m1.1.1.1.1.1.1.12.cmml">f</mi><mo id="alg1.l15.m1.1.1.1.1.1.1.1j" xref="alg1.l15.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.1.1.1.1.13" xref="alg1.l15.m1.1.1.1.1.1.1.13.cmml">o</mi></mrow><mo id="alg1.l15.m1.1.1.1.1.1.3" stretchy="false" xref="alg1.l15.m1.1.1.1.1.2.cmml">}</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l15.m1.1b"><apply id="alg1.l15.m1.1.1.cmml" xref="alg1.l15.m1.1.1"><ci id="alg1.l15.m1.1.1.2.cmml" xref="alg1.l15.m1.1.1.2">←</ci><apply id="alg1.l15.m1.1.1.3.cmml" xref="alg1.l15.m1.1.1.3"><times id="alg1.l15.m1.1.1.3.1.cmml" xref="alg1.l15.m1.1.1.3.1"></times><ci id="alg1.l15.m1.1.1.3.2.cmml" xref="alg1.l15.m1.1.1.3.2">𝑅</ci><ci id="alg1.l15.m1.1.1.3.3.cmml" xref="alg1.l15.m1.1.1.3.3">𝑀</ci></apply><apply id="alg1.l15.m1.1.1.1.cmml" xref="alg1.l15.m1.1.1.1"><minus id="alg1.l15.m1.1.1.1.2.cmml" xref="alg1.l15.m1.1.1.1.2"></minus><apply id="alg1.l15.m1.1.1.1.3.cmml" xref="alg1.l15.m1.1.1.1.3"><times id="alg1.l15.m1.1.1.1.3.1.cmml" xref="alg1.l15.m1.1.1.1.3.1"></times><ci id="alg1.l15.m1.1.1.1.3.2.cmml" xref="alg1.l15.m1.1.1.1.3.2">𝑅</ci><ci id="alg1.l15.m1.1.1.1.3.3.cmml" xref="alg1.l15.m1.1.1.1.3.3">𝑀</ci></apply><set id="alg1.l15.m1.1.1.1.1.2.cmml" xref="alg1.l15.m1.1.1.1.1.1"><apply id="alg1.l15.m1.1.1.1.1.1.1.cmml" xref="alg1.l15.m1.1.1.1.1.1.1"><times id="alg1.l15.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l15.m1.1.1.1.1.1.1.1"></times><ci id="alg1.l15.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l15.m1.1.1.1.1.1.1.2">𝑐</ci><ci id="alg1.l15.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l15.m1.1.1.1.1.1.1.3">𝑢</ci><ci id="alg1.l15.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l15.m1.1.1.1.1.1.1.4">𝑟</ci><ci id="alg1.l15.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l15.m1.1.1.1.1.1.1.5">𝑟</ci><ci id="alg1.l15.m1.1.1.1.1.1.1.6.cmml" xref="alg1.l15.m1.1.1.1.1.1.1.6">𝑒</ci><ci id="alg1.l15.m1.1.1.1.1.1.1.7.cmml" xref="alg1.l15.m1.1.1.1.1.1.1.7">𝑛</ci><ci id="alg1.l15.m1.1.1.1.1.1.1.8.cmml" xref="alg1.l15.m1.1.1.1.1.1.1.8">𝑡</ci><ci id="alg1.l15.m1.1.1.1.1.1.1.9.cmml" xref="alg1.l15.m1.1.1.1.1.1.1.9">_</ci><ci id="alg1.l15.m1.1.1.1.1.1.1.10.cmml" xref="alg1.l15.m1.1.1.1.1.1.1.10">𝑖</ci><ci id="alg1.l15.m1.1.1.1.1.1.1.11.cmml" xref="alg1.l15.m1.1.1.1.1.1.1.11">𝑛</ci><ci id="alg1.l15.m1.1.1.1.1.1.1.12.cmml" xref="alg1.l15.m1.1.1.1.1.1.1.12">𝑓</ci><ci id="alg1.l15.m1.1.1.1.1.1.1.13.cmml" xref="alg1.l15.m1.1.1.1.1.1.1.13">𝑜</ci></apply></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l15.m1.1c">RM\leftarrow RM-\{current\_info\}</annotation><annotation encoding="application/x-llamapun" id="alg1.l15.m1.1d">italic_R italic_M ← italic_R italic_M - { italic_c italic_u italic_r italic_r italic_e italic_n italic_t _ italic_i italic_n italic_f italic_o }</annotation></semantics></math>; 
</div>
<div class="ltx_listingline" id="alg1.l16">
<span class="ltx_tag ltx_tag_listingline">16:</span>     <span class="ltx_text ltx_font_bold" id="alg1.l16.1">else</span>
</div>
<div class="ltx_listingline" id="alg1.l17">
<span class="ltx_tag ltx_tag_listingline">17:</span>        <math alttext="execution\_result\leftarrow kb\_fb" class="ltx_Math" display="inline" id="alg1.l17.m1.1"><semantics id="alg1.l17.m1.1a"><mrow id="alg1.l17.m1.1.1" xref="alg1.l17.m1.1.1.cmml"><mrow id="alg1.l17.m1.1.1.2" xref="alg1.l17.m1.1.1.2.cmml"><mi id="alg1.l17.m1.1.1.2.2" xref="alg1.l17.m1.1.1.2.2.cmml">e</mi><mo id="alg1.l17.m1.1.1.2.1" xref="alg1.l17.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.2.3" xref="alg1.l17.m1.1.1.2.3.cmml">x</mi><mo id="alg1.l17.m1.1.1.2.1a" xref="alg1.l17.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.2.4" xref="alg1.l17.m1.1.1.2.4.cmml">e</mi><mo id="alg1.l17.m1.1.1.2.1b" xref="alg1.l17.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.2.5" xref="alg1.l17.m1.1.1.2.5.cmml">c</mi><mo id="alg1.l17.m1.1.1.2.1c" xref="alg1.l17.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.2.6" xref="alg1.l17.m1.1.1.2.6.cmml">u</mi><mo id="alg1.l17.m1.1.1.2.1d" xref="alg1.l17.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.2.7" xref="alg1.l17.m1.1.1.2.7.cmml">t</mi><mo id="alg1.l17.m1.1.1.2.1e" xref="alg1.l17.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.2.8" xref="alg1.l17.m1.1.1.2.8.cmml">i</mi><mo id="alg1.l17.m1.1.1.2.1f" xref="alg1.l17.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.2.9" xref="alg1.l17.m1.1.1.2.9.cmml">o</mi><mo id="alg1.l17.m1.1.1.2.1g" xref="alg1.l17.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.2.10" xref="alg1.l17.m1.1.1.2.10.cmml">n</mi><mo id="alg1.l17.m1.1.1.2.1h" xref="alg1.l17.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.2.11" mathvariant="normal" xref="alg1.l17.m1.1.1.2.11.cmml">_</mi><mo id="alg1.l17.m1.1.1.2.1i" xref="alg1.l17.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.2.12" xref="alg1.l17.m1.1.1.2.12.cmml">r</mi><mo id="alg1.l17.m1.1.1.2.1j" xref="alg1.l17.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.2.13" xref="alg1.l17.m1.1.1.2.13.cmml">e</mi><mo id="alg1.l17.m1.1.1.2.1k" xref="alg1.l17.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.2.14" xref="alg1.l17.m1.1.1.2.14.cmml">s</mi><mo id="alg1.l17.m1.1.1.2.1l" xref="alg1.l17.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.2.15" xref="alg1.l17.m1.1.1.2.15.cmml">u</mi><mo id="alg1.l17.m1.1.1.2.1m" xref="alg1.l17.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.2.16" xref="alg1.l17.m1.1.1.2.16.cmml">l</mi><mo id="alg1.l17.m1.1.1.2.1n" xref="alg1.l17.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.2.17" xref="alg1.l17.m1.1.1.2.17.cmml">t</mi></mrow><mo id="alg1.l17.m1.1.1.1" stretchy="false" xref="alg1.l17.m1.1.1.1.cmml">←</mo><mrow id="alg1.l17.m1.1.1.3" xref="alg1.l17.m1.1.1.3.cmml"><mi id="alg1.l17.m1.1.1.3.2" xref="alg1.l17.m1.1.1.3.2.cmml">k</mi><mo id="alg1.l17.m1.1.1.3.1" xref="alg1.l17.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.3.3" xref="alg1.l17.m1.1.1.3.3.cmml">b</mi><mo id="alg1.l17.m1.1.1.3.1a" xref="alg1.l17.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.3.4" mathvariant="normal" xref="alg1.l17.m1.1.1.3.4.cmml">_</mi><mo id="alg1.l17.m1.1.1.3.1b" xref="alg1.l17.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.3.5" xref="alg1.l17.m1.1.1.3.5.cmml">f</mi><mo id="alg1.l17.m1.1.1.3.1c" xref="alg1.l17.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.3.6" xref="alg1.l17.m1.1.1.3.6.cmml">b</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l17.m1.1b"><apply id="alg1.l17.m1.1.1.cmml" xref="alg1.l17.m1.1.1"><ci id="alg1.l17.m1.1.1.1.cmml" xref="alg1.l17.m1.1.1.1">←</ci><apply id="alg1.l17.m1.1.1.2.cmml" xref="alg1.l17.m1.1.1.2"><times id="alg1.l17.m1.1.1.2.1.cmml" xref="alg1.l17.m1.1.1.2.1"></times><ci id="alg1.l17.m1.1.1.2.2.cmml" xref="alg1.l17.m1.1.1.2.2">𝑒</ci><ci id="alg1.l17.m1.1.1.2.3.cmml" xref="alg1.l17.m1.1.1.2.3">𝑥</ci><ci id="alg1.l17.m1.1.1.2.4.cmml" xref="alg1.l17.m1.1.1.2.4">𝑒</ci><ci id="alg1.l17.m1.1.1.2.5.cmml" xref="alg1.l17.m1.1.1.2.5">𝑐</ci><ci id="alg1.l17.m1.1.1.2.6.cmml" xref="alg1.l17.m1.1.1.2.6">𝑢</ci><ci id="alg1.l17.m1.1.1.2.7.cmml" xref="alg1.l17.m1.1.1.2.7">𝑡</ci><ci id="alg1.l17.m1.1.1.2.8.cmml" xref="alg1.l17.m1.1.1.2.8">𝑖</ci><ci id="alg1.l17.m1.1.1.2.9.cmml" xref="alg1.l17.m1.1.1.2.9">𝑜</ci><ci id="alg1.l17.m1.1.1.2.10.cmml" xref="alg1.l17.m1.1.1.2.10">𝑛</ci><ci id="alg1.l17.m1.1.1.2.11.cmml" xref="alg1.l17.m1.1.1.2.11">_</ci><ci id="alg1.l17.m1.1.1.2.12.cmml" xref="alg1.l17.m1.1.1.2.12">𝑟</ci><ci id="alg1.l17.m1.1.1.2.13.cmml" xref="alg1.l17.m1.1.1.2.13">𝑒</ci><ci id="alg1.l17.m1.1.1.2.14.cmml" xref="alg1.l17.m1.1.1.2.14">𝑠</ci><ci id="alg1.l17.m1.1.1.2.15.cmml" xref="alg1.l17.m1.1.1.2.15">𝑢</ci><ci id="alg1.l17.m1.1.1.2.16.cmml" xref="alg1.l17.m1.1.1.2.16">𝑙</ci><ci id="alg1.l17.m1.1.1.2.17.cmml" xref="alg1.l17.m1.1.1.2.17">𝑡</ci></apply><apply id="alg1.l17.m1.1.1.3.cmml" xref="alg1.l17.m1.1.1.3"><times id="alg1.l17.m1.1.1.3.1.cmml" xref="alg1.l17.m1.1.1.3.1"></times><ci id="alg1.l17.m1.1.1.3.2.cmml" xref="alg1.l17.m1.1.1.3.2">𝑘</ci><ci id="alg1.l17.m1.1.1.3.3.cmml" xref="alg1.l17.m1.1.1.3.3">𝑏</ci><ci id="alg1.l17.m1.1.1.3.4.cmml" xref="alg1.l17.m1.1.1.3.4">_</ci><ci id="alg1.l17.m1.1.1.3.5.cmml" xref="alg1.l17.m1.1.1.3.5">𝑓</ci><ci id="alg1.l17.m1.1.1.3.6.cmml" xref="alg1.l17.m1.1.1.3.6">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l17.m1.1c">execution\_result\leftarrow kb\_fb</annotation><annotation encoding="application/x-llamapun" id="alg1.l17.m1.1d">italic_e italic_x italic_e italic_c italic_u italic_t italic_i italic_o italic_n _ italic_r italic_e italic_s italic_u italic_l italic_t ← italic_k italic_b _ italic_f italic_b</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l18">
<span class="ltx_tag ltx_tag_listingline">18:</span>        <math alttext="obs\leftarrow execution\_result" class="ltx_Math" display="inline" id="alg1.l18.m1.1"><semantics id="alg1.l18.m1.1a"><mrow id="alg1.l18.m1.1.1" xref="alg1.l18.m1.1.1.cmml"><mrow id="alg1.l18.m1.1.1.2" xref="alg1.l18.m1.1.1.2.cmml"><mi id="alg1.l18.m1.1.1.2.2" xref="alg1.l18.m1.1.1.2.2.cmml">o</mi><mo id="alg1.l18.m1.1.1.2.1" xref="alg1.l18.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.2.3" xref="alg1.l18.m1.1.1.2.3.cmml">b</mi><mo id="alg1.l18.m1.1.1.2.1a" xref="alg1.l18.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.2.4" xref="alg1.l18.m1.1.1.2.4.cmml">s</mi></mrow><mo id="alg1.l18.m1.1.1.1" stretchy="false" xref="alg1.l18.m1.1.1.1.cmml">←</mo><mrow id="alg1.l18.m1.1.1.3" xref="alg1.l18.m1.1.1.3.cmml"><mi id="alg1.l18.m1.1.1.3.2" xref="alg1.l18.m1.1.1.3.2.cmml">e</mi><mo id="alg1.l18.m1.1.1.3.1" xref="alg1.l18.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.3.3" xref="alg1.l18.m1.1.1.3.3.cmml">x</mi><mo id="alg1.l18.m1.1.1.3.1a" xref="alg1.l18.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.3.4" xref="alg1.l18.m1.1.1.3.4.cmml">e</mi><mo id="alg1.l18.m1.1.1.3.1b" xref="alg1.l18.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.3.5" xref="alg1.l18.m1.1.1.3.5.cmml">c</mi><mo id="alg1.l18.m1.1.1.3.1c" xref="alg1.l18.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.3.6" xref="alg1.l18.m1.1.1.3.6.cmml">u</mi><mo id="alg1.l18.m1.1.1.3.1d" xref="alg1.l18.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.3.7" xref="alg1.l18.m1.1.1.3.7.cmml">t</mi><mo id="alg1.l18.m1.1.1.3.1e" xref="alg1.l18.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.3.8" xref="alg1.l18.m1.1.1.3.8.cmml">i</mi><mo id="alg1.l18.m1.1.1.3.1f" xref="alg1.l18.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.3.9" xref="alg1.l18.m1.1.1.3.9.cmml">o</mi><mo id="alg1.l18.m1.1.1.3.1g" xref="alg1.l18.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.3.10" xref="alg1.l18.m1.1.1.3.10.cmml">n</mi><mo id="alg1.l18.m1.1.1.3.1h" xref="alg1.l18.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.3.11" mathvariant="normal" xref="alg1.l18.m1.1.1.3.11.cmml">_</mi><mo id="alg1.l18.m1.1.1.3.1i" xref="alg1.l18.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.3.12" xref="alg1.l18.m1.1.1.3.12.cmml">r</mi><mo id="alg1.l18.m1.1.1.3.1j" xref="alg1.l18.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.3.13" xref="alg1.l18.m1.1.1.3.13.cmml">e</mi><mo id="alg1.l18.m1.1.1.3.1k" xref="alg1.l18.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.3.14" xref="alg1.l18.m1.1.1.3.14.cmml">s</mi><mo id="alg1.l18.m1.1.1.3.1l" xref="alg1.l18.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.3.15" xref="alg1.l18.m1.1.1.3.15.cmml">u</mi><mo id="alg1.l18.m1.1.1.3.1m" xref="alg1.l18.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.3.16" xref="alg1.l18.m1.1.1.3.16.cmml">l</mi><mo id="alg1.l18.m1.1.1.3.1n" xref="alg1.l18.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.3.17" xref="alg1.l18.m1.1.1.3.17.cmml">t</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l18.m1.1b"><apply id="alg1.l18.m1.1.1.cmml" xref="alg1.l18.m1.1.1"><ci id="alg1.l18.m1.1.1.1.cmml" xref="alg1.l18.m1.1.1.1">←</ci><apply id="alg1.l18.m1.1.1.2.cmml" xref="alg1.l18.m1.1.1.2"><times id="alg1.l18.m1.1.1.2.1.cmml" xref="alg1.l18.m1.1.1.2.1"></times><ci id="alg1.l18.m1.1.1.2.2.cmml" xref="alg1.l18.m1.1.1.2.2">𝑜</ci><ci id="alg1.l18.m1.1.1.2.3.cmml" xref="alg1.l18.m1.1.1.2.3">𝑏</ci><ci id="alg1.l18.m1.1.1.2.4.cmml" xref="alg1.l18.m1.1.1.2.4">𝑠</ci></apply><apply id="alg1.l18.m1.1.1.3.cmml" xref="alg1.l18.m1.1.1.3"><times id="alg1.l18.m1.1.1.3.1.cmml" xref="alg1.l18.m1.1.1.3.1"></times><ci id="alg1.l18.m1.1.1.3.2.cmml" xref="alg1.l18.m1.1.1.3.2">𝑒</ci><ci id="alg1.l18.m1.1.1.3.3.cmml" xref="alg1.l18.m1.1.1.3.3">𝑥</ci><ci id="alg1.l18.m1.1.1.3.4.cmml" xref="alg1.l18.m1.1.1.3.4">𝑒</ci><ci id="alg1.l18.m1.1.1.3.5.cmml" xref="alg1.l18.m1.1.1.3.5">𝑐</ci><ci id="alg1.l18.m1.1.1.3.6.cmml" xref="alg1.l18.m1.1.1.3.6">𝑢</ci><ci id="alg1.l18.m1.1.1.3.7.cmml" xref="alg1.l18.m1.1.1.3.7">𝑡</ci><ci id="alg1.l18.m1.1.1.3.8.cmml" xref="alg1.l18.m1.1.1.3.8">𝑖</ci><ci id="alg1.l18.m1.1.1.3.9.cmml" xref="alg1.l18.m1.1.1.3.9">𝑜</ci><ci id="alg1.l18.m1.1.1.3.10.cmml" xref="alg1.l18.m1.1.1.3.10">𝑛</ci><ci id="alg1.l18.m1.1.1.3.11.cmml" xref="alg1.l18.m1.1.1.3.11">_</ci><ci id="alg1.l18.m1.1.1.3.12.cmml" xref="alg1.l18.m1.1.1.3.12">𝑟</ci><ci id="alg1.l18.m1.1.1.3.13.cmml" xref="alg1.l18.m1.1.1.3.13">𝑒</ci><ci id="alg1.l18.m1.1.1.3.14.cmml" xref="alg1.l18.m1.1.1.3.14">𝑠</ci><ci id="alg1.l18.m1.1.1.3.15.cmml" xref="alg1.l18.m1.1.1.3.15">𝑢</ci><ci id="alg1.l18.m1.1.1.3.16.cmml" xref="alg1.l18.m1.1.1.3.16">𝑙</ci><ci id="alg1.l18.m1.1.1.3.17.cmml" xref="alg1.l18.m1.1.1.3.17">𝑡</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l18.m1.1c">obs\leftarrow execution\_result</annotation><annotation encoding="application/x-llamapun" id="alg1.l18.m1.1d">italic_o italic_b italic_s ← italic_e italic_x italic_e italic_c italic_u italic_t italic_i italic_o italic_n _ italic_r italic_e italic_s italic_u italic_l italic_t</annotation></semantics></math>; 
</div>
<div class="ltx_listingline" id="alg1.l19">
<span class="ltx_tag ltx_tag_listingline">19:</span>     <span class="ltx_text ltx_font_bold" id="alg1.l19.1">end</span> <span class="ltx_text ltx_font_bold" id="alg1.l19.2">if</span>
</div>
<div class="ltx_listingline" id="alg1.l20">
<span class="ltx_tag ltx_tag_listingline">20:</span>     <math alttext="prompt\leftarrow prompt+thought+action+obsservation" class="ltx_Math" display="inline" id="alg1.l20.m1.1"><semantics id="alg1.l20.m1.1a"><mrow id="alg1.l20.m1.1.1" xref="alg1.l20.m1.1.1.cmml"><mrow id="alg1.l20.m1.1.1.2" xref="alg1.l20.m1.1.1.2.cmml"><mi id="alg1.l20.m1.1.1.2.2" xref="alg1.l20.m1.1.1.2.2.cmml">p</mi><mo id="alg1.l20.m1.1.1.2.1" xref="alg1.l20.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.2.3" xref="alg1.l20.m1.1.1.2.3.cmml">r</mi><mo id="alg1.l20.m1.1.1.2.1a" xref="alg1.l20.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.2.4" xref="alg1.l20.m1.1.1.2.4.cmml">o</mi><mo id="alg1.l20.m1.1.1.2.1b" xref="alg1.l20.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.2.5" xref="alg1.l20.m1.1.1.2.5.cmml">m</mi><mo id="alg1.l20.m1.1.1.2.1c" xref="alg1.l20.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.2.6" xref="alg1.l20.m1.1.1.2.6.cmml">p</mi><mo id="alg1.l20.m1.1.1.2.1d" xref="alg1.l20.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.2.7" xref="alg1.l20.m1.1.1.2.7.cmml">t</mi></mrow><mo id="alg1.l20.m1.1.1.1" stretchy="false" xref="alg1.l20.m1.1.1.1.cmml">←</mo><mrow id="alg1.l20.m1.1.1.3" xref="alg1.l20.m1.1.1.3.cmml"><mrow id="alg1.l20.m1.1.1.3.2" xref="alg1.l20.m1.1.1.3.2.cmml"><mi id="alg1.l20.m1.1.1.3.2.2" xref="alg1.l20.m1.1.1.3.2.2.cmml">p</mi><mo id="alg1.l20.m1.1.1.3.2.1" xref="alg1.l20.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.2.3" xref="alg1.l20.m1.1.1.3.2.3.cmml">r</mi><mo id="alg1.l20.m1.1.1.3.2.1a" xref="alg1.l20.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.2.4" xref="alg1.l20.m1.1.1.3.2.4.cmml">o</mi><mo id="alg1.l20.m1.1.1.3.2.1b" xref="alg1.l20.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.2.5" xref="alg1.l20.m1.1.1.3.2.5.cmml">m</mi><mo id="alg1.l20.m1.1.1.3.2.1c" xref="alg1.l20.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.2.6" xref="alg1.l20.m1.1.1.3.2.6.cmml">p</mi><mo id="alg1.l20.m1.1.1.3.2.1d" xref="alg1.l20.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.2.7" xref="alg1.l20.m1.1.1.3.2.7.cmml">t</mi></mrow><mo id="alg1.l20.m1.1.1.3.1" xref="alg1.l20.m1.1.1.3.1.cmml">+</mo><mrow id="alg1.l20.m1.1.1.3.3" xref="alg1.l20.m1.1.1.3.3.cmml"><mi id="alg1.l20.m1.1.1.3.3.2" xref="alg1.l20.m1.1.1.3.3.2.cmml">t</mi><mo id="alg1.l20.m1.1.1.3.3.1" xref="alg1.l20.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.3.3" xref="alg1.l20.m1.1.1.3.3.3.cmml">h</mi><mo id="alg1.l20.m1.1.1.3.3.1a" xref="alg1.l20.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.3.4" xref="alg1.l20.m1.1.1.3.3.4.cmml">o</mi><mo id="alg1.l20.m1.1.1.3.3.1b" xref="alg1.l20.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.3.5" xref="alg1.l20.m1.1.1.3.3.5.cmml">u</mi><mo id="alg1.l20.m1.1.1.3.3.1c" xref="alg1.l20.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.3.6" xref="alg1.l20.m1.1.1.3.3.6.cmml">g</mi><mo id="alg1.l20.m1.1.1.3.3.1d" xref="alg1.l20.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.3.7" xref="alg1.l20.m1.1.1.3.3.7.cmml">h</mi><mo id="alg1.l20.m1.1.1.3.3.1e" xref="alg1.l20.m1.1.1.3.3.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.3.8" xref="alg1.l20.m1.1.1.3.3.8.cmml">t</mi></mrow><mo id="alg1.l20.m1.1.1.3.1a" xref="alg1.l20.m1.1.1.3.1.cmml">+</mo><mrow id="alg1.l20.m1.1.1.3.4" xref="alg1.l20.m1.1.1.3.4.cmml"><mi id="alg1.l20.m1.1.1.3.4.2" xref="alg1.l20.m1.1.1.3.4.2.cmml">a</mi><mo id="alg1.l20.m1.1.1.3.4.1" xref="alg1.l20.m1.1.1.3.4.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.4.3" xref="alg1.l20.m1.1.1.3.4.3.cmml">c</mi><mo id="alg1.l20.m1.1.1.3.4.1a" xref="alg1.l20.m1.1.1.3.4.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.4.4" xref="alg1.l20.m1.1.1.3.4.4.cmml">t</mi><mo id="alg1.l20.m1.1.1.3.4.1b" xref="alg1.l20.m1.1.1.3.4.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.4.5" xref="alg1.l20.m1.1.1.3.4.5.cmml">i</mi><mo id="alg1.l20.m1.1.1.3.4.1c" xref="alg1.l20.m1.1.1.3.4.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.4.6" xref="alg1.l20.m1.1.1.3.4.6.cmml">o</mi><mo id="alg1.l20.m1.1.1.3.4.1d" xref="alg1.l20.m1.1.1.3.4.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.4.7" xref="alg1.l20.m1.1.1.3.4.7.cmml">n</mi></mrow><mo id="alg1.l20.m1.1.1.3.1b" xref="alg1.l20.m1.1.1.3.1.cmml">+</mo><mrow id="alg1.l20.m1.1.1.3.5" xref="alg1.l20.m1.1.1.3.5.cmml"><mi id="alg1.l20.m1.1.1.3.5.2" xref="alg1.l20.m1.1.1.3.5.2.cmml">o</mi><mo id="alg1.l20.m1.1.1.3.5.1" xref="alg1.l20.m1.1.1.3.5.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.5.3" xref="alg1.l20.m1.1.1.3.5.3.cmml">b</mi><mo id="alg1.l20.m1.1.1.3.5.1a" xref="alg1.l20.m1.1.1.3.5.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.5.4" xref="alg1.l20.m1.1.1.3.5.4.cmml">s</mi><mo id="alg1.l20.m1.1.1.3.5.1b" xref="alg1.l20.m1.1.1.3.5.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.5.5" xref="alg1.l20.m1.1.1.3.5.5.cmml">s</mi><mo id="alg1.l20.m1.1.1.3.5.1c" xref="alg1.l20.m1.1.1.3.5.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.5.6" xref="alg1.l20.m1.1.1.3.5.6.cmml">e</mi><mo id="alg1.l20.m1.1.1.3.5.1d" xref="alg1.l20.m1.1.1.3.5.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.5.7" xref="alg1.l20.m1.1.1.3.5.7.cmml">r</mi><mo id="alg1.l20.m1.1.1.3.5.1e" xref="alg1.l20.m1.1.1.3.5.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.5.8" xref="alg1.l20.m1.1.1.3.5.8.cmml">v</mi><mo id="alg1.l20.m1.1.1.3.5.1f" xref="alg1.l20.m1.1.1.3.5.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.5.9" xref="alg1.l20.m1.1.1.3.5.9.cmml">a</mi><mo id="alg1.l20.m1.1.1.3.5.1g" xref="alg1.l20.m1.1.1.3.5.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.5.10" xref="alg1.l20.m1.1.1.3.5.10.cmml">t</mi><mo id="alg1.l20.m1.1.1.3.5.1h" xref="alg1.l20.m1.1.1.3.5.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.5.11" xref="alg1.l20.m1.1.1.3.5.11.cmml">i</mi><mo id="alg1.l20.m1.1.1.3.5.1i" xref="alg1.l20.m1.1.1.3.5.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.5.12" xref="alg1.l20.m1.1.1.3.5.12.cmml">o</mi><mo id="alg1.l20.m1.1.1.3.5.1j" xref="alg1.l20.m1.1.1.3.5.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3.5.13" xref="alg1.l20.m1.1.1.3.5.13.cmml">n</mi></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l20.m1.1b"><apply id="alg1.l20.m1.1.1.cmml" xref="alg1.l20.m1.1.1"><ci id="alg1.l20.m1.1.1.1.cmml" xref="alg1.l20.m1.1.1.1">←</ci><apply id="alg1.l20.m1.1.1.2.cmml" xref="alg1.l20.m1.1.1.2"><times id="alg1.l20.m1.1.1.2.1.cmml" xref="alg1.l20.m1.1.1.2.1"></times><ci id="alg1.l20.m1.1.1.2.2.cmml" xref="alg1.l20.m1.1.1.2.2">𝑝</ci><ci id="alg1.l20.m1.1.1.2.3.cmml" xref="alg1.l20.m1.1.1.2.3">𝑟</ci><ci id="alg1.l20.m1.1.1.2.4.cmml" xref="alg1.l20.m1.1.1.2.4">𝑜</ci><ci id="alg1.l20.m1.1.1.2.5.cmml" xref="alg1.l20.m1.1.1.2.5">𝑚</ci><ci id="alg1.l20.m1.1.1.2.6.cmml" xref="alg1.l20.m1.1.1.2.6">𝑝</ci><ci id="alg1.l20.m1.1.1.2.7.cmml" xref="alg1.l20.m1.1.1.2.7">𝑡</ci></apply><apply id="alg1.l20.m1.1.1.3.cmml" xref="alg1.l20.m1.1.1.3"><plus id="alg1.l20.m1.1.1.3.1.cmml" xref="alg1.l20.m1.1.1.3.1"></plus><apply id="alg1.l20.m1.1.1.3.2.cmml" xref="alg1.l20.m1.1.1.3.2"><times id="alg1.l20.m1.1.1.3.2.1.cmml" xref="alg1.l20.m1.1.1.3.2.1"></times><ci id="alg1.l20.m1.1.1.3.2.2.cmml" xref="alg1.l20.m1.1.1.3.2.2">𝑝</ci><ci id="alg1.l20.m1.1.1.3.2.3.cmml" xref="alg1.l20.m1.1.1.3.2.3">𝑟</ci><ci id="alg1.l20.m1.1.1.3.2.4.cmml" xref="alg1.l20.m1.1.1.3.2.4">𝑜</ci><ci id="alg1.l20.m1.1.1.3.2.5.cmml" xref="alg1.l20.m1.1.1.3.2.5">𝑚</ci><ci id="alg1.l20.m1.1.1.3.2.6.cmml" xref="alg1.l20.m1.1.1.3.2.6">𝑝</ci><ci id="alg1.l20.m1.1.1.3.2.7.cmml" xref="alg1.l20.m1.1.1.3.2.7">𝑡</ci></apply><apply id="alg1.l20.m1.1.1.3.3.cmml" xref="alg1.l20.m1.1.1.3.3"><times id="alg1.l20.m1.1.1.3.3.1.cmml" xref="alg1.l20.m1.1.1.3.3.1"></times><ci id="alg1.l20.m1.1.1.3.3.2.cmml" xref="alg1.l20.m1.1.1.3.3.2">𝑡</ci><ci id="alg1.l20.m1.1.1.3.3.3.cmml" xref="alg1.l20.m1.1.1.3.3.3">ℎ</ci><ci id="alg1.l20.m1.1.1.3.3.4.cmml" xref="alg1.l20.m1.1.1.3.3.4">𝑜</ci><ci id="alg1.l20.m1.1.1.3.3.5.cmml" xref="alg1.l20.m1.1.1.3.3.5">𝑢</ci><ci id="alg1.l20.m1.1.1.3.3.6.cmml" xref="alg1.l20.m1.1.1.3.3.6">𝑔</ci><ci id="alg1.l20.m1.1.1.3.3.7.cmml" xref="alg1.l20.m1.1.1.3.3.7">ℎ</ci><ci id="alg1.l20.m1.1.1.3.3.8.cmml" xref="alg1.l20.m1.1.1.3.3.8">𝑡</ci></apply><apply id="alg1.l20.m1.1.1.3.4.cmml" xref="alg1.l20.m1.1.1.3.4"><times id="alg1.l20.m1.1.1.3.4.1.cmml" xref="alg1.l20.m1.1.1.3.4.1"></times><ci id="alg1.l20.m1.1.1.3.4.2.cmml" xref="alg1.l20.m1.1.1.3.4.2">𝑎</ci><ci id="alg1.l20.m1.1.1.3.4.3.cmml" xref="alg1.l20.m1.1.1.3.4.3">𝑐</ci><ci id="alg1.l20.m1.1.1.3.4.4.cmml" xref="alg1.l20.m1.1.1.3.4.4">𝑡</ci><ci id="alg1.l20.m1.1.1.3.4.5.cmml" xref="alg1.l20.m1.1.1.3.4.5">𝑖</ci><ci id="alg1.l20.m1.1.1.3.4.6.cmml" xref="alg1.l20.m1.1.1.3.4.6">𝑜</ci><ci id="alg1.l20.m1.1.1.3.4.7.cmml" xref="alg1.l20.m1.1.1.3.4.7">𝑛</ci></apply><apply id="alg1.l20.m1.1.1.3.5.cmml" xref="alg1.l20.m1.1.1.3.5"><times id="alg1.l20.m1.1.1.3.5.1.cmml" xref="alg1.l20.m1.1.1.3.5.1"></times><ci id="alg1.l20.m1.1.1.3.5.2.cmml" xref="alg1.l20.m1.1.1.3.5.2">𝑜</ci><ci id="alg1.l20.m1.1.1.3.5.3.cmml" xref="alg1.l20.m1.1.1.3.5.3">𝑏</ci><ci id="alg1.l20.m1.1.1.3.5.4.cmml" xref="alg1.l20.m1.1.1.3.5.4">𝑠</ci><ci id="alg1.l20.m1.1.1.3.5.5.cmml" xref="alg1.l20.m1.1.1.3.5.5">𝑠</ci><ci id="alg1.l20.m1.1.1.3.5.6.cmml" xref="alg1.l20.m1.1.1.3.5.6">𝑒</ci><ci id="alg1.l20.m1.1.1.3.5.7.cmml" xref="alg1.l20.m1.1.1.3.5.7">𝑟</ci><ci id="alg1.l20.m1.1.1.3.5.8.cmml" xref="alg1.l20.m1.1.1.3.5.8">𝑣</ci><ci id="alg1.l20.m1.1.1.3.5.9.cmml" xref="alg1.l20.m1.1.1.3.5.9">𝑎</ci><ci id="alg1.l20.m1.1.1.3.5.10.cmml" xref="alg1.l20.m1.1.1.3.5.10">𝑡</ci><ci id="alg1.l20.m1.1.1.3.5.11.cmml" xref="alg1.l20.m1.1.1.3.5.11">𝑖</ci><ci id="alg1.l20.m1.1.1.3.5.12.cmml" xref="alg1.l20.m1.1.1.3.5.12">𝑜</ci><ci id="alg1.l20.m1.1.1.3.5.13.cmml" xref="alg1.l20.m1.1.1.3.5.13">𝑛</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l20.m1.1c">prompt\leftarrow prompt+thought+action+obsservation</annotation><annotation encoding="application/x-llamapun" id="alg1.l20.m1.1d">italic_p italic_r italic_o italic_m italic_p italic_t ← italic_p italic_r italic_o italic_m italic_p italic_t + italic_t italic_h italic_o italic_u italic_g italic_h italic_t + italic_a italic_c italic_t italic_i italic_o italic_n + italic_o italic_b italic_s italic_s italic_e italic_r italic_v italic_a italic_t italic_i italic_o italic_n</annotation></semantics></math>; 
</div>
<div class="ltx_listingline" id="alg1.l21">
<span class="ltx_tag ltx_tag_listingline">21:</span>     <span class="ltx_text ltx_font_bold" id="alg1.l21.1">if</span> <math alttext="action=execute()" class="ltx_Math" display="inline" id="alg1.l21.m1.1"><semantics id="alg1.l21.m1.1a"><mrow id="alg1.l21.m1.1.1" xref="alg1.l21.m1.1.1.cmml"><mrow id="alg1.l21.m1.1.1.2" xref="alg1.l21.m1.1.1.2.cmml"><mi id="alg1.l21.m1.1.1.2.2" xref="alg1.l21.m1.1.1.2.2.cmml">a</mi><mo id="alg1.l21.m1.1.1.2.1" xref="alg1.l21.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l21.m1.1.1.2.3" xref="alg1.l21.m1.1.1.2.3.cmml">c</mi><mo id="alg1.l21.m1.1.1.2.1a" xref="alg1.l21.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l21.m1.1.1.2.4" xref="alg1.l21.m1.1.1.2.4.cmml">t</mi><mo id="alg1.l21.m1.1.1.2.1b" xref="alg1.l21.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l21.m1.1.1.2.5" xref="alg1.l21.m1.1.1.2.5.cmml">i</mi><mo id="alg1.l21.m1.1.1.2.1c" xref="alg1.l21.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l21.m1.1.1.2.6" xref="alg1.l21.m1.1.1.2.6.cmml">o</mi><mo id="alg1.l21.m1.1.1.2.1d" xref="alg1.l21.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l21.m1.1.1.2.7" xref="alg1.l21.m1.1.1.2.7.cmml">n</mi></mrow><mo id="alg1.l21.m1.1.1.1" xref="alg1.l21.m1.1.1.1.cmml">=</mo><mrow id="alg1.l21.m1.1.1.3" xref="alg1.l21.m1.1.1.3.cmml"><mi id="alg1.l21.m1.1.1.3.2" xref="alg1.l21.m1.1.1.3.2.cmml">e</mi><mo id="alg1.l21.m1.1.1.3.1" xref="alg1.l21.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l21.m1.1.1.3.3" xref="alg1.l21.m1.1.1.3.3.cmml">x</mi><mo id="alg1.l21.m1.1.1.3.1a" xref="alg1.l21.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l21.m1.1.1.3.4" xref="alg1.l21.m1.1.1.3.4.cmml">e</mi><mo id="alg1.l21.m1.1.1.3.1b" xref="alg1.l21.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l21.m1.1.1.3.5" xref="alg1.l21.m1.1.1.3.5.cmml">c</mi><mo id="alg1.l21.m1.1.1.3.1c" xref="alg1.l21.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l21.m1.1.1.3.6" xref="alg1.l21.m1.1.1.3.6.cmml">u</mi><mo id="alg1.l21.m1.1.1.3.1d" xref="alg1.l21.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l21.m1.1.1.3.7" xref="alg1.l21.m1.1.1.3.7.cmml">t</mi><mo id="alg1.l21.m1.1.1.3.1e" xref="alg1.l21.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l21.m1.1.1.3.8" xref="alg1.l21.m1.1.1.3.8.cmml">e</mi><mo id="alg1.l21.m1.1.1.3.1f" xref="alg1.l21.m1.1.1.3.1.cmml">⁢</mo><mrow id="alg1.l21.m1.1.1.3.9.2" xref="alg1.l21.m1.1.1.3.cmml"><mo id="alg1.l21.m1.1.1.3.9.2.1" stretchy="false" xref="alg1.l21.m1.1.1.3.9.1.cmml">(</mo><mo id="alg1.l21.m1.1.1.3.9.2.2" stretchy="false" xref="alg1.l21.m1.1.1.3.9.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l21.m1.1b"><apply id="alg1.l21.m1.1.1.cmml" xref="alg1.l21.m1.1.1"><eq id="alg1.l21.m1.1.1.1.cmml" xref="alg1.l21.m1.1.1.1"></eq><apply id="alg1.l21.m1.1.1.2.cmml" xref="alg1.l21.m1.1.1.2"><times id="alg1.l21.m1.1.1.2.1.cmml" xref="alg1.l21.m1.1.1.2.1"></times><ci id="alg1.l21.m1.1.1.2.2.cmml" xref="alg1.l21.m1.1.1.2.2">𝑎</ci><ci id="alg1.l21.m1.1.1.2.3.cmml" xref="alg1.l21.m1.1.1.2.3">𝑐</ci><ci id="alg1.l21.m1.1.1.2.4.cmml" xref="alg1.l21.m1.1.1.2.4">𝑡</ci><ci id="alg1.l21.m1.1.1.2.5.cmml" xref="alg1.l21.m1.1.1.2.5">𝑖</ci><ci id="alg1.l21.m1.1.1.2.6.cmml" xref="alg1.l21.m1.1.1.2.6">𝑜</ci><ci id="alg1.l21.m1.1.1.2.7.cmml" xref="alg1.l21.m1.1.1.2.7">𝑛</ci></apply><apply id="alg1.l21.m1.1.1.3.cmml" xref="alg1.l21.m1.1.1.3"><times id="alg1.l21.m1.1.1.3.1.cmml" xref="alg1.l21.m1.1.1.3.1"></times><ci id="alg1.l21.m1.1.1.3.2.cmml" xref="alg1.l21.m1.1.1.3.2">𝑒</ci><ci id="alg1.l21.m1.1.1.3.3.cmml" xref="alg1.l21.m1.1.1.3.3">𝑥</ci><ci id="alg1.l21.m1.1.1.3.4.cmml" xref="alg1.l21.m1.1.1.3.4">𝑒</ci><ci id="alg1.l21.m1.1.1.3.5.cmml" xref="alg1.l21.m1.1.1.3.5">𝑐</ci><ci id="alg1.l21.m1.1.1.3.6.cmml" xref="alg1.l21.m1.1.1.3.6">𝑢</ci><ci id="alg1.l21.m1.1.1.3.7.cmml" xref="alg1.l21.m1.1.1.3.7">𝑡</ci><ci id="alg1.l21.m1.1.1.3.8.cmml" xref="alg1.l21.m1.1.1.3.8">𝑒</ci><list id="alg1.l21.m1.1.1.3.9.1.cmml" xref="alg1.l21.m1.1.1.3.9.2.1"></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l21.m1.1c">action=execute()</annotation><annotation encoding="application/x-llamapun" id="alg1.l21.m1.1d">italic_a italic_c italic_t italic_i italic_o italic_n = italic_e italic_x italic_e italic_c italic_u italic_t italic_e ( )</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l21.2">then</span>
</div>
<div class="ltx_listingline" id="alg1.l22">
<span class="ltx_tag ltx_tag_listingline">22:</span>        <span class="ltx_text ltx_font_bold" id="alg1.l22.1">break</span>; 
</div>
<div class="ltx_listingline" id="alg1.l23">
<span class="ltx_tag ltx_tag_listingline">23:</span>     <span class="ltx_text ltx_font_bold" id="alg1.l23.1">end</span> <span class="ltx_text ltx_font_bold" id="alg1.l23.2">if</span>
</div>
<div class="ltx_listingline" id="alg1.l24">
<span class="ltx_tag ltx_tag_listingline">24:</span>     <math alttext="t\leftarrow t+1" class="ltx_Math" display="inline" id="alg1.l24.m1.1"><semantics id="alg1.l24.m1.1a"><mrow id="alg1.l24.m1.1.1" xref="alg1.l24.m1.1.1.cmml"><mi id="alg1.l24.m1.1.1.2" xref="alg1.l24.m1.1.1.2.cmml">t</mi><mo id="alg1.l24.m1.1.1.1" stretchy="false" xref="alg1.l24.m1.1.1.1.cmml">←</mo><mrow id="alg1.l24.m1.1.1.3" xref="alg1.l24.m1.1.1.3.cmml"><mi id="alg1.l24.m1.1.1.3.2" xref="alg1.l24.m1.1.1.3.2.cmml">t</mi><mo id="alg1.l24.m1.1.1.3.1" xref="alg1.l24.m1.1.1.3.1.cmml">+</mo><mn id="alg1.l24.m1.1.1.3.3" xref="alg1.l24.m1.1.1.3.3.cmml">1</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l24.m1.1b"><apply id="alg1.l24.m1.1.1.cmml" xref="alg1.l24.m1.1.1"><ci id="alg1.l24.m1.1.1.1.cmml" xref="alg1.l24.m1.1.1.1">←</ci><ci id="alg1.l24.m1.1.1.2.cmml" xref="alg1.l24.m1.1.1.2">𝑡</ci><apply id="alg1.l24.m1.1.1.3.cmml" xref="alg1.l24.m1.1.1.3"><plus id="alg1.l24.m1.1.1.3.1.cmml" xref="alg1.l24.m1.1.1.3.1"></plus><ci id="alg1.l24.m1.1.1.3.2.cmml" xref="alg1.l24.m1.1.1.3.2">𝑡</ci><cn id="alg1.l24.m1.1.1.3.3.cmml" type="integer" xref="alg1.l24.m1.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l24.m1.1c">t\leftarrow t+1</annotation><annotation encoding="application/x-llamapun" id="alg1.l24.m1.1d">italic_t ← italic_t + 1</annotation></semantics></math>; 
</div>
<div class="ltx_listingline" id="alg1.l25">
<span class="ltx_tag ltx_tag_listingline">25:</span>  <span class="ltx_text ltx_font_bold" id="alg1.l25.1">end</span> <span class="ltx_text ltx_font_bold" id="alg1.l25.2">while</span>
</div>
<div class="ltx_listingline" id="alg1.l26">
<span class="ltx_tag ltx_tag_listingline">26:</span>  <span class="ltx_text ltx_font_bold" id="alg1.l26.1">return</span> <math alttext="execution\_result" class="ltx_Math" display="inline" id="alg1.l26.m1.1"><semantics id="alg1.l26.m1.1a"><mrow id="alg1.l26.m1.1.1" xref="alg1.l26.m1.1.1.cmml"><mi id="alg1.l26.m1.1.1.2" xref="alg1.l26.m1.1.1.2.cmml">e</mi><mo id="alg1.l26.m1.1.1.1" xref="alg1.l26.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l26.m1.1.1.3" xref="alg1.l26.m1.1.1.3.cmml">x</mi><mo id="alg1.l26.m1.1.1.1a" xref="alg1.l26.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l26.m1.1.1.4" xref="alg1.l26.m1.1.1.4.cmml">e</mi><mo id="alg1.l26.m1.1.1.1b" xref="alg1.l26.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l26.m1.1.1.5" xref="alg1.l26.m1.1.1.5.cmml">c</mi><mo id="alg1.l26.m1.1.1.1c" xref="alg1.l26.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l26.m1.1.1.6" xref="alg1.l26.m1.1.1.6.cmml">u</mi><mo id="alg1.l26.m1.1.1.1d" xref="alg1.l26.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l26.m1.1.1.7" xref="alg1.l26.m1.1.1.7.cmml">t</mi><mo id="alg1.l26.m1.1.1.1e" xref="alg1.l26.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l26.m1.1.1.8" xref="alg1.l26.m1.1.1.8.cmml">i</mi><mo id="alg1.l26.m1.1.1.1f" xref="alg1.l26.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l26.m1.1.1.9" xref="alg1.l26.m1.1.1.9.cmml">o</mi><mo id="alg1.l26.m1.1.1.1g" xref="alg1.l26.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l26.m1.1.1.10" xref="alg1.l26.m1.1.1.10.cmml">n</mi><mo id="alg1.l26.m1.1.1.1h" xref="alg1.l26.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l26.m1.1.1.11" mathvariant="normal" xref="alg1.l26.m1.1.1.11.cmml">_</mi><mo id="alg1.l26.m1.1.1.1i" xref="alg1.l26.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l26.m1.1.1.12" xref="alg1.l26.m1.1.1.12.cmml">r</mi><mo id="alg1.l26.m1.1.1.1j" xref="alg1.l26.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l26.m1.1.1.13" xref="alg1.l26.m1.1.1.13.cmml">e</mi><mo id="alg1.l26.m1.1.1.1k" xref="alg1.l26.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l26.m1.1.1.14" xref="alg1.l26.m1.1.1.14.cmml">s</mi><mo id="alg1.l26.m1.1.1.1l" xref="alg1.l26.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l26.m1.1.1.15" xref="alg1.l26.m1.1.1.15.cmml">u</mi><mo id="alg1.l26.m1.1.1.1m" xref="alg1.l26.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l26.m1.1.1.16" xref="alg1.l26.m1.1.1.16.cmml">l</mi><mo id="alg1.l26.m1.1.1.1n" xref="alg1.l26.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l26.m1.1.1.17" xref="alg1.l26.m1.1.1.17.cmml">t</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l26.m1.1b"><apply id="alg1.l26.m1.1.1.cmml" xref="alg1.l26.m1.1.1"><times id="alg1.l26.m1.1.1.1.cmml" xref="alg1.l26.m1.1.1.1"></times><ci id="alg1.l26.m1.1.1.2.cmml" xref="alg1.l26.m1.1.1.2">𝑒</ci><ci id="alg1.l26.m1.1.1.3.cmml" xref="alg1.l26.m1.1.1.3">𝑥</ci><ci id="alg1.l26.m1.1.1.4.cmml" xref="alg1.l26.m1.1.1.4">𝑒</ci><ci id="alg1.l26.m1.1.1.5.cmml" xref="alg1.l26.m1.1.1.5">𝑐</ci><ci id="alg1.l26.m1.1.1.6.cmml" xref="alg1.l26.m1.1.1.6">𝑢</ci><ci id="alg1.l26.m1.1.1.7.cmml" xref="alg1.l26.m1.1.1.7">𝑡</ci><ci id="alg1.l26.m1.1.1.8.cmml" xref="alg1.l26.m1.1.1.8">𝑖</ci><ci id="alg1.l26.m1.1.1.9.cmml" xref="alg1.l26.m1.1.1.9">𝑜</ci><ci id="alg1.l26.m1.1.1.10.cmml" xref="alg1.l26.m1.1.1.10">𝑛</ci><ci id="alg1.l26.m1.1.1.11.cmml" xref="alg1.l26.m1.1.1.11">_</ci><ci id="alg1.l26.m1.1.1.12.cmml" xref="alg1.l26.m1.1.1.12">𝑟</ci><ci id="alg1.l26.m1.1.1.13.cmml" xref="alg1.l26.m1.1.1.13">𝑒</ci><ci id="alg1.l26.m1.1.1.14.cmml" xref="alg1.l26.m1.1.1.14">𝑠</ci><ci id="alg1.l26.m1.1.1.15.cmml" xref="alg1.l26.m1.1.1.15">𝑢</ci><ci id="alg1.l26.m1.1.1.16.cmml" xref="alg1.l26.m1.1.1.16">𝑙</ci><ci id="alg1.l26.m1.1.1.17.cmml" xref="alg1.l26.m1.1.1.17">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l26.m1.1c">execution\_result</annotation><annotation encoding="application/x-llamapun" id="alg1.l26.m1.1d">italic_e italic_x italic_e italic_c italic_u italic_t italic_i italic_o italic_n _ italic_r italic_e italic_s italic_u italic_l italic_t</annotation></semantics></math>; 
</div>
</div>
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.3.1.1">算法 1</span> </span>查询代理</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="A2.SS2">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">B.2 </span>关系排名</h3>
<div class="ltx_para" id="A2.SS2.p1">
<p class="ltx_p" id="A2.SS2.p1.1">在本文的主体中，我们主要关注查询构建和错误校正。 在这里，我们在查询构建中补充了一个技术细节，即候选关系的粗略排名。 鉴于实体的一跳关系可能很多，考虑所有候选关系将增加提示长度，可能超过LLM允许的最大上下文长度。 因此，在检索实体或变量的一跳关系后，如果候选关系的数量超过40个，我们会对候选进行粗略排名。 我们首先使用OpenAI嵌入（ada v2）对问题和每个关系候选进行编码。 然后，我们计算每个候选的编码与问题之间的余弦相似性。 根据它们的相似性分数，只有前40个关系候选被保留作为这个粗略排名的结果。 然后，选定的关系被洗牌，以减轻由于分数顺序而导致模型选择过程中的潜在偏见。 在整个GrailQA（dev），Graph（test）和WebQSP（test）数据集上调用OpenAI嵌入的成本分别为$0.012，$0.002和$0.001，几乎可以忽略不计。 MetaQA数据集具有较少的关系数量，因此不需要粗略排名模块。</p>
</div>
</section>
</section>
<section class="ltx_appendix" id="A3">
<h2 class="ltx_title ltx_title_appendix"><span class="ltx_tag ltx_tag_appendix">附录C </span>其他实验细节</h2>
<section class="ltx_subsection" id="A3.SS1">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">C.1 </span>基准方法</h3>
<div class="ltx_para" id="A3.SS1.p1">
<p class="ltx_p" id="A3.SS1.p1.1">论文主体只介绍了少样本KBQA方法，为了简洁起见。在这里，我们补充介绍了微调KBQA方法和Text-to-SQL方法。</p>
</div>
<div class="ltx_para ltx_noindent" id="A3.SS1.p2">
<p class="ltx_p" id="A3.SS1.p2.1"><span class="ltx_text ltx_font_bold" id="A3.SS1.p2.1.1">ArcaneQA <cite class="ltx_cite ltx_citemacro_cite">Gu and Su (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib5" title="">2022</a>)</cite></span> 是一种生成式方法，通过动态预测一系列子程序来逐步合成程序。它利用约束解码来修剪搜索空间。</p>
</div>
<div class="ltx_para ltx_noindent" id="A3.SS1.p3">
<p class="ltx_p" id="A3.SS1.p3.1"><span class="ltx_text ltx_font_bold" id="A3.SS1.p3.1.1">TIARA <cite class="ltx_cite ltx_citemacro_cite">Shu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib16" title="">2022</a>)</cite></span> 提出了一种多粒度检索方法来检索相关的知识库元素。它还应用了受限解码来减少语法错误。</p>
</div>
<div class="ltx_para ltx_noindent" id="A3.SS1.p4">
<p class="ltx_p" id="A3.SS1.p4.1"><span class="ltx_text ltx_font_bold" id="A3.SS1.p4.1.1">DecAF <cite class="ltx_cite ltx_citemacro_cite">Yu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib24" title="">2023</a>)</cite></span>同时生成逻辑形式和直接答案，然后将它们的优点结合起来得到最终答案。它采用BM25进行检索，以获取相关的知识库子图，从而消除了实体链接的需要。</p>
</div>
<div class="ltx_para ltx_noindent" id="A3.SS1.p5">
<p class="ltx_p" id="A3.SS1.p5.1"><span class="ltx_text ltx_font_bold" id="A3.SS1.p5.1.1">盘古<cite class="ltx_cite ltx_citemacro_cite">Gu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib3" title="">2023</a>)</cite></span>由一个符号代理和一个语言模型组成，用于收集有效的候选方案，并选择最佳方案。它利用语言模型的判别能力而不是生成能力。</p>
</div>
<div class="ltx_para ltx_noindent" id="A3.SS1.p6">
<p class="ltx_p" id="A3.SS1.p6.1"><span class="ltx_text ltx_font_bold" id="A3.SS1.p6.1.1">StructGPT <cite class="ltx_cite ltx_citemacro_cite">Jiang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#bib.bib8" title="">2023</a>)</cite></span> 是一种基于少样本的方法，用于对结构化数据（包括表格，数据库和知识图谱）进行复杂推理。它预测一个预定义顺序中的函数调用序列。具体来说，他们在数据库上定义了三种操作，在知识图谱上定义了两种操作。</p>
</div>
</section>
<section class="ltx_subsection" id="A3.SS2">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">C.2 </span>API调用成本</h3>
<div class="ltx_para" id="A3.SS2.p1">
<p class="ltx_p" id="A3.SS2.p1.1">本文中API调用的计算成本是根据OpenAI提供的官方方法计算的<span class="ltx_note ltx_role_footnote" id="footnote3"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span>https://openai.com/pricing</span></span></span>。对于<span class="ltx_text ltx_font_typewriter" id="A3.SS2.p1.1.1">gpt-3.5-turbo</span>，即: <math alttext="cost=input\_token\_num/1000*\$0.0015+output\_token\_num/1000*\$0.0020" class="ltx_Math" display="inline" id="A3.SS2.p1.1.m1.1"><semantics id="A3.SS2.p1.1.m1.1a"><mrow id="A3.SS2.p1.1.m1.1.1" xref="A3.SS2.p1.1.m1.1.1.cmml"><mrow id="A3.SS2.p1.1.m1.1.1.2" xref="A3.SS2.p1.1.m1.1.1.2.cmml"><mi id="A3.SS2.p1.1.m1.1.1.2.2" xref="A3.SS2.p1.1.m1.1.1.2.2.cmml">c</mi><mo id="A3.SS2.p1.1.m1.1.1.2.1" xref="A3.SS2.p1.1.m1.1.1.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.2.3" xref="A3.SS2.p1.1.m1.1.1.2.3.cmml">o</mi><mo id="A3.SS2.p1.1.m1.1.1.2.1a" xref="A3.SS2.p1.1.m1.1.1.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.2.4" xref="A3.SS2.p1.1.m1.1.1.2.4.cmml">s</mi><mo id="A3.SS2.p1.1.m1.1.1.2.1b" xref="A3.SS2.p1.1.m1.1.1.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.2.5" xref="A3.SS2.p1.1.m1.1.1.2.5.cmml">t</mi></mrow><mo id="A3.SS2.p1.1.m1.1.1.1" xref="A3.SS2.p1.1.m1.1.1.1.cmml">=</mo><mrow id="A3.SS2.p1.1.m1.1.1.3" xref="A3.SS2.p1.1.m1.1.1.3.cmml"><mrow id="A3.SS2.p1.1.m1.1.1.3.2" xref="A3.SS2.p1.1.m1.1.1.3.2.cmml"><mrow id="A3.SS2.p1.1.m1.1.1.3.2.2" xref="A3.SS2.p1.1.m1.1.1.3.2.2.cmml"><mrow id="A3.SS2.p1.1.m1.1.1.3.2.2.2" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.cmml"><mi id="A3.SS2.p1.1.m1.1.1.3.2.2.2.2" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.2.cmml">i</mi><mo id="A3.SS2.p1.1.m1.1.1.3.2.2.2.1" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.2.2.2.3" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.3.cmml">n</mi><mo id="A3.SS2.p1.1.m1.1.1.3.2.2.2.1a" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.2.2.2.4" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.4.cmml">p</mi><mo id="A3.SS2.p1.1.m1.1.1.3.2.2.2.1b" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.2.2.2.5" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.5.cmml">u</mi><mo id="A3.SS2.p1.1.m1.1.1.3.2.2.2.1c" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.2.2.2.6" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.6.cmml">t</mi><mo id="A3.SS2.p1.1.m1.1.1.3.2.2.2.1d" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.2.2.2.7" mathvariant="normal" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.7.cmml">_</mi><mo id="A3.SS2.p1.1.m1.1.1.3.2.2.2.1e" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.2.2.2.8" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.8.cmml">t</mi><mo id="A3.SS2.p1.1.m1.1.1.3.2.2.2.1f" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.2.2.2.9" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.9.cmml">o</mi><mo id="A3.SS2.p1.1.m1.1.1.3.2.2.2.1g" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.2.2.2.10" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.10.cmml">k</mi><mo id="A3.SS2.p1.1.m1.1.1.3.2.2.2.1h" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.2.2.2.11" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.11.cmml">e</mi><mo id="A3.SS2.p1.1.m1.1.1.3.2.2.2.1i" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.2.2.2.12" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.12.cmml">n</mi><mo id="A3.SS2.p1.1.m1.1.1.3.2.2.2.1j" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.2.2.2.13" mathvariant="normal" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.13.cmml">_</mi><mo id="A3.SS2.p1.1.m1.1.1.3.2.2.2.1k" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.2.2.2.14" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.14.cmml">n</mi><mo id="A3.SS2.p1.1.m1.1.1.3.2.2.2.1l" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.2.2.2.15" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.15.cmml">u</mi><mo id="A3.SS2.p1.1.m1.1.1.3.2.2.2.1m" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.2.2.2.16" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.16.cmml">m</mi></mrow><mo id="A3.SS2.p1.1.m1.1.1.3.2.2.1" xref="A3.SS2.p1.1.m1.1.1.3.2.2.1.cmml">/</mo><mn id="A3.SS2.p1.1.m1.1.1.3.2.2.3" xref="A3.SS2.p1.1.m1.1.1.3.2.2.3.cmml">1000</mn></mrow><mo id="A3.SS2.p1.1.m1.1.1.3.2.1" lspace="0.222em" xref="A3.SS2.p1.1.m1.1.1.3.2.1.cmml">*</mo><mrow id="A3.SS2.p1.1.m1.1.1.3.2.3" xref="A3.SS2.p1.1.m1.1.1.3.2.3.cmml"><mo id="A3.SS2.p1.1.m1.1.1.3.2.3.1" lspace="0.055em" rspace="0.167em" xref="A3.SS2.p1.1.m1.1.1.3.2.3.1.cmml">$</mo><mn id="A3.SS2.p1.1.m1.1.1.3.2.3.2" xref="A3.SS2.p1.1.m1.1.1.3.2.3.2.cmml">0.0015</mn></mrow></mrow><mo id="A3.SS2.p1.1.m1.1.1.3.1" xref="A3.SS2.p1.1.m1.1.1.3.1.cmml">+</mo><mrow id="A3.SS2.p1.1.m1.1.1.3.3" xref="A3.SS2.p1.1.m1.1.1.3.3.cmml"><mrow id="A3.SS2.p1.1.m1.1.1.3.3.2" xref="A3.SS2.p1.1.m1.1.1.3.3.2.cmml"><mrow id="A3.SS2.p1.1.m1.1.1.3.3.2.2" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.cmml"><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.2" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.2.cmml">o</mi><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.3" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.3.cmml">u</mi><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1a" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.4" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.4.cmml">t</mi><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1b" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.5" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.5.cmml">p</mi><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1c" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.6" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.6.cmml">u</mi><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1d" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.7" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.7.cmml">t</mi><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1e" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.8" mathvariant="normal" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.8.cmml">_</mi><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1f" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.9" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.9.cmml">t</mi><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1g" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.10" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.10.cmml">o</mi><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1h" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.11" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.11.cmml">k</mi><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1i" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.12" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.12.cmml">e</mi><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1j" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.13" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.13.cmml">n</mi><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1k" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.14" mathvariant="normal" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.14.cmml">_</mi><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1l" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.15" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.15.cmml">n</mi><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1m" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.16" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.16.cmml">u</mi><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1n" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3.3.2.2.17" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.17.cmml">m</mi></mrow><mo id="A3.SS2.p1.1.m1.1.1.3.3.2.1" xref="A3.SS2.p1.1.m1.1.1.3.3.2.1.cmml">/</mo><mn id="A3.SS2.p1.1.m1.1.1.3.3.2.3" xref="A3.SS2.p1.1.m1.1.1.3.3.2.3.cmml">1000</mn></mrow><mo id="A3.SS2.p1.1.m1.1.1.3.3.1" lspace="0.222em" xref="A3.SS2.p1.1.m1.1.1.3.3.1.cmml">*</mo><mrow id="A3.SS2.p1.1.m1.1.1.3.3.3" xref="A3.SS2.p1.1.m1.1.1.3.3.3.cmml"><mo id="A3.SS2.p1.1.m1.1.1.3.3.3.1" lspace="0.055em" rspace="0.167em" xref="A3.SS2.p1.1.m1.1.1.3.3.3.1.cmml">$</mo><mn id="A3.SS2.p1.1.m1.1.1.3.3.3.2" xref="A3.SS2.p1.1.m1.1.1.3.3.3.2.cmml">0.0020</mn></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="A3.SS2.p1.1.m1.1b"><apply id="A3.SS2.p1.1.m1.1.1.cmml" xref="A3.SS2.p1.1.m1.1.1"><eq id="A3.SS2.p1.1.m1.1.1.1.cmml" xref="A3.SS2.p1.1.m1.1.1.1"></eq><apply id="A3.SS2.p1.1.m1.1.1.2.cmml" xref="A3.SS2.p1.1.m1.1.1.2"><times id="A3.SS2.p1.1.m1.1.1.2.1.cmml" xref="A3.SS2.p1.1.m1.1.1.2.1"></times><ci id="A3.SS2.p1.1.m1.1.1.2.2.cmml" xref="A3.SS2.p1.1.m1.1.1.2.2">𝑐</ci><ci id="A3.SS2.p1.1.m1.1.1.2.3.cmml" xref="A3.SS2.p1.1.m1.1.1.2.3">𝑜</ci><ci id="A3.SS2.p1.1.m1.1.1.2.4.cmml" xref="A3.SS2.p1.1.m1.1.1.2.4">𝑠</ci><ci id="A3.SS2.p1.1.m1.1.1.2.5.cmml" xref="A3.SS2.p1.1.m1.1.1.2.5">𝑡</ci></apply><apply id="A3.SS2.p1.1.m1.1.1.3.cmml" xref="A3.SS2.p1.1.m1.1.1.3"><plus id="A3.SS2.p1.1.m1.1.1.3.1.cmml" xref="A3.SS2.p1.1.m1.1.1.3.1"></plus><apply id="A3.SS2.p1.1.m1.1.1.3.2.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2"><times id="A3.SS2.p1.1.m1.1.1.3.2.1.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.1"></times><apply id="A3.SS2.p1.1.m1.1.1.3.2.2.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2"><divide id="A3.SS2.p1.1.m1.1.1.3.2.2.1.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.1"></divide><apply id="A3.SS2.p1.1.m1.1.1.3.2.2.2.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2"><times id="A3.SS2.p1.1.m1.1.1.3.2.2.2.1.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.1"></times><ci id="A3.SS2.p1.1.m1.1.1.3.2.2.2.2.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.2">𝑖</ci><ci id="A3.SS2.p1.1.m1.1.1.3.2.2.2.3.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.3">𝑛</ci><ci id="A3.SS2.p1.1.m1.1.1.3.2.2.2.4.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.4">𝑝</ci><ci id="A3.SS2.p1.1.m1.1.1.3.2.2.2.5.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.5">𝑢</ci><ci id="A3.SS2.p1.1.m1.1.1.3.2.2.2.6.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.6">𝑡</ci><ci id="A3.SS2.p1.1.m1.1.1.3.2.2.2.7.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.7">_</ci><ci id="A3.SS2.p1.1.m1.1.1.3.2.2.2.8.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.8">𝑡</ci><ci id="A3.SS2.p1.1.m1.1.1.3.2.2.2.9.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.9">𝑜</ci><ci id="A3.SS2.p1.1.m1.1.1.3.2.2.2.10.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.10">𝑘</ci><ci id="A3.SS2.p1.1.m1.1.1.3.2.2.2.11.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.11">𝑒</ci><ci id="A3.SS2.p1.1.m1.1.1.3.2.2.2.12.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.12">𝑛</ci><ci id="A3.SS2.p1.1.m1.1.1.3.2.2.2.13.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.13">_</ci><ci id="A3.SS2.p1.1.m1.1.1.3.2.2.2.14.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.14">𝑛</ci><ci id="A3.SS2.p1.1.m1.1.1.3.2.2.2.15.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.15">𝑢</ci><ci id="A3.SS2.p1.1.m1.1.1.3.2.2.2.16.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.2.2.16">𝑚</ci></apply><cn id="A3.SS2.p1.1.m1.1.1.3.2.2.3.cmml" type="integer" xref="A3.SS2.p1.1.m1.1.1.3.2.2.3">1000</cn></apply><apply id="A3.SS2.p1.1.m1.1.1.3.2.3.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.3"><csymbol cd="latexml" id="A3.SS2.p1.1.m1.1.1.3.2.3.1.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2.3.1">currency-dollar</csymbol><cn id="A3.SS2.p1.1.m1.1.1.3.2.3.2.cmml" type="float" xref="A3.SS2.p1.1.m1.1.1.3.2.3.2">0.0015</cn></apply></apply><apply id="A3.SS2.p1.1.m1.1.1.3.3.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3"><times id="A3.SS2.p1.1.m1.1.1.3.3.1.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.1"></times><apply id="A3.SS2.p1.1.m1.1.1.3.3.2.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2"><divide id="A3.SS2.p1.1.m1.1.1.3.3.2.1.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.1"></divide><apply id="A3.SS2.p1.1.m1.1.1.3.3.2.2.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2"><times id="A3.SS2.p1.1.m1.1.1.3.3.2.2.1.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.1"></times><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.2.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.2">𝑜</ci><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.3.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.3">𝑢</ci><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.4.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.4">𝑡</ci><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.5.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.5">𝑝</ci><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.6.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.6">𝑢</ci><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.7.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.7">𝑡</ci><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.8.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.8">_</ci><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.9.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.9">𝑡</ci><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.10.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.10">𝑜</ci><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.11.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.11">𝑘</ci><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.12.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.12">𝑒</ci><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.13.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.13">𝑛</ci><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.14.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.14">_</ci><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.15.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.15">𝑛</ci><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.16.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.16">𝑢</ci><ci id="A3.SS2.p1.1.m1.1.1.3.3.2.2.17.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.2.2.17">𝑚</ci></apply><cn id="A3.SS2.p1.1.m1.1.1.3.3.2.3.cmml" type="integer" xref="A3.SS2.p1.1.m1.1.1.3.3.2.3">1000</cn></apply><apply id="A3.SS2.p1.1.m1.1.1.3.3.3.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.3"><csymbol cd="latexml" id="A3.SS2.p1.1.m1.1.1.3.3.3.1.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3.3.1">currency-dollar</csymbol><cn id="A3.SS2.p1.1.m1.1.1.3.3.3.2.cmml" type="float" xref="A3.SS2.p1.1.m1.1.1.3.3.3.2">0.0020</cn></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS2.p1.1.m1.1c">cost=input\_token\_num/1000*\$0.0015+output\_token\_num/1000*\$0.0020</annotation><annotation encoding="application/x-llamapun" id="A3.SS2.p1.1.m1.1d">italic_c italic_o italic_s italic_t = italic_i italic_n italic_p italic_u italic_t _ italic_t italic_o italic_k italic_e italic_n _ italic_n italic_u italic_m / 1000 * $ 0.0015 + italic_o italic_u italic_t italic_p italic_u italic_t _ italic_t italic_o italic_k italic_e italic_n _ italic_n italic_u italic_m / 1000 * $ 0.0020</annotation></semantics></math>。
令牌的计数是由tiktoken实现的<span class="ltx_note ltx_role_footnote" id="footnote4"><sup class="ltx_note_mark">4</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">4</sup><span class="ltx_tag ltx_tag_note">4</span>https://github.com/openai/tiktoken/tree/main</span></span></span>。</p>
</div>
</section>
<section class="ltx_subsection" id="A3.SS3">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">C.3 </span>不同关系排名策略的影响</h3>
<div class="ltx_para" id="A3.SS3.p1">
<p class="ltx_p" id="A3.SS3.p1.1">在本节中，我们分析了关系排名（RR）模块的影响以及不同的RR策略的影响。
本文中的默认策略是基于问题和候选关系的OpenAI嵌入的余弦相似度的OE策略。
我们将OE设置与另外两种基准策略进行了比较：HS和ST。
HS表示混合搜索，它是通过BM25和Faiss搜索实现的。
ST表示句子转换器。它类似于OE设置，但是用句子转换器嵌入替换了OpenAI嵌入。
表<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#A3.T7" title="Table 7 ‣ C.3 Impact of Different Relation Ranking Strategy ‣ Appendix C Other Experiment Details ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_tag">7</span></a>中的结果显示，没有RR模块，性能显著下降。
这是预期的，因为我们仅仅保留了默认顺序中的前40个候选项，没有进行任何重新排名过程。
在所有排名策略中，OE设置在GraphQ上达到了最佳性能，而ST设置在GrailQA和WebQSP上达到了最佳性能。
这意味着，通过合适的排名策略，QueryAgent仍然有改进的空间。</p>
</div>
<figure class="ltx_table" id="A3.T7">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="A3.T7.1" style="width:208.1pt;height:113.6pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(5.1pt,-2.8pt) scale(1.05175369207971,1.05175369207971) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A3.T7.1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A3.T7.1.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="A3.T7.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="A3.T7.1.1.1.1.1.1">Methods</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="A3.T7.1.1.1.1.2"><span class="ltx_text ltx_font_bold" id="A3.T7.1.1.1.1.2.1">GrailQA</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="A3.T7.1.1.1.1.3"><span class="ltx_text ltx_font_bold" id="A3.T7.1.1.1.1.3.1">GraphQ</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="A3.T7.1.1.1.1.4"><span class="ltx_text ltx_font_bold" id="A3.T7.1.1.1.1.4.1">WebQSP</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A3.T7.1.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A3.T7.1.1.2.1.1">QueryAgent</th>
<td class="ltx_td ltx_border_t" id="A3.T7.1.1.2.1.2"></td>
<td class="ltx_td ltx_border_t" id="A3.T7.1.1.2.1.3"></td>
<td class="ltx_td ltx_border_t" id="A3.T7.1.1.2.1.4"></td>
</tr>
<tr class="ltx_tr" id="A3.T7.1.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A3.T7.1.1.3.2.1">    w/o RR</th>
<td class="ltx_td ltx_align_right" id="A3.T7.1.1.3.2.2">45.6</td>
<td class="ltx_td ltx_align_right" id="A3.T7.1.1.3.2.3">34.5</td>
<td class="ltx_td ltx_align_right" id="A3.T7.1.1.3.2.4">33.5</td>
</tr>
<tr class="ltx_tr" id="A3.T7.1.1.4.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A3.T7.1.1.4.3.1">    w HS</th>
<td class="ltx_td ltx_align_right" id="A3.T7.1.1.4.3.2">52.1</td>
<td class="ltx_td ltx_align_right" id="A3.T7.1.1.4.3.3">47.0</td>
<td class="ltx_td ltx_align_right" id="A3.T7.1.1.4.3.4">50.2</td>
</tr>
<tr class="ltx_tr" id="A3.T7.1.1.5.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A3.T7.1.1.5.4.1">    w ST</th>
<td class="ltx_td ltx_align_right" id="A3.T7.1.1.5.4.2"><span class="ltx_text ltx_font_bold" id="A3.T7.1.1.5.4.2.1">59.1</span></td>
<td class="ltx_td ltx_align_right" id="A3.T7.1.1.5.4.3">53.8</td>
<td class="ltx_td ltx_align_right" id="A3.T7.1.1.5.4.4">60.8</td>
</tr>
<tr class="ltx_tr" id="A3.T7.1.1.6.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="A3.T7.1.1.6.5.1">    w OE (default)</th>
<td class="ltx_td ltx_align_right ltx_border_bb" id="A3.T7.1.1.6.5.2">56.3</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="A3.T7.1.1.6.5.3"><span class="ltx_text ltx_font_bold" id="A3.T7.1.1.6.5.3.1">55.0</span></td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="A3.T7.1.1.6.5.4"><span class="ltx_text ltx_font_bold" id="A3.T7.1.1.6.5.4.1">61.2</span></td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">表7： </span>使用不同关系排序（RR）策略对QueryAgent进行消融研究。 HS和ST分别表示混合搜索和句子转换器。我们对500个随机选择的问题进行了实验。</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="A3.SS4">
<h3 class="ltx_title ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">C.4 </span>使用黄金实体的结果</h3>
<div class="ltx_para" id="A3.SS4.p1">
<p class="ltx_p" id="A3.SS4.p1.1">这里我们提供了使用金实体链接的QueryAgent的详细实验结果。
结果显示在表<a class="ltx_ref" href="https://arxiv.org/html/2403.11886v1#A3.T8" title="Table 8 ‣ C.4 Result with Golden Entity ‣ Appendix C Other Experiment Details ‣ QueryAgent: A Reliable and Efficient Reasoning Framework with Environmental Feedback based Self-Correction"><span class="ltx_text ltx_ref_tag">8</span></a>中。
通过金实体链接，GrailQA，GraphQ和WebQSP的性能分别提高了9.1，10.5和4.9。</p>
</div>
<figure class="ltx_table" id="A3.T8">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="A3.T8.1" style="width:208.1pt;height:58pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(7.1pt,-2.0pt) scale(1.07358628643892,1.07358628643892) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A3.T8.1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A3.T8.1.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="A3.T8.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="A3.T8.1.1.1.1.1.1">Methods</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="A3.T8.1.1.1.1.2"><span class="ltx_text ltx_font_bold" id="A3.T8.1.1.1.1.2.1">GrailQA</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="A3.T8.1.1.1.1.3"><span class="ltx_text ltx_font_bold" id="A3.T8.1.1.1.1.3.1">GraphQ</span></th>
<th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="A3.T8.1.1.1.1.4"><span class="ltx_text ltx_font_bold" id="A3.T8.1.1.1.1.4.1">WebQSP</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A3.T8.1.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A3.T8.1.1.2.1.1">QueryAgent</th>
<td class="ltx_td ltx_align_right ltx_border_t" id="A3.T8.1.1.2.1.2">60.5</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="A3.T8.1.1.2.1.3">50.8</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="A3.T8.1.1.2.1.4">63.9</td>
</tr>
<tr class="ltx_tr" id="A3.T8.1.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="A3.T8.1.1.3.2.1">    w/ gold entity</th>
<td class="ltx_td ltx_align_right ltx_border_bb" id="A3.T8.1.1.3.2.2">71.6</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="A3.T8.1.1.3.2.3">61.3</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="A3.T8.1.1.3.2.4">68.8</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">表8： </span>QueryAgent与黄金实体链接结果的结果。</figcaption>
</figure>
</section>
</section>
<section class="ltx_appendix" id="A4">
<h2 class="ltx_title ltx_title_appendix"><span class="ltx_tag ltx_tag_appendix">附录D </span>QueryAgent中使用的提示</h2>
<figure class="ltx_figure" id="A4.F3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="344" id="A4.F3.g1" src="resource/x3.png" width="635"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">图3： </span>GrailQA的提示（任务描述和工具文档）。</figcaption>
</figure>
<figure class="ltx_figure" id="A4.F4"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_portrait" height="900" id="A4.F4.g1" src="resource/x4.png" width="636"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">图4： </span>GrailQA提示（1-shot示例和新问题）。</figcaption>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section class="ltx_appendix" id="A5">
<h2 class="ltx_title ltx_title_appendix"><span class="ltx_tag ltx_tag_appendix">附录E </span>工具集</h2>
<figure class="ltx_table" id="A5.T9">
<div class="ltx_inline-block ltx_transformed_outer" id="A5.T9.1" style="width:433.6pt;height:348pt;vertical-align:-0.7pt;"><span class="ltx_transformed_inner" style="transform:translate(-91.8pt,73.5pt) scale(0.702644141876075,0.702644141876075) ;">
<table class="ltx_tabular ltx_align_middle" id="A5.T9.1.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A5.T9.1.1.1.1">
<td class="ltx_td ltx_align_justify ltx_border_tt" id="A5.T9.1.1.1.1.1" style="width:182.1pt;"><span class="ltx_text ltx_font_bold ltx_align_top" id="A5.T9.1.1.1.1.1.1">PyQL function</span></td>
<td class="ltx_td ltx_align_justify ltx_border_tt" id="A5.T9.1.1.1.1.2" style="width:284.5pt;"><span class="ltx_text ltx_font_bold ltx_align_top" id="A5.T9.1.1.1.1.2.1">Brief description</span></td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.2.2">
<td class="ltx_td ltx_align_center ltx_border_t" colspan="2" id="A5.T9.1.1.2.2.1"><span class="ltx_text ltx_font_bold" id="A5.T9.1.1.2.2.1.1">SPARQL version (for KB)</span></td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.3.3">
<td class="ltx_td ltx_align_justify ltx_border_t" id="A5.T9.1.1.3.3.1" style="width:182.1pt;"><span class="ltx_text ltx_font_bold ltx_align_top" id="A5.T9.1.1.3.3.1.1">Tools for interacting with KB</span></td>
<td class="ltx_td ltx_align_justify ltx_border_t" id="A5.T9.1.1.3.3.2" style="width:284.5pt;"></td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.4.4">
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.4.4.1" style="width:182.1pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.4.4.1.1">get_relation(entity_or_variable)</p>
</td>
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.4.4.2" style="width:284.5pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.4.4.2.1">Get the one-hop relations of an entity or a variable. The parameter should be an entity (m.02xlbx) in KB or a variable (?computer).</p>
</td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.5.5">
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.5.5.1" style="width:182.1pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.5.5.1.1">execute()</p>
</td>
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.5.5.2" style="width:284.5pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.5.5.2.1">Execute the current SPARQL query, and return the execution result on KB.</p>
</td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.6.6">
<td class="ltx_td ltx_align_justify ltx_border_t" id="A5.T9.1.1.6.6.1" style="width:182.1pt;"><span class="ltx_text ltx_font_bold ltx_align_top" id="A5.T9.1.1.6.6.1.1">Tools for constructing query</span></td>
<td class="ltx_td ltx_align_justify ltx_border_t" id="A5.T9.1.1.6.6.2" style="width:284.5pt;"></td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.7.7">
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.7.7.1" style="width:182.1pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.7.7.1.1">add_fact(head, relation, tail)</p>
</td>
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.7.7.2" style="width:284.5pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.7.7.2.1">Add a triple pattern of (head, relation, tail).</p>
</td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.8.8">
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.8.8.1" style="width:182.1pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.8.8.1.1">add_max(max_var)</p>
</td>
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.8.8.2" style="width:284.5pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.8.8.2.1">Calculate the maximum value of a given variable (max_var).</p>
</td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.9.9">
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.9.9.1" style="width:182.1pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.9.9.1.1">add_min(min_var)</p>
</td>
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.9.9.2" style="width:284.5pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.9.9.2.1">Calculate the minimum value of a given variable (min_var).</p>
</td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.10.10">
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.10.10.1" style="width:182.1pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.10.10.1.1">add_count(count_var)</p>
</td>
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.10.10.2" style="width:284.5pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.10.10.2.1">Count the occurrences of a given variable (count_var).</p>
</td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.11.11">
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.11.11.1" style="width:182.1pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.11.11.1.1">add_filter(ob1,op,ob2)</p>
</td>
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.11.11.2" style="width:284.5pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.11.11.2.1">Add a comparative constraint. “ob1” and “ob2” are two objects for comparison. The “op” can be one of &gt;, &lt;, =, &gt;=, &lt;=.</p>
</td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.12.12">
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.12.12.1" style="width:182.1pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.12.12.1.1">set_answer(ans_var)</p>
</td>
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.12.12.2" style="width:284.5pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.12.12.2.1">Set the ans_var as the variable that this query returns.</p>
</td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.13.13">
<td class="ltx_td ltx_align_center ltx_border_t" colspan="2" id="A5.T9.1.1.13.13.1"><span class="ltx_text ltx_font_bold" id="A5.T9.1.1.13.13.1.1">SQL version (for DB)</span></td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.14.14">
<td class="ltx_td ltx_align_justify ltx_border_t" id="A5.T9.1.1.14.14.1" style="width:182.1pt;"><span class="ltx_text ltx_font_bold ltx_align_top" id="A5.T9.1.1.14.14.1.1">Tools for interacting with DB</span></td>
<td class="ltx_td ltx_align_justify ltx_border_t" id="A5.T9.1.1.14.14.2" style="width:284.5pt;"></td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.15.15">
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.15.15.1" style="width:182.1pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.15.15.1.1">get_column(column)</p>
</td>
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.15.15.2" style="width:284.5pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.15.15.2.1">Get the value stored in the given column.</p>
</td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.16.16">
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.16.16.1" style="width:182.1pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.16.16.1.1">execute()</p>
</td>
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.16.16.2" style="width:284.5pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.16.16.2.1">Execute the current SQL query, and return the execution result on DB.</p>
</td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.17.17">
<td class="ltx_td ltx_align_justify ltx_border_t" id="A5.T9.1.1.17.17.1" style="width:182.1pt;"><span class="ltx_text ltx_font_bold ltx_align_top" id="A5.T9.1.1.17.17.1.1">Tools for constructing query</span></td>
<td class="ltx_td ltx_align_justify ltx_border_t" id="A5.T9.1.1.17.17.2" style="width:284.5pt;"></td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.18.18">
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.18.18.1" style="width:182.1pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.18.18.1.1">add_condition(column, op, value)</p>
</td>
<td class="ltx_td ltx_align_justify" id="A5.T9.1.1.18.18.2" style="width:284.5pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.18.18.2.1">Add a constrain which requires the SQL meets “column op value”. The “column” should be the column_name of all columns. The op can be one of: =, &gt;, &lt;. The “value” is a specific value (<span class="ltx_text ltx_font_italic" id="A5.T9.1.1.18.18.2.1.1">e.g.,</span>string, digit). For example, add_condition(Lyrics theme/style, =, Romance) is a valid case. It requires the SQL query should only return the rows that the value stored in “Lyrics theme/style” column is “Romance”.</p>
</td>
</tr>
<tr class="ltx_tr" id="A5.T9.1.1.19.19">
<td class="ltx_td ltx_align_justify ltx_border_bb" id="A5.T9.1.1.19.19.1" style="width:182.1pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.19.19.1.1">set_answer(column, aggregation_type)</p>
</td>
<td class="ltx_td ltx_align_justify ltx_border_bb" id="A5.T9.1.1.19.19.2" style="width:284.5pt;">
<p class="ltx_p ltx_align_top" id="A5.T9.1.1.19.19.2.1">Specify the answer to this SQL. What column do you want to return (column) and what aggregation function (aggregation_type) do you need to perform on it.
The aggregation_type can only be: None, MAX, MIN, COUNT, SUM, AVG.
If the question just needs to return the content of the column corresponding to column, and does not need to do anything else with it, just set the aggregation_type to None.
If the question needs to return the number of all items in the column corresponding to column_name, set the aggregation_type to COUNT.
If the question needs to return the maximum or minimum item among all items in the column corresponding to column, set the aggregation_type to MAX or MIN.
If the question needs to return the summation or average of all items in column_name, set the aggregation_type to SUM or AVG.</p>
</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">表9： </span>我们在这项工作中使用的工具集。我们设计了两个版本的PyQL函数：SPARQL版本（用于知识库）和SQL版本（用于数据库）。与知识库/数据库交互的工具需要对知识库/数据库执行以获得执行结果，并不会向目标查询添加子句。构建知识库/数据库的工具用于向目标查询添加子句。</figcaption>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section class="ltx_appendix" id="A6">
<h2 class="ltx_title ltx_title_appendix"><span class="ltx_tag ltx_tag_appendix">附录F </span>案例研究</h2>
<figure class="ltx_figure" id="A6.F5"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_portrait" height="820" id="A6.F5.g1" src="resource/x5.png" width="643"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">图5： </span>GrailQA的推理和自我纠正示例。</figcaption>
</figure>
<figure class="ltx_figure" id="A6.F6"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_portrait" height="860" id="A6.F6.g1" src="resource/x6.png" width="643"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">图6： </span>GraphQ的推理和自我纠正示例</figcaption>
</figure>
<figure class="ltx_figure" id="A6.F7"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_portrait" height="868" id="A6.F7.g1" src="resource/x7.png" width="643"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">图7： </span>WebQSP的推理和自我纠正示例。</figcaption>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section class="ltx_appendix" id="A7">
<h2 class="ltx_title ltx_title_appendix"><span class="ltx_tag ltx_tag_appendix">附录G </span>ERASER示例指南</h2>
<figure class="ltx_table" id="A7.T10">
<table class="ltx_tabular ltx_align_middle" id="A7.T10.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A7.T10.1.1.1">
<td class="ltx_td ltx_align_justify ltx_border_tt" id="A7.T10.1.1.1.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T10.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="A7.T10.1.1.1.1.1.1">Trigger</span>: When the result of add_filter is empty. All parameters are valid.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T10.1.2.2">
<td class="ltx_td ltx_align_justify" id="A7.T10.1.2.2.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T10.1.2.2.1.1"><span class="ltx_text ltx_font_bold" id="A7.T10.1.2.2.1.1.1">Guidelines</span>: You choose add_filter as the action in this step. However, we get an empty result. I strongly suggest you carefully check if a comparison step is needed. If not needed and the result already meets our expectations, you can use set_answer() to determine which variable to return. If there is a need for a filter constraint, please carefully check the two comparison objects and the operator. Please re-generate only Thought STEPS + 1 and Action STEPS + 1.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T10.1.3.3">
<td class="ltx_td ltx_align_justify ltx_border_t" id="A7.T10.1.3.3.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T10.1.3.3.1.1"><span class="ltx_text ltx_font_bold" id="A7.T10.1.3.3.1.1.1">Trigger</span>: When setting CVT node as the answer.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T10.1.4.4">
<td class="ltx_td ltx_align_justify" id="A7.T10.1.4.4.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T10.1.4.4.1.1"><span class="ltx_text ltx_font_bold" id="A7.T10.1.4.4.1.1.1">Example</span>: <span class="ltx_text ltx_font_typewriter" id="A7.T10.1.4.4.1.1.2">set_answer(?conflict)</span></p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T10.1.5.5">
<td class="ltx_td ltx_align_justify" id="A7.T10.1.5.5.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T10.1.5.5.1.1"><span class="ltx_text ltx_font_bold" id="A7.T10.1.5.5.1.1.1">Guidelines</span>: You should not set ?conflict as the answer, because its value is "UnName_Entity". Please check again and re-generate only Thought STEPS + 1 and Action STEPS + 1.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T10.1.6.6">
<td class="ltx_td ltx_align_justify ltx_border_t" id="A7.T10.1.6.6.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T10.1.6.6.1.1"><span class="ltx_text ltx_font_bold" id="A7.T10.1.6.6.1.1.1">Trigger</span>: Got empty result after adding an add_fact(h,r,t) and “r” is a valid relation from the result of get_relation().</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T10.1.7.7">
<td class="ltx_td ltx_align_justify" id="A7.T10.1.7.7.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T10.1.7.7.1.1"><span class="ltx_text ltx_font_bold" id="A7.T10.1.7.7.1.1.1">Example</span>: Added two triple patterns to the same entity with different relations.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T10.1.8.8">
<td class="ltx_td ltx_align_justify ltx_border_bb" id="A7.T10.1.8.8.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T10.1.8.8.1.1"><span class="ltx_text ltx_font_bold" id="A7.T10.1.8.8.1.1.1">Guidelines</span>: Got empty result after adding this triple pattern. You should carefully check whether this triple is needed. You likely add a triple pattern that can not match any graph on KB.</p>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">表10： </span>利用知识库反馈的示例指南。</figcaption>
</figure>
<figure class="ltx_table" id="A7.T11">
<table class="ltx_tabular ltx_align_middle" id="A7.T11.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A7.T11.1.1.1">
<td class="ltx_td ltx_align_justify ltx_border_tt" id="A7.T11.1.1.1.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T11.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="A7.T11.1.1.1.1.1.1">Trigger</span>: When generated action is not in action_list.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T11.1.2.2">
<td class="ltx_td ltx_align_justify" id="A7.T11.1.2.2.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T11.1.2.2.1.1"><span class="ltx_text ltx_font_bold" id="A7.T11.1.2.2.1.1.1">Example</span>: <span class="ltx_text ltx_font_typewriter" id="A7.T11.1.2.2.1.1.2">None</span></p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T11.1.3.3">
<td class="ltx_td ltx_align_justify" id="A7.T11.1.3.3.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T11.1.3.3.1.1"><span class="ltx_text ltx_font_bold" id="A7.T11.1.3.3.1.1.1">Guidelines</span>: Invalid action, next time you must choose an action from get_relation(), add_fact(), add_max(), add_min(), add_count(), add_filter(), set_answer(), execute(). Please re-generate only Thought STEPS + 1 and Action STEPS + 1.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T11.1.4.4">
<td class="ltx_td ltx_align_justify ltx_border_t" id="A7.T11.1.4.4.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T11.1.4.4.1.1"><span class="ltx_text ltx_font_bold" id="A7.T11.1.4.4.1.1.1">Trigger</span>: When the parameter list of the generated action does not match the requirements specified in the API documentation.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T11.1.5.5">
<td class="ltx_td ltx_align_justify" id="A7.T11.1.5.5.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T11.1.5.5.1.1"><span class="ltx_text ltx_font_bold" id="A7.T11.1.5.5.1.1.1">Example</span>: <span class="ltx_text ltx_font_typewriter" id="A7.T11.1.5.5.1.1.2">add_fact(?x, ?y)</span></p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T11.1.6.6">
<td class="ltx_td ltx_align_justify" id="A7.T11.1.6.6.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T11.1.6.6.1.1"><span class="ltx_text ltx_font_bold" id="A7.T11.1.6.6.1.1.1">Guidelines</span>: add_fact(head,relation,tail) should have 3 parameters. You have 2 parameters. Please check again.
(specific guidelines vary depending on the actual situation)</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T11.1.7.7">
<td class="ltx_td ltx_align_justify ltx_border_t" id="A7.T11.1.7.7.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T11.1.7.7.1.1"><span class="ltx_text ltx_font_bold" id="A7.T11.1.7.7.1.1.1">Trigger</span>: When the operator is invalid in add_filter.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T11.1.8.8">
<td class="ltx_td ltx_align_justify" id="A7.T11.1.8.8.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T11.1.8.8.1.1"><span class="ltx_text ltx_font_bold" id="A7.T11.1.8.8.1.1.1">Example</span>: <span class="ltx_text ltx_font_typewriter" id="A7.T11.1.8.8.1.1.2">add_filter(?engine, aviation.aircraft_model.part_of_line, m.031vqw)</span></p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T11.1.9.9">
<td class="ltx_td ltx_align_justify ltx_border_bb" id="A7.T11.1.9.9.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T11.1.9.9.1.1"><span class="ltx_text ltx_font_bold" id="A7.T11.1.9.9.1.1.1">Guidelines</span>: You used aviation.aircraft_model.part_of_line as operator in add_filter, which is invalid. I strongly suggest you carefully check whether a comparison step and add_filter() is needed. If not needed and the result already meets our expectation, use set_answer() to determine which variable to return as the answer. If a comparison step is indeed needed, make sure the second argument is one of [&gt;, &lt;, &gt;=, &lt;=, =, !=]. Please re-generate only Thought STEPS + 1 and Action STEPS + 1.</p>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">表11： </span>利用Python反馈的示例指南。</figcaption>
</figure>
<figure class="ltx_table" id="A7.T12">
<table class="ltx_tabular ltx_align_middle" id="A7.T12.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A7.T12.1.1.1">
<td class="ltx_td ltx_align_justify ltx_border_tt" id="A7.T12.1.1.1.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T12.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="A7.T12.1.1.1.1.1.1">Trigger</span>: When add_fact is used but no relations have been queried.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T12.1.2.2">
<td class="ltx_td ltx_align_justify" id="A7.T12.1.2.2.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T12.1.2.2.1.1"><span class="ltx_text ltx_font_bold" id="A7.T12.1.2.2.1.1.1">Example</span>: <span class="ltx_text ltx_font_typewriter" id="A7.T12.1.2.2.1.1.2">add_fact(m.0bj4p9h, ?relation, ?newspaper)</span></p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T12.1.3.3">
<td class="ltx_td ltx_align_justify" id="A7.T12.1.3.3.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T12.1.3.3.1.1"><span class="ltx_text ltx_font_bold" id="A7.T12.1.3.3.1.1.1">Guidelines</span>: You should use get_relation() first. Suggestion: choose valid options from get_relation(m.0bj4p9h). Please check again and re-generate only Thought STEPS + 1 and Action STEPS + 1.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T12.1.4.4">
<td class="ltx_td ltx_align_justify ltx_border_t" id="A7.T12.1.4.4.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T12.1.4.4.1.1"><span class="ltx_text ltx_font_bold" id="A7.T12.1.4.4.1.1.1">Trigger</span>: When the parameter of get_relation is not a linked entity or created variable.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T12.1.5.5">
<td class="ltx_td ltx_align_justify" id="A7.T12.1.5.5.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T12.1.5.5.1.1"><span class="ltx_text ltx_font_bold" id="A7.T12.1.5.5.1.1.1">Example</span>: <span class="ltx_text ltx_font_typewriter" id="A7.T12.1.5.5.1.1.2">get_relation(g.1233lk8r)</span></p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T12.1.6.6">
<td class="ltx_td ltx_align_justify" id="A7.T12.1.6.6.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T12.1.6.6.1.1"><span class="ltx_text ltx_font_bold" id="A7.T12.1.6.6.1.1.1">Guidelines</span>: The parameter of “g.1233lk8r” is not a linked entity or created variable. Suggestion: choose from: get_relation(?instrument), get_relation(m.01663r) for next Action. Please check again and re-generate.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T12.1.7.7">
<td class="ltx_td ltx_align_justify ltx_border_t" id="A7.T12.1.7.7.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T12.1.7.7.1.1"><span class="ltx_text ltx_font_bold" id="A7.T12.1.7.7.1.1.1">Trigger</span>: When parameter of set_answer is not a existing variable.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T12.1.8.8">
<td class="ltx_td ltx_align_justify" id="A7.T12.1.8.8.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T12.1.8.8.1.1"><span class="ltx_text ltx_font_bold" id="A7.T12.1.8.8.1.1.1">Example</span>: <span class="ltx_text ltx_font_typewriter" id="A7.T12.1.8.8.1.1.2">set_answer(?boat)</span></p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T12.1.9.9">
<td class="ltx_td ltx_align_justify" id="A7.T12.1.9.9.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T12.1.9.9.1.1"><span class="ltx_text ltx_font_bold" id="A7.T12.1.9.9.1.1.1">Guidelines</span>: ?boat is not a created variable. You must set an existing variable as the answer. Existing variables include: ?car, ?speed. Please choose the proper variable and set it again.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T12.1.10.10">
<td class="ltx_td ltx_align_justify ltx_border_t" id="A7.T12.1.10.10.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T12.1.10.10.1.1"><span class="ltx_text ltx_font_bold" id="A7.T12.1.10.10.1.1.1">Trigger</span>: When two new variables are introduced in add_fact.</p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T12.1.11.11">
<td class="ltx_td ltx_align_justify" id="A7.T12.1.11.11.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T12.1.11.11.1.1"><span class="ltx_text ltx_font_bold" id="A7.T12.1.11.11.1.1.1">Example</span>: <span class="ltx_text ltx_font_typewriter" id="A7.T12.1.11.11.1.1.2">add_fact(?exhibition, exhibition.exhibition_subject.subject, ?subject)</span></p>
</td>
</tr>
<tr class="ltx_tr" id="A7.T12.1.12.12">
<td class="ltx_td ltx_align_justify ltx_border_bb" id="A7.T12.1.12.12.1" style="width:441.0pt;">
<p class="ltx_p ltx_align_top" id="A7.T12.1.12.12.1.1"><span class="ltx_text ltx_font_bold" id="A7.T12.1.12.12.1.1.1">Guidelines</span>: You introduced unexisting variable in add_fact(), which is invalid. You should find another approach to solve the question. Please re-generate only Thought STEPS + 1 and Action STEPS + 1.</p>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">表12： </span>利用推理记忆反馈的示例指南。</figcaption>
</figure>
</section>
</article>
</div>
</div>
</body>
</html>
